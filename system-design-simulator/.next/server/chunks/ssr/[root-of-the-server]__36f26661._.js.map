{"version":3,"sources":["../../../../../../../../Documents/Git/system-design/system-design-simulator/src/components/coding/coding-test.tsx/__nextjs-internal-proxy.mjs","../../../../../../../../Documents/Git/system-design/system-design-simulator/src/app/coding/test/%5Bid%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CodingTest = registerClientReference(\n    function() { throw new Error(\"Attempted to call CodingTest() from the server but CodingTest is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Documents/Git/system-design/system-design-simulator/src/components/coding/coding-test.tsx\",\n    \"CodingTest\",\n);\n","\nimport { auth } from \"@/lib/auth\";\nimport { prisma } from \"@/lib/prisma\";\nimport { redirect, notFound } from \"next/navigation\";\nimport { CodingTest } from \"@/components/coding/coding-test\";\n\nexport default async function CodingTestPage({\n    params,\n}: {\n    params: Promise<{ id: string }>;\n}) {\n    const session = await auth();\n\n    if (!session?.user?.id) {\n        redirect(\"/login\");\n    }\n\n    const { id } = await params;\n\n    const testSession = await prisma.codingTest.findFirst({\n        where: {\n            id,\n            userId: session.user.id,\n        },\n        include: {\n            challenges: {\n                include: {\n                    score: true\n                },\n                orderBy: {\n                    createdAt: 'asc' // Assume creation order implies problem order\n                }\n            },\n        },\n    });\n\n    if (!testSession) {\n        notFound();\n    }\n\n    // Calculate remaining time\n    let remainingTime = null;\n    if (testSession.status === \"in_progress\" && testSession.startedAt) {\n        const elapsedMs = Date.now() - testSession.startedAt.getTime();\n        const timeLimitMs = testSession.timeLimit * 60 * 1000;\n        remainingTime = Math.max(0, timeLimitMs - elapsedMs);\n    } else if (testSession.status === \"pending\") {\n        remainingTime = testSession.timeLimit * 60 * 1000;\n    }\n\n    // Map challenges to the format expected by CodingChallenge components\n    const challenges = testSession.challenges.map(c => ({\n        id: c.id,\n        title: c.title,\n        description: c.description,\n        difficulty: c.difficulty,\n        category: c.category,\n        company: c.company,\n        language: c.language,\n        timeLimit: c.timeLimit,\n        status: c.status,\n        startedAt: c.startedAt?.toISOString() || null,\n        starterCode: c.starterCode,\n        finalCode: c.finalCode,\n        visibleTests: JSON.parse(c.visibleTests),\n        remainingTime: null, // Timer is managed globally by test\n        score: c.score\n            ? {\n                correctness: c.score.correctness,\n                efficiency: c.score.efficiency,\n                codeQuality: c.score.codeQuality,\n                edgeCases: c.score.edgeCases,\n                overallScore: c.score.overallScore,\n                passStatus: c.score.passStatus,\n                feedback: c.score.feedback,\n                suggestedApproach: c.score.suggestedApproach,\n                complexityAnalysis: c.score.complexityAnalysis,\n            }\n            : null,\n    }));\n\n    return (\n        <CodingTest\n            testId={testSession.id}\n            initialStatus={testSession.status}\n            initialTimeRemaining={remainingTime}\n            challenges={challenges}\n        />\n    );\n}\n"],"names":[],"mappings":"oyBAEO,IAAM,EAAa,CAAA,EAAA,AAD1B,EAAA,CAAA,CAAA,OAC0B,uBAAA,AAAuB,EAC7C,WAAa,MAAM,AAAI,MAAM,kOAAoO,EACjQ,0HACA,gEAHG,IAAM,EAAa,CAAA,EAD1B,AAC0B,EAD1B,CAAA,CAAA,OAC0B,uBAAA,AAAuB,EAC7C,WAAa,MAAM,AAAI,MAAM,kOAAoO,EACjQ,sGACA,yHCJJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,kBAEe,eAAe,EAAe,QACzC,CAAM,CAGT,EACG,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,IAAA,AAAI,GAEtB,CAAC,GAAS,MAAM,IAChB,AADoB,CACpB,EAAA,EAAA,QAAA,AAAQ,EAAC,UAGb,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EAEf,EAAc,MAAM,EAAA,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAClD,MAAO,IACH,EACA,OAAQ,EAAQ,IAAI,CAAC,EAAE,AAC3B,EACA,QAAS,CACL,WAAY,CACR,QAAS,CACL,OAAO,CACX,EACA,QAAS,CACL,UAAW,KACf,CADqB,AAEzB,CACJ,CACJ,EAEI,CAAC,GACD,CAAA,EAAA,EAAA,KADc,GACd,AAAQ,IAIZ,IAAI,EAAgB,KACpB,GAA2B,OAZoD,SAY3E,EAAY,MAAM,EAAsB,EAAY,SAAS,CAAE,CAC/D,IAAM,EAAY,KAAK,GAAG,GAAK,EAAY,SAAS,CAAC,OAAO,GACtD,EAAsC,GAAxB,EAAY,SAAS,CAAQ,IACjD,EAAgB,KAAK,GAAG,CAAC,EAAG,EAAc,EAC9C,KAAkC,EAA3B,SAAsC,CAAlC,EAAY,MAAM,GACzB,EAAwC,GAAxB,EAAY,SAAS,CAAQ,GAAA,EAIjD,IAAM,EAAa,EAAY,UAAU,CAAC,GAAG,CAAC,IAAK,AAAC,CAChD,GAAI,EAAE,EAAE,CACR,MAAO,EAAE,KAAK,CACd,YAAa,EAAE,WAAW,CAC1B,WAAY,EAAE,UAAU,CACxB,SAAU,EAAE,QAAQ,CACpB,QAAS,EAAE,OAAO,CAClB,SAAU,EAAE,QAAQ,CACpB,UAAW,EAAE,SAAS,CACtB,OAAQ,EAAE,MAAM,CAChB,UAAW,EAAE,SAAS,EAAE,eAAiB,KACzC,YAAa,EAAE,WAAW,CAC1B,UAAW,EAAE,SAAS,CACtB,aAAc,KAAK,KAAK,CAAC,EAAE,YAAY,EACvC,cAAe,KACf,MAAO,EAAE,KAAK,CACR,CACE,YAAa,EAAE,KAAK,CAAC,WAAW,CAChC,WAAY,EAAE,KAAK,CAAC,UAAU,CAC9B,YAAa,EAAE,KAAK,CAAC,WAAW,CAChC,UAAW,EAAE,KAAK,CAAC,SAAS,CAC5B,aAAc,EAAE,KAAK,CAAC,YAAY,CAClC,WAAY,EAAE,KAAK,CAAC,UAAU,CAC9B,SAAU,EAAE,KAAK,CAAC,QAAQ,CAC1B,kBAAmB,EAAE,KAAK,CAAC,iBAAiB,CAC5C,mBAAoB,EAAE,KAAK,CAAC,kBAAkB,AAClD,EACE,KACV,CAAC,EAED,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACP,OAAQ,EAAY,EAAE,CACtB,cAAe,EAAY,MAAM,CACjC,qBAAsB,EACtB,WAAY,GAGxB","ignoreList":[0]}