{"version":3,"sources":["../../../../../../../../Documents/Git/system-design/system-design-simulator/src/components/interview/interview-chat.tsx/__nextjs-internal-proxy.mjs","../../../../../../../../Documents/Git/system-design/system-design-simulator/src/app/interview/%5Bid%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InterviewChat = registerClientReference(\n    function() { throw new Error(\"Attempted to call InterviewChat() from the server but InterviewChat is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Documents/Git/system-design/system-design-simulator/src/components/interview/interview-chat.tsx\",\n    \"InterviewChat\",\n);\n","import { auth } from \"@/lib/auth\";\nimport { prisma } from \"@/lib/prisma\";\nimport { redirect, notFound } from \"next/navigation\";\nimport { InterviewChat } from \"@/components/interview/interview-chat\";\n\nexport default async function InterviewPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const session = await auth();\n\n  if (!session?.user?.id) {\n    redirect(\"/login\");\n  }\n\n  const { id } = await params;\n\n  const interview = await prisma.interview.findFirst({\n    where: {\n      id,\n      userId: session.user.id,\n    },\n    include: {\n      messages: {\n        orderBy: { timestamp: \"asc\" },\n      },\n      score: true,\n    },\n  });\n\n  if (!interview) {\n    notFound();\n  }\n\n  // Filter out system messages for display\n  const displayMessages = interview.messages\n    .filter((m) => m.role !== \"system\")\n    .map((m) => ({\n      id: m.id,\n      role: m.role as \"user\" | \"assistant\",\n      content: m.content,\n      timestamp: m.timestamp.toISOString(),\n    }));\n\n  // Extract completed phases\n  let completedPhases: string[] = [];\n  if (interview.phaseTransitions) {\n    try {\n      const transitions: Array<{ phase: string; startedAt: string; endedAt?: string }> =\n        JSON.parse(interview.phaseTransitions);\n      completedPhases = transitions.map(t => t.phase);\n    } catch (error) {\n      console.error(\"Failed to parse phase transitions:\", error);\n    }\n  }\n\n  return (\n    <InterviewChat\n      interview={{\n        id: interview.id,\n        topic: interview.topic,\n        difficulty: interview.difficulty,\n        status: interview.status,\n        startedAt: interview.startedAt?.toISOString() || null,\n      }}\n      initialMessages={displayMessages}\n      completedPhases={completedPhases}\n      score={\n        interview.score\n          ? {\n            ...interview.score,\n            feedback: JSON.parse(interview.score.feedback),\n          }\n          : null\n      }\n    />\n  );\n}\n"],"names":[],"mappings":"uyBAEO,IAAM,EAAgB,CAAA,EAAA,AAD7B,EAAA,CAAA,CAAA,OAC6B,uBAAA,AAAuB,EAChD,WAAa,MAAM,AAAI,MAAM,wOAA0O,EACvQ,gIACA,sEAHG,IAAM,EAAgB,CAAA,EAD7B,AAC6B,EAD7B,CAAA,CAAA,OAC6B,uBAAuB,AAAvB,EACzB,WAAa,MAAM,AAAI,MAAM,wOAA0O,EACvQ,4GACA,4HCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,kBAEe,eAAe,EAAc,QAC1C,CAAM,CAGP,EACC,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,IAAA,AAAI,GAEtB,CAAC,GAAS,MAAM,IAClB,AADsB,CACtB,EAAA,EAAA,QAAA,AAAQ,EAAC,UAGX,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EAEf,EAAY,MAAM,EAAA,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CACjD,MAAO,IACL,EACA,OAAQ,EAAQ,IAAI,CAAC,EAAE,AACzB,EACA,QAAS,CACP,SAAU,CACR,QAAS,CAAE,UAAW,KAAM,CAC9B,EACA,OAAO,CACT,CACF,EAEI,CAAC,GACH,CAAA,EAAA,EAAA,GADc,KACd,AAAQ,IAIV,IAAM,EAAkB,EAAU,QAAQ,CACvC,MAAM,CAAC,AAAC,GAAiB,WAAX,EAAE,IAAI,EACpB,GAAG,CAAC,AAAC,GAAO,CAAD,CACV,GAAI,EAAE,EAAE,CACR,KAAM,EAAE,IAAI,CACZ,QAAS,EAAE,OAAO,CAClB,UAAW,EAAE,SAAS,CAAC,WAAW,GACpC,CAAC,EAGC,EAA4B,EAAE,CAClC,GAAI,EAAU,gBAAgB,CAC5B,CAD8B,EAC1B,CAGF,EAAkB,AADhB,KAAK,KAAK,CAAC,EAAU,gBAAgB,EACT,GAAG,CAAC,GAAK,EAAE,KAAK,CAChD,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,qCAAsC,EACtD,CAGF,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CACZ,UAAW,CACT,GAAI,EAAU,EAAE,CAChB,MAAO,EAAU,KAAK,CACtB,WAAY,EAAU,UAAU,CAChC,OAAQ,EAAU,MAAM,CACxB,UAAW,EAAU,SAAS,EAAE,eAAiB,IACnD,EACA,gBAAiB,EACjB,gBAAiB,EACjB,MACE,EAAU,KAAK,CACX,CACA,GAAG,EAAU,KAAK,CAClB,SAAU,KAAK,KAAK,CAAC,EAAU,KAAK,CAAC,QAAQ,CAC/C,EACE,MAIZ","ignoreList":[0]}