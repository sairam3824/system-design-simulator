{"version":3,"sources":["../../../../../../../Documents/Git/system-design/system-design-simulator/src/lib/coding/constants.ts","../../../../../../../Documents/Git/system-design/system-design-simulator/src/lib/prompts/coding.ts","../../../../../../../Documents/Git/system-design/system-design-simulator/src/lib/coding/problem-generator.ts","../../../../../../../Documents/Git/system-design/system-design-simulator/src/lib/coding/code-evaluator.ts","../../../../../../../Documents/Git/system-design/system-design-simulator/src/lib/coding/starter-templates.ts","../../../../../../../Documents/Git/system-design/system-design-simulator/src/lib/coding/index.ts"],"sourcesContent":["// Coding Challenge Constants\n\nexport const SUPPORTED_LANGUAGES = {\n  python: { name: \"Python\", extension: \".py\", monacoId: \"python\" },\n  javascript: { name: \"JavaScript\", extension: \".js\", monacoId: \"javascript\" },\n  java: { name: \"Java\", extension: \".java\", monacoId: \"java\" },\n  cpp: { name: \"C++\", extension: \".cpp\", monacoId: \"cpp\" },\n  c: { name: \"C\", extension: \".c\", monacoId: \"c\" },\n  csharp: { name: \"C#\", extension: \".cs\", monacoId: \"csharp\" },\n  go: { name: \"Go\", extension: \".go\", monacoId: \"go\" },\n} as const;\n\nexport type SupportedLanguage = keyof typeof SUPPORTED_LANGUAGES;\n\nexport const PROBLEM_CATEGORIES = [\n  \"arrays\",\n  \"strings\",\n  \"linked-lists\",\n  \"stacks-queues\",\n  \"trees\",\n  \"graphs\",\n  \"dynamic-programming\",\n  \"recursion\",\n  \"sorting-searching\",\n  \"hash-tables\",\n  \"heaps\",\n  \"bit-manipulation\",\n  \"mixed\",\n] as const;\n\nexport type ProblemCategory = typeof PROBLEM_CATEGORIES[number];\n\nexport const CATEGORY_LABELS: Record<ProblemCategory, string> = {\n  \"arrays\": \"Arrays\",\n  \"strings\": \"Strings\",\n  \"linked-lists\": \"Linked Lists\",\n  \"stacks-queues\": \"Stacks & Queues\",\n  \"trees\": \"Trees\",\n  \"graphs\": \"Graphs\",\n  \"dynamic-programming\": \"Dynamic Programming\",\n  \"recursion\": \"Recursion\",\n  \"sorting-searching\": \"Sorting & Searching\",\n  \"hash-tables\": \"Hash Tables\",\n  \"heaps\": \"Heaps\",\n  \"bit-manipulation\": \"Bit Manipulation\",\n  \"mixed\": \"Mixed / Company Pattern\",\n};\n\nexport const COMPANIES = [\n  \"Google\",\n  \"Meta\",\n  \"Amazon\",\n  \"Apple\",\n  \"Microsoft\",\n  \"Netflix\",\n  \"Uber\",\n  \"Airbnb\",\n  \"Stripe\",\n  \"Twitter\",\n  \"LinkedIn\",\n  \"Salesforce\",\n  \"Adobe\",\n  \"Oracle\",\n  \"IBM\",\n  \"Goldman Sachs\",\n  \"JP Morgan\",\n  \"Bloomberg\",\n] as const;\n\nexport type Company = typeof COMPANIES[number];\n\n// Company interview patterns - most asked topics and typical difficulty distribution\nexport interface CompanyInterviewPattern {\n  name: string;\n  topTopics: ProblemCategory[];\n  difficultyDistribution: {\n    easy: number;\n    medium: number;\n    hard: number;\n  };\n  description: string;\n  interviewStyle: string;\n}\n\nexport const COMPANY_PATTERNS: Record<Company, CompanyInterviewPattern> = {\n  \"Google\": {\n    name: \"Google\",\n    topTopics: [\"arrays\", \"strings\", \"trees\", \"graphs\", \"dynamic-programming\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"Focus on algorithmic thinking and optimization\",\n    interviewStyle: \"Emphasizes clean code, optimal solutions, and ability to handle follow-up questions\",\n  },\n  \"Meta\": {\n    name: \"Meta\",\n    topTopics: [\"arrays\", \"strings\", \"trees\", \"graphs\", \"hash-tables\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"Fast-paced coding with emphasis on problem-solving speed\",\n    interviewStyle: \"Values quick thinking, multiple solutions, and handling edge cases\",\n  },\n  \"Amazon\": {\n    name: \"Amazon\",\n    topTopics: [\"arrays\", \"trees\", \"graphs\", \"dynamic-programming\", \"hash-tables\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Leadership principles integrated with coding problems\",\n    interviewStyle: \"Practical problems with real-world applications, emphasis on scalability\",\n  },\n  \"Apple\": {\n    name: \"Apple\",\n    topTopics: [\"arrays\", \"strings\", \"linked-lists\", \"trees\", \"sorting-searching\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Focus on fundamentals and system design thinking\",\n    interviewStyle: \"Clean, maintainable code with attention to detail\",\n  },\n  \"Microsoft\": {\n    name: \"Microsoft\",\n    topTopics: [\"arrays\", \"strings\", \"trees\", \"linked-lists\", \"dynamic-programming\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Well-rounded assessment of CS fundamentals\",\n    interviewStyle: \"Focus on problem decomposition and clear communication\",\n  },\n  \"Netflix\": {\n    name: \"Netflix\",\n    topTopics: [\"arrays\", \"hash-tables\", \"strings\", \"trees\", \"graphs\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"High performance and distributed systems mindset\",\n    interviewStyle: \"Focus on scalability, efficiency, and handling large data\",\n  },\n  \"Uber\": {\n    name: \"Uber\",\n    topTopics: [\"arrays\", \"graphs\", \"hash-tables\", \"heaps\", \"sorting-searching\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"Real-time systems and geospatial problems\",\n    interviewStyle: \"Practical problems related to ride-sharing, maps, and real-time data\",\n  },\n  \"Airbnb\": {\n    name: \"Airbnb\",\n    topTopics: [\"arrays\", \"strings\", \"hash-tables\", \"trees\", \"dynamic-programming\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Product-focused coding with real-world scenarios\",\n    interviewStyle: \"Emphasis on code quality, testing, and product thinking\",\n  },\n  \"Stripe\": {\n    name: \"Stripe\",\n    topTopics: [\"strings\", \"arrays\", \"hash-tables\", \"recursion\", \"dynamic-programming\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"Payment systems and API design focused\",\n    interviewStyle: \"Clean code, error handling, and attention to edge cases in financial systems\",\n  },\n  \"Twitter\": {\n    name: \"Twitter\",\n    topTopics: [\"arrays\", \"strings\", \"hash-tables\", \"heaps\", \"graphs\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"Social network and timeline algorithms\",\n    interviewStyle: \"Focus on data structures for feeds, trending topics, and social graphs\",\n  },\n  \"LinkedIn\": {\n    name: \"LinkedIn\",\n    topTopics: [\"graphs\", \"hash-tables\", \"arrays\", \"trees\", \"strings\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Professional network and recommendation systems\",\n    interviewStyle: \"Graph problems, connection algorithms, and search optimization\",\n  },\n  \"Salesforce\": {\n    name: \"Salesforce\",\n    topTopics: [\"arrays\", \"strings\", \"hash-tables\", \"trees\", \"sorting-searching\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Enterprise software and CRM focused\",\n    interviewStyle: \"Practical problems with emphasis on clean, maintainable code\",\n  },\n  \"Adobe\": {\n    name: \"Adobe\",\n    topTopics: [\"arrays\", \"strings\", \"dynamic-programming\", \"trees\", \"recursion\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Creative software and media processing\",\n    interviewStyle: \"Algorithm optimization and image/document processing scenarios\",\n  },\n  \"Oracle\": {\n    name: \"Oracle\",\n    topTopics: [\"arrays\", \"trees\", \"sorting-searching\", \"hash-tables\", \"strings\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Database and enterprise systems focus\",\n    interviewStyle: \"SQL-related problems and classic data structure questions\",\n  },\n  \"IBM\": {\n    name: \"IBM\",\n    topTopics: [\"arrays\", \"strings\", \"sorting-searching\", \"trees\", \"hash-tables\"],\n    difficultyDistribution: { easy: 2, medium: 1, hard: 0 },\n    description: \"Enterprise solutions and AI/ML applications\",\n    interviewStyle: \"Fundamental CS concepts with emphasis on problem-solving approach\",\n  },\n  \"Goldman Sachs\": {\n    name: \"Goldman Sachs\",\n    topTopics: [\"arrays\", \"strings\", \"dynamic-programming\", \"hash-tables\", \"sorting-searching\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Financial systems and quantitative problems\",\n    interviewStyle: \"Math-heavy problems, optimization, and financial calculations\",\n  },\n  \"JP Morgan\": {\n    name: \"JP Morgan\",\n    topTopics: [\"arrays\", \"strings\", \"hash-tables\", \"sorting-searching\", \"trees\"],\n    difficultyDistribution: { easy: 1, medium: 2, hard: 0 },\n    description: \"Banking systems and transaction processing\",\n    interviewStyle: \"Practical problems with emphasis on accuracy and edge cases\",\n  },\n  \"Bloomberg\": {\n    name: \"Bloomberg\",\n    topTopics: [\"arrays\", \"strings\", \"hash-tables\", \"heaps\", \"sorting-searching\"],\n    difficultyDistribution: { easy: 0, medium: 2, hard: 1 },\n    description: \"Financial data and real-time systems\",\n    interviewStyle: \"Data processing, streaming, and time-series problems\",\n  },\n};\n\nexport const DIFFICULTY_LEVELS = [\"easy\", \"medium\", \"hard\"] as const;\nexport type DifficultyLevel = typeof DIFFICULTY_LEVELS[number];\n\nexport const TIME_LIMITS: Record<DifficultyLevel, number> = {\n  easy: 25,\n  medium: 40,\n  hard: 55,\n};\n\nexport const SCORE_WEIGHTS = {\n  correctness: 0.40,\n  efficiency: 0.25,\n  codeQuality: 0.20,\n  edgeCases: 0.15,\n} as const;\n\nexport const CHALLENGE_STATUS = {\n  PENDING: \"pending\",\n  IN_PROGRESS: \"in_progress\",\n  COMPLETED: \"completed\",\n} as const;\n\nexport type ChallengeStatus = typeof CHALLENGE_STATUS[keyof typeof CHALLENGE_STATUS];\n\n// Test case structure\nexport interface TestCase {\n  input: string;\n  expectedOutput: string;\n  explanation?: string;\n  isHidden?: boolean;\n}\n\n// Example structure\nexport interface Example {\n  input: string;\n  output: string;\n  explanation?: string;\n}\n\n// Score result structure\nexport interface ScoreResult {\n  correctness: number;\n  efficiency: number;\n  codeQuality: number;\n  edgeCases: number;\n  overallScore: number;\n  passStatus: boolean;\n  feedback: string;\n  suggestedApproach?: string;\n  complexityAnalysis?: string;\n}\n\n// Evaluation result structure\nexport interface EvaluationResult {\n  testResults: {\n    testCase: TestCase;\n    passed: boolean;\n    actualOutput?: string;\n    analysis?: string;\n  }[];\n  isValid: boolean;\n  errorMessage?: string;\n  syntaxErrors?: string[];\n  logicAnalysis?: string;\n}\n","// LLM Prompts for Coding Challenges\n\nexport const PROBLEM_GENERATION_PROMPT = `You are an expert DSA problem designer for technical interviews at top tech companies.\n\nGenerate a coding problem based on the following specifications:\n- Difficulty: {difficulty}\n- Category: {category}\n- Company Style: {company} (if provided, match their interview style)\n\nYour response MUST be a valid JSON object with this exact structure:\n{\n  \"title\": \"Problem Title\",\n  \"description\": \"Detailed problem description explaining what needs to be solved. Include the goal, any important definitions, and what the function should return.\",\n  \"constraints\": [\n    \"1 <= n <= 10^5\",\n    \"Array contains integers from -10^9 to 10^9\",\n    \"etc.\"\n  ],\n  \"examples\": [\n    {\n      \"input\": \"nums = [1, 2, 3], target = 4\",\n      \"output\": \"[0, 2]\",\n      \"explanation\": \"Because nums[0] + nums[2] = 1 + 3 = 4\"\n    }\n  ],\n  \"visibleTestCases\": [\n    {\n      \"input\": \"[1, 2, 3]\\\\n4\",\n      \"expectedOutput\": \"[0, 2]\",\n      \"explanation\": \"Basic case\"\n    }\n  ],\n  \"hiddenTestCases\": [\n    {\n      \"input\": \"[1, 1, 1]\\\\n2\",\n      \"expectedOutput\": \"[0, 1]\",\n      \"explanation\": \"Duplicate values\"\n    }\n  ],\n  \"solutionApproaches\": [\n    \"Brute Force: O(n^2) time, O(1) space - Check all pairs\",\n    \"Hash Map: O(n) time, O(n) space - Store complements\"\n  ],\n  \"expectedComplexity\": {\n    \"time\": \"O(n)\",\n    \"space\": \"O(n)\"\n  }\n}\n\nRequirements:\n1. Create a realistic interview problem appropriate for the difficulty level\n2. Include 2-3 visible test cases that demonstrate the problem\n3. Include 3-5 hidden test cases covering edge cases (empty input, single element, large values, etc.)\n4. Provide clear constraints\n5. The problem should be solvable in 30-60 minutes depending on difficulty\n6. For easy: fundamental data structure operations\n7. For medium: combination of techniques, optimization needed\n8. For hard: complex algorithms, multiple steps, non-obvious solutions\n\nReturn ONLY the JSON object, no additional text.`;\n\nexport const CODE_EVALUATION_PROMPT = `You are an expert code reviewer and algorithm analyzer. Your task is to evaluate a candidate's code solution WITHOUT executing it.\n\nProblem:\n{problemDescription}\n\nTest Cases:\n{testCases}\n\nCandidate's Code ({language}):\n\\`\\`\\`{language}\n{code}\n\\`\\`\\`\n\nAnalyze the code and provide your evaluation as a JSON object:\n{\n  \"testResults\": [\n    {\n      \"testIndex\": 0,\n      \"input\": \"test input\",\n      \"expectedOutput\": \"expected\",\n      \"predictedOutput\": \"what the code would output\",\n      \"passed\": true/false,\n      \"analysis\": \"Brief explanation of why it passes or fails\"\n    }\n  ],\n  \"syntaxValid\": true/false,\n  \"syntaxErrors\": [\"list any syntax errors found\"],\n  \"logicAnalysis\": \"Detailed analysis of the algorithm's logic and correctness\",\n  \"correctness\": 0-100,\n  \"efficiency\": 0-100,\n  \"codeQuality\": 0-100,\n  \"edgeCases\": 0-100,\n  \"feedback\": \"Detailed constructive feedback about the solution\",\n  \"suggestedApproach\": \"If the solution is suboptimal, describe a better approach\",\n  \"complexityAnalysis\": {\n    \"time\": \"O(n^2)\",\n    \"space\": \"O(1)\",\n    \"explanation\": \"Loop within a loop for each element...\"\n  }\n}\n\nScoring Guidelines:\n\nCORRECTNESS (0-100):\n- 100: All test cases pass with correct logic\n- 80-99: Minor issues, most cases pass\n- 50-79: Some test cases fail, partial logic\n- 20-49: Significant logic errors\n- 0-19: Fundamentally incorrect approach\n\nEFFICIENCY (0-100):\n- 100: Optimal time and space complexity\n- 80-99: Near-optimal, minor improvements possible\n- 50-79: Acceptable but not optimal\n- 20-49: Inefficient solution\n- 0-19: Very poor complexity (exponential when polynomial exists)\n\nCODE QUALITY (0-100):\n- Clean, readable code with good variable names\n- Proper indentation and structure\n- No code duplication\n- Appropriate use of language features\n- Comments where needed (but not excessive)\n\nEDGE CASES (0-100):\n- Handles empty/null inputs\n- Handles single elements\n- Handles boundary values\n- Handles duplicate values\n- Handles negative numbers (if applicable)\n\nReturn ONLY the JSON object, no additional text.\n\nCRITICAL EVALUATION RULES:\n1. If the code is just a function definition with 'pass', 'return', 'return null', or an empty body: SCORE 0 for Correctness, Efficiency, and Edge Cases.\n2. If the code is a placeholder (e.g. \"// TODO\", \"# Write code here\"): SCORE 0.\n3. You must verify if the code actually implements an algorithm to solve the problem. If it hardcodes return values for test cases without a general logic, SCORE 0.\n4. If the code contains only the starter template: SCORE 0.`;\n\nexport const TEST_CASE_GENERATION_PROMPT = `You are an expert test engineer. Generate additional test cases for the following coding problem.\n\nProblem:\n{problemDescription}\n\nExisting Test Cases:\n{existingTestCases}\n\nGenerate {count} additional test cases that cover edge cases and scenarios not yet tested.\n\nYour response MUST be a valid JSON array:\n[\n  {\n    \"input\": \"test input formatted for the problem\",\n    \"expectedOutput\": \"expected output\",\n    \"explanation\": \"What this test case is checking\",\n    \"isHidden\": true\n  }\n]\n\nFocus on:\n1. Empty inputs\n2. Single element inputs\n3. Maximum constraint values\n4. Minimum constraint values\n5. Negative numbers (if applicable)\n6. Duplicate values\n7. All same values\n8. Sorted input (ascending and descending)\n9. Random order\n10. Boundary conditions\n\nReturn ONLY the JSON array, no additional text.`;\n\nexport const STARTER_CODE_GENERATION_PROMPT = `Generate starter code templates for the following problem in {language}:\n\nProblem: {title}\nDescription: {description}\n\nThe starter code should:\n1. Include the main function signature with appropriate parameters and return type\n2. Include helpful comments about input/output format\n3. Be ready for the candidate to implement the solution\n4. Use idiomatic {language} conventions\n\nReturn ONLY the code, no explanations.`;\n","// Problem Generator using LLM (Ollama with OpenAI fallback)\n// Supports CodeLlama for code generation and understanding\n\nimport { complete, type LLMMessage } from \"@/lib/llm\";\nimport {\n  PROBLEM_GENERATION_PROMPT,\n  TEST_CASE_GENERATION_PROMPT,\n} from \"@/lib/prompts/coding\";\nimport { DifficultyLevel, ProblemCategory, TestCase } from \"./constants\";\n\nexport interface GeneratedProblem {\n  title: string;\n  description: string;\n  constraints: string[];\n  examples: {\n    input: string;\n    output: string;\n    explanation?: string;\n  }[];\n  visibleTestCases: TestCase[];\n  hiddenTestCases: TestCase[];\n  solutionApproaches: string[];\n  expectedComplexity: {\n    time: string;\n    space: string;\n  };\n}\n\nexport interface ProblemGenerationInput {\n  difficulty: DifficultyLevel;\n  category: ProblemCategory;\n  company?: string;\n  model?: \"codellama\" | \"llama3\";\n}\n\n/**\n * Generate a coding problem using LLM (Ollama with OpenAI fallback)\n * Uses coding model type when available\n */\nexport async function generateCodingProblem(\n  input: ProblemGenerationInput\n): Promise<GeneratedProblem> {\n  const prompt = PROBLEM_GENERATION_PROMPT\n    .replace(\"{difficulty}\", input.difficulty)\n    .replace(\"{category}\", input.category)\n    .replace(\"{company}\", input.company || \"general tech company\");\n\n  const messages: LLMMessage[] = [\n    {\n      role: \"user\",\n      content: prompt,\n    },\n  ];\n\n  // Use coding model for codellama preference, general for llama3\n  const modelType = input.model === \"llama3\" ? \"general\" : \"coding\";\n\n  const response = await complete(\n    {\n      messages,\n      temperature: 0.8,\n      maxTokens: 2000,\n    },\n    modelType\n  );\n\n  const content = response.content;\n\n  // Parse the JSON response\n  try {\n    // Find JSON in the response (in case there's extra text)\n    const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n    if (!jsonMatch) {\n      throw new Error(\"No JSON object found in response\");\n    }\n\n    const parsed = JSON.parse(jsonMatch[0]);\n\n    // Validate required fields\n    if (!parsed.title || !parsed.description) {\n      throw new Error(\"Missing required fields in generated problem\");\n    }\n\n    return {\n      title: parsed.title,\n      description: parsed.description,\n      constraints: parsed.constraints || [],\n      examples: parsed.examples || [],\n      visibleTestCases: (parsed.visibleTestCases || []).map((tc: TestCase) => ({\n        ...tc,\n        isHidden: false,\n      })),\n      hiddenTestCases: (parsed.hiddenTestCases || []).map((tc: TestCase) => ({\n        ...tc,\n        isHidden: true,\n      })),\n      solutionApproaches: parsed.solutionApproaches || [],\n      expectedComplexity: parsed.expectedComplexity || { time: \"Unknown\", space: \"Unknown\" },\n    };\n  } catch (error) {\n    console.error(\"Failed to parse problem generation response:\", error);\n    console.error(\"Raw response:\", content);\n    throw new Error(\"Failed to generate problem. Please try again.\");\n  }\n}\n\n/**\n * Generate additional hidden test cases for a problem\n */\nexport async function generateHiddenTestCases(\n  problemDescription: string,\n  existingTestCases: TestCase[],\n  count: number = 5\n): Promise<TestCase[]> {\n  const prompt = TEST_CASE_GENERATION_PROMPT\n    .replace(\"{problemDescription}\", problemDescription)\n    .replace(\"{existingTestCases}\", JSON.stringify(existingTestCases, null, 2))\n    .replace(\"{count}\", count.toString());\n\n  const messages: LLMMessage[] = [\n    {\n      role: \"user\",\n      content: prompt,\n    },\n  ];\n\n  // Use coding model type for test case generation\n  const response = await complete(\n    {\n      messages,\n      temperature: 0.7,\n      maxTokens: 1500,\n    },\n    \"coding\"\n  );\n\n  const content = response.content;\n\n  try {\n    // Find JSON array in the response\n    const jsonMatch = content.match(/\\[[\\s\\S]*\\]/);\n    if (!jsonMatch) {\n      throw new Error(\"No JSON array found in response\");\n    }\n\n    const parsed = JSON.parse(jsonMatch[0]);\n\n    return parsed.map((tc: TestCase) => ({\n      input: tc.input,\n      expectedOutput: tc.expectedOutput,\n      explanation: tc.explanation,\n      isHidden: true,\n    }));\n  } catch (error) {\n    console.error(\"Failed to parse test case generation response:\", error);\n    // Return empty array on failure\n    return [];\n  }\n}\n\n/**\n * Format problem description for display\n */\nexport function formatProblemDescription(problem: GeneratedProblem): string {\n  let description = `# ${problem.title}\\n\\n`;\n  description += `${problem.description}\\n\\n`;\n\n  if (problem.constraints.length > 0) {\n    description += `## Constraints\\n\\n`;\n    problem.constraints.forEach(c => {\n      description += `- ${c}\\n`;\n    });\n    description += \"\\n\";\n  }\n\n  if (problem.examples.length > 0) {\n    description += `## Examples\\n\\n`;\n    problem.examples.forEach((ex, i) => {\n      description += `### Example ${i + 1}\\n`;\n      description += `**Input:** ${ex.input}\\n`;\n      description += `**Output:** ${ex.output}\\n`;\n      if (ex.explanation) {\n        description += `**Explanation:** ${ex.explanation}\\n`;\n      }\n      description += \"\\n\";\n    });\n  }\n\n  return description;\n}\n","// Code Evaluator using LLM (Ollama with OpenAI fallback)\n// Uses coding model type for code understanding and analysis\n\nimport { complete, type LLMMessage } from \"@/lib/llm\";\nimport { CODE_EVALUATION_PROMPT } from \"@/lib/prompts/coding\";\nimport {\n  TestCase,\n  EvaluationResult,\n  ScoreResult,\n  SCORE_WEIGHTS,\n  SupportedLanguage,\n} from \"./constants\";\n\nexport interface EvaluationInput {\n  code: string;\n  language: SupportedLanguage;\n  problemDescription: string;\n  testCases: TestCase[];\n}\n\nexport interface TestResult {\n  testIndex: number;\n  input: string;\n  expectedOutput: string;\n  predictedOutput: string;\n  passed: boolean;\n  analysis: string;\n}\n\nexport interface RawEvaluationResult {\n  testResults: TestResult[];\n  syntaxValid: boolean;\n  syntaxErrors: string[];\n  logicAnalysis: string;\n  correctness: number;\n  efficiency: number;\n  codeQuality: number;\n  edgeCases: number;\n  feedback: string;\n  suggestedApproach?: string;\n  complexityAnalysis?: {\n    time: string;\n    space: string;\n    explanation: string;\n  };\n}\n\n/**\n * Evaluate code using LLM (Ollama with OpenAI fallback)\n * Uses coding model type for accurate code understanding and analysis\n */\nexport async function evaluateCode(\n  input: EvaluationInput\n): Promise<RawEvaluationResult> {\n  const prompt = CODE_EVALUATION_PROMPT\n    .replace(\"{problemDescription}\", input.problemDescription)\n    .replace(\"{testCases}\", JSON.stringify(input.testCases, null, 2))\n    .replace(/{language}/g, input.language)\n    .replace(\"{code}\", input.code);\n\n  const messages: LLMMessage[] = [\n    {\n      role: \"user\",\n      content: prompt,\n    },\n  ];\n\n  // Use coding model type for accurate code analysis and evaluation\n  const response = await complete(\n    {\n      messages,\n      temperature: 0.3, // Lower temperature for more consistent evaluation\n      maxTokens: 3000,\n    },\n    \"coding\"\n  );\n\n  const content = response.content;\n\n  try {\n    // Find JSON in the response\n    const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n    if (!jsonMatch) {\n      throw new Error(\"No JSON object found in evaluation response\");\n    }\n\n    const parsed = JSON.parse(jsonMatch[0]);\n\n    return {\n      testResults: parsed.testResults || [],\n      syntaxValid: parsed.syntaxValid ?? true,\n      syntaxErrors: parsed.syntaxErrors || [],\n      logicAnalysis: parsed.logicAnalysis || \"\",\n      correctness: Math.min(100, Math.max(0, parsed.correctness || 0)),\n      efficiency: Math.min(100, Math.max(0, parsed.efficiency || 0)),\n      codeQuality: Math.min(100, Math.max(0, parsed.codeQuality || 0)),\n      edgeCases: Math.min(100, Math.max(0, parsed.edgeCases || 0)),\n      feedback: parsed.feedback || \"No feedback available.\",\n      suggestedApproach: parsed.suggestedApproach,\n      complexityAnalysis: parsed.complexityAnalysis,\n    };\n  } catch (error) {\n    console.error(\"Failed to parse evaluation response:\", error);\n    console.error(\"Raw response:\", content);\n\n    // Return a default evaluation on parse failure\n    return {\n      testResults: [],\n      syntaxValid: false,\n      syntaxErrors: [\"Unable to evaluate code - please check syntax\"],\n      logicAnalysis: \"Evaluation failed due to parsing error.\",\n      correctness: 0,\n      efficiency: 0,\n      codeQuality: 0,\n      edgeCases: 0,\n      feedback: \"Unable to evaluate the code. Please ensure the code is syntactically correct and try again.\",\n      suggestedApproach: undefined,\n      complexityAnalysis: undefined,\n    };\n  }\n}\n\n/**\n * Convert raw evaluation to EvaluationResult format\n */\nexport function toEvaluationResult(\n  raw: RawEvaluationResult,\n  testCases: TestCase[]\n): EvaluationResult {\n  return {\n    testResults: testCases.map((tc, index) => {\n      const result = raw.testResults.find(r => r.testIndex === index);\n      return {\n        testCase: tc,\n        passed: result?.passed ?? false,\n        actualOutput: result?.predictedOutput,\n        analysis: result?.analysis,\n      };\n    }),\n    isValid: raw.syntaxValid,\n    errorMessage: raw.syntaxErrors.length > 0 ? raw.syntaxErrors.join(\"; \") : undefined,\n    syntaxErrors: raw.syntaxErrors,\n    logicAnalysis: raw.logicAnalysis,\n  };\n}\n\n/**\n * Calculate final score from evaluation\n */\nexport function calculateScore(evaluation: RawEvaluationResult): ScoreResult {\n  // Normalize scores from 0-100 to 0-1\n  const correctnessNorm = evaluation.correctness / 100;\n  const efficiencyNorm = evaluation.efficiency / 100;\n  const codeQualityNorm = evaluation.codeQuality / 100;\n  const edgeCasesNorm = evaluation.edgeCases / 100;\n\n  // Calculate weighted overall score\n  const overallScore =\n    correctnessNorm * SCORE_WEIGHTS.correctness +\n    efficiencyNorm * SCORE_WEIGHTS.efficiency +\n    codeQualityNorm * SCORE_WEIGHTS.codeQuality +\n    edgeCasesNorm * SCORE_WEIGHTS.edgeCases;\n\n  // Pass if overall score >= 70% and correctness >= 60%\n  const passStatus = overallScore >= 0.70 && correctnessNorm >= 0.60;\n\n  return {\n    correctness: evaluation.correctness,\n    efficiency: evaluation.efficiency,\n    codeQuality: evaluation.codeQuality,\n    edgeCases: evaluation.edgeCases,\n    overallScore: Math.round(overallScore * 100),\n    passStatus,\n    feedback: evaluation.feedback,\n    suggestedApproach: evaluation.suggestedApproach,\n    complexityAnalysis: evaluation.complexityAnalysis\n      ? `Time: ${evaluation.complexityAnalysis.time}, Space: ${evaluation.complexityAnalysis.space}. ${evaluation.complexityAnalysis.explanation}`\n      : undefined,\n  };\n}\n\n/**\n * Quick syntax check (basic validation before full evaluation)\n */\nexport function quickSyntaxCheck(code: string, language: SupportedLanguage): {\n  valid: boolean;\n  errors: string[];\n} {\n  const errors: string[] = [];\n\n  if (!code.trim()) {\n    errors.push(\"Code is empty\");\n    return { valid: false, errors };\n  }\n\n  // Basic bracket matching\n  const brackets: Record<string, string> = { \"(\": \")\", \"[\": \"]\", \"{\": \"}\" };\n  const stack: string[] = [];\n\n  for (const char of code) {\n    if (char in brackets) {\n      stack.push(brackets[char]);\n    } else if (Object.values(brackets).includes(char)) {\n      if (stack.pop() !== char) {\n        errors.push(\"Unmatched brackets detected\");\n        break;\n      }\n    }\n  }\n\n  if (stack.length > 0 && errors.length === 0) {\n    errors.push(\"Unclosed brackets detected\");\n  }\n\n  // Language-specific checks\n  if (language === \"python\") {\n    // Check for common Python syntax issues\n    if (code.includes(\"def \") && !code.includes(\":\")) {\n      errors.push(\"Missing colon after function definition\");\n    }\n  } else if (language === \"java\" || language === \"csharp\" || language === \"cpp\" || language === \"c\") {\n    // Check for missing semicolons (rough heuristic)\n    const lines = code.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i].trim();\n      if (\n        line.length > 0 &&\n        !line.endsWith(\"{\") &&\n        !line.endsWith(\"}\") &&\n        !line.endsWith(\";\") &&\n        !line.endsWith(\",\") &&\n        !line.startsWith(\"//\") &&\n        !line.startsWith(\"/*\") &&\n        !line.startsWith(\"*\") &&\n        !line.startsWith(\"#\") &&\n        !line.includes(\"if\") &&\n        !line.includes(\"for\") &&\n        !line.includes(\"while\") &&\n        !line.includes(\"else\")\n      ) {\n        // This is a rough check, actual syntax validation is done by the AI\n      }\n    }\n  }\n\n  return { valid: errors.length === 0, errors };\n}\n","// Language-specific starter code templates\n\nimport { SupportedLanguage, ProblemCategory } from \"./constants\";\n\n/**\n * Get starter code template for a given language and problem type\n */\nexport function getStarterTemplate(\n  language: SupportedLanguage,\n  problemTitle: string,\n  category: ProblemCategory\n): string {\n  const templates: Record<SupportedLanguage, string> = {\n    python: getPythonTemplate(problemTitle, category),\n    javascript: getJavaScriptTemplate(problemTitle, category),\n    java: getJavaTemplate(problemTitle, category),\n    cpp: getCppTemplate(problemTitle, category),\n    c: getCTemplate(problemTitle, category),\n    csharp: getCSharpTemplate(problemTitle, category),\n    go: getGoTemplate(problemTitle, category),\n  };\n\n  return templates[language];\n}\n\nfunction getPythonTemplate(title: string, category: ProblemCategory): string {\n  const functionName = toSnakeCase(title);\n\n  const categoryTemplates: Partial<Record<ProblemCategory, string>> = {\n    \"linked-lists\": `# Definition for singly-linked list.\nclass ListNode:\n    def __init__(self, val=0, next=None):\n        self.val = val\n        self.next = next\n\nclass Solution:\n    def ${functionName}(self, head: ListNode) -> ListNode:\n        # Your code here\n        pass\n`,\n    \"trees\": `# Definition for a binary tree node.\nclass TreeNode:\n    def __init__(self, val=0, left=None, right=None):\n        self.val = val\n        self.left = left\n        self.right = right\n\nclass Solution:\n    def ${functionName}(self, root: TreeNode) -> any:\n        # Your code here\n        pass\n`,\n    \"graphs\": `from collections import defaultdict, deque\nfrom typing import List\n\nclass Solution:\n    def ${functionName}(self, n: int, edges: List[List[int]]) -> any:\n        # Build adjacency list\n        graph = defaultdict(list)\n        for u, v in edges:\n            graph[u].append(v)\n            graph[v].append(u)\n\n        # Your code here\n        pass\n`,\n  };\n\n  return categoryTemplates[category] || `from typing import List, Optional\n\nclass Solution:\n    def ${functionName}(self, nums: List[int]) -> any:\n        # Your code here\n        pass\n`;\n}\n\nfunction getJavaScriptTemplate(title: string, category: ProblemCategory): string {\n  const functionName = toCamelCase(title);\n\n  const categoryTemplates: Partial<Record<ProblemCategory, string>> = {\n    \"linked-lists\": `/**\n * Definition for singly-linked list.\n * function ListNode(val, next) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.next = (next===undefined ? null : next)\n * }\n */\n\n/**\n * @param {ListNode} head\n * @return {ListNode}\n */\nvar ${functionName} = function(head) {\n    // Your code here\n\n};\n`,\n    \"trees\": `/**\n * Definition for a binary tree node.\n * function TreeNode(val, left, right) {\n *     this.val = (val===undefined ? 0 : val)\n *     this.left = (left===undefined ? null : left)\n *     this.right = (right===undefined ? null : right)\n * }\n */\n\n/**\n * @param {TreeNode} root\n * @return {*}\n */\nvar ${functionName} = function(root) {\n    // Your code here\n\n};\n`,\n  };\n\n  return categoryTemplates[category] || `/**\n * @param {number[]} nums\n * @return {*}\n */\nvar ${functionName} = function(nums) {\n    // Your code here\n\n};\n`;\n}\n\nfunction getJavaTemplate(title: string, category: ProblemCategory): string {\n  const className = toPascalCase(title);\n  const methodName = toCamelCase(title);\n\n  const categoryTemplates: Partial<Record<ProblemCategory, string>> = {\n    \"linked-lists\": `/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode() {}\n *     ListNode(int val) { this.val = val; }\n *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n * }\n */\nclass Solution {\n    public ListNode ${methodName}(ListNode head) {\n        // Your code here\n        return null;\n    }\n}\n`,\n    \"trees\": `/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\nclass Solution {\n    public Object ${methodName}(TreeNode root) {\n        // Your code here\n        return null;\n    }\n}\n`,\n  };\n\n  return categoryTemplates[category] || `import java.util.*;\n\nclass Solution {\n    public int[] ${methodName}(int[] nums) {\n        // Your code here\n        return new int[0];\n    }\n}\n`;\n}\n\nfunction getCppTemplate(title: string, category: ProblemCategory): string {\n  const functionName = toCamelCase(title);\n\n  const categoryTemplates: Partial<Record<ProblemCategory, string>> = {\n    \"linked-lists\": `/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     ListNode *next;\n *     ListNode() : val(0), next(nullptr) {}\n *     ListNode(int x) : val(x), next(nullptr) {}\n *     ListNode(int x, ListNode *next) : val(x), next(next) {}\n * };\n */\nclass Solution {\npublic:\n    ListNode* ${functionName}(ListNode* head) {\n        // Your code here\n        return nullptr;\n    }\n};\n`,\n    \"trees\": `/**\n * Definition for a binary tree node.\n * struct TreeNode {\n *     int val;\n *     TreeNode *left;\n *     TreeNode *right;\n *     TreeNode() : val(0), left(nullptr), right(nullptr) {}\n *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}\n *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}\n * };\n */\nclass Solution {\npublic:\n    void ${functionName}(TreeNode* root) {\n        // Your code here\n    }\n};\n`,\n  };\n\n  return categoryTemplates[category] || `#include <vector>\n#include <unordered_map>\nusing namespace std;\n\nclass Solution {\npublic:\n    vector<int> ${functionName}(vector<int>& nums) {\n        // Your code here\n        return {};\n    }\n};\n`;\n}\n\nfunction getCTemplate(title: string, category: ProblemCategory): string {\n  const functionName = toSnakeCase(title);\n\n  return `#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n/**\n * Note: The returned array must be malloced, assume caller calls free().\n */\nint* ${functionName}(int* nums, int numsSize, int* returnSize) {\n    // Your code here\n    *returnSize = 0;\n    return NULL;\n}\n`;\n}\n\nfunction getCSharpTemplate(title: string, category: ProblemCategory): string {\n  const methodName = toPascalCase(title);\n\n  const categoryTemplates: Partial<Record<ProblemCategory, string>> = {\n    \"linked-lists\": `/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     public int val;\n *     public ListNode next;\n *     public ListNode(int val=0, ListNode next=null) {\n *         this.val = val;\n *         this.next = next;\n *     }\n * }\n */\npublic class Solution {\n    public ListNode ${methodName}(ListNode head) {\n        // Your code here\n        return null;\n    }\n}\n`,\n    \"trees\": `/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     public int val;\n *     public TreeNode left;\n *     public TreeNode right;\n *     public TreeNode(int val=0, TreeNode left=null, TreeNode right=null) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\npublic class Solution {\n    public object ${methodName}(TreeNode root) {\n        // Your code here\n        return null;\n    }\n}\n`,\n  };\n\n  return categoryTemplates[category] || `using System;\nusing System.Collections.Generic;\n\npublic class Solution {\n    public int[] ${methodName}(int[] nums) {\n        // Your code here\n        return new int[0];\n    }\n}\n`;\n}\n\nfunction getGoTemplate(title: string, category: ProblemCategory): string {\n  const functionName = toCamelCase(title);\n\n  const categoryTemplates: Partial<Record<ProblemCategory, string>> = {\n    \"linked-lists\": `/**\n * Definition for singly-linked list.\n * type ListNode struct {\n *     Val int\n *     Next *ListNode\n * }\n */\nfunc ${functionName}(head *ListNode) *ListNode {\n    // Your code here\n    return nil\n}\n`,\n    \"trees\": `/**\n * Definition for a binary tree node.\n * type TreeNode struct {\n *     Val int\n *     Left *TreeNode\n *     Right *TreeNode\n * }\n */\nfunc ${functionName}(root *TreeNode) interface{} {\n    // Your code here\n    return nil\n}\n`,\n  };\n\n  return categoryTemplates[category] || `func ${functionName}(nums []int) []int {\n    // Your code here\n    return nil\n}\n`;\n}\n\n// Helper functions to convert title to various case styles\nfunction toSnakeCase(str: string): string {\n  return str\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"_\")\n    .replace(/^_|_$/g, \"\");\n}\n\nfunction toCamelCase(str: string): string {\n  return str\n    .toLowerCase()\n    .replace(/[^a-z0-9]+(.)/g, (_, char) => char.toUpperCase())\n    .replace(/^./, (char) => char.toLowerCase())\n    .replace(/[^a-zA-Z0-9]/g, \"\");\n}\n\nfunction toPascalCase(str: string): string {\n  return str\n    .toLowerCase()\n    .replace(/[^a-z0-9]+(.)/g, (_, char) => char.toUpperCase())\n    .replace(/^./, (char) => char.toUpperCase())\n    .replace(/[^a-zA-Z0-9]/g, \"\");\n}\n\n/**\n * Generate all starter code templates for a problem\n */\nexport function getAllStarterTemplates(\n  problemTitle: string,\n  category: ProblemCategory\n): Record<SupportedLanguage, string> {\n  const languages: SupportedLanguage[] = [\n    \"python\",\n    \"javascript\",\n    \"java\",\n    \"cpp\",\n    \"c\",\n    \"csharp\",\n    \"go\",\n  ];\n\n  const templates: Record<string, string> = {};\n  for (const lang of languages) {\n    templates[lang] = getStarterTemplate(lang, problemTitle, category);\n  }\n\n  return templates as Record<SupportedLanguage, string>;\n}\n","// Coding Challenge Library - Main Exports\n\nexport * from \"./constants\";\nexport * from \"./problem-generator\";\nexport * from \"./code-evaluator\";\nexport * from \"./starter-templates\";\n"],"names":[],"mappings":"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"}