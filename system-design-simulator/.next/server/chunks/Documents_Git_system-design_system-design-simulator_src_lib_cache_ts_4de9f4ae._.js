module.exports=[52022,e=>{"use strict";var r=e.i(74227);async function t(e){if(!(0,r.isRedisAvailable)())return null;try{let t=(0,r.getRedisClient)();if(!t)return null;return await t.get(e)}catch(e){return console.error("Cache get error:",e),null}}async function a(e,t,n=r.CACHE_TTL.USER_ANALYTICS){if(!(0,r.isRedisAvailable)())return!1;try{let a=(0,r.getRedisClient)();if(!a)return!1;return await a.set(e,JSON.stringify(t),{ex:n}),!0}catch(e){return console.error("Cache set error:",e),!1}}async function n(e){if(!(0,r.isRedisAvailable)())return!1;try{let t=(0,r.getRedisClient)();if(!t)return!1;return await t.del(e),!0}catch(e){return console.error("Cache delete error:",e),!1}}async function i(e){if(!(0,r.isRedisAvailable)())return!1;try{let t=(0,r.getRedisClient)();if(!t)return!1;let a=0;do{let[r,n]=await t.scan(a,{match:e,count:100});a=parseInt(r,10),n.length>0&&await t.del(...n)}while(0!==a)return!0}catch(e){return console.error("Cache delete pattern error:",e),!1}}async function c(e,n,i=r.CACHE_TTL.USER_ANALYTICS){let l=await t(e);if(null!==l){if("string"==typeof l)try{return JSON.parse(l)}catch{}return l}let s=await n();return await a(e,s,i),s}async function l(e){await i(`analytics:user:${e}*`)}async function s(){await i("leaderboard:*")}e.s(["cacheDelete",()=>n,"cacheDeletePattern",()=>i,"cacheGet",()=>t,"cacheSet",()=>a,"getOrFetch",()=>c,"invalidateLeaderboard",()=>s,"invalidateUserAnalytics",()=>l])}];

//# sourceMappingURL=Documents_Git_system-design_system-design-simulator_src_lib_cache_ts_4de9f4ae._.js.map