(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94947,e=>{"use strict";var r=e.i(26969),s=e.i(42458),t=e.i(37212),a=e.i(1373),l=e.i(53727),i=e.i(68818),n=e.i(52494),o=e.i(44465),d=e.i(39431),c=e.i(58824),m=e.i(95595),h=e.i(66493),h=h,x=e.i(64847),u=e.i(31957);let p=(0,u.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var f=e.i(21816);let g=(0,u.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),b=(0,u.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),v=(0,u.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),j=(0,u.default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]),N=(0,u.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),y=(0,u.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var w=e.i(91765),w=w;let k=[{key:"requirementsClarification",label:"Requirements Clarification",weight:"10%",icon:b,phase:"Requirements Clarification"},{key:"highLevelDesign",label:"High-Level Design",weight:"20%",icon:v,phase:"High-Level Design"},{key:"detailedDesign",label:"Detailed Design",weight:"15%",icon:f.Target,phase:"Deep Dive"},{key:"scalability",label:"Scalability",weight:"20%",icon:p,phase:"Scalability & Trade-offs"},{key:"tradeoffs",label:"Tradeoffs Analysis",weight:"25%",icon:j,phase:"Scalability & Trade-offs"},{key:"communication",label:"Communication",weight:"10%",icon:g,phase:"all"}],S=e=>e>=3.5?"text-emerald-500":e>=2.5?"text-amber-500":e>=2?"text-orange-500":"text-red-500",C=e=>e>=3.5?"bg-emerald-500/10":e>=2.5?"bg-amber-500/10":e>=2?"bg-orange-500/10":"bg-red-500/10";function M(e){let s,t,a,l,i,n,o,c,m,h,x,u,p=(0,d.c)(26),{value:f,max:g}=e,b=2*Math.PI*70,v=b-f/(void 0===g?4:g)*100/100*b;p[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("circle",{cx:"88",cy:"88",r:70,stroke:"currentColor",strokeWidth:8,fill:"none",className:"text-muted/20"}),p[0]=s):s=p[0],p[1]!==v?(t=(0,r.jsx)("circle",{cx:"88",cy:"88",r:70,stroke:"url(#scoreGradient)",strokeWidth:8,fill:"none",strokeLinecap:"round",style:{strokeDasharray:b,strokeDashoffset:v,transition:"stroke-dashoffset 1s ease-in-out"}}),p[1]=v,p[2]=t):t=p[2];let j=f>=2.5?"#10b981":"#f59e0b";p[3]!==j?(a=(0,r.jsx)("stop",{offset:"0%",stopColor:j}),p[3]=j,p[4]=a):a=p[4];let N=f>=3.5?"#06b6d4":f>=2.5?"#10b981":"#ef4444";p[5]!==N?(l=(0,r.jsx)("stop",{offset:"100%",stopColor:N}),p[5]=N,p[6]=l):l=p[6],p[7]!==a||p[8]!==l?(i=(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"scoreGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a,l]})}),p[7]=a,p[8]=l,p[9]=i):i=p[9],p[10]!==t||p[11]!==i?(n=(0,r.jsxs)("svg",{className:"transform -rotate-90 w-44 h-44",children:[s,t,i]}),p[10]=t,p[11]=i,p[12]=n):n=p[12],p[13]!==f?(o=S(f),p[13]=f,p[14]=o):o=p[14];let y=`text-4xl font-bold ${o}`;return p[15]!==f?(c=f.toFixed(1),p[15]=f,p[16]=c):c=p[16],p[17]!==y||p[18]!==c?(m=(0,r.jsx)("span",{className:y,children:c}),p[17]=y,p[18]=c,p[19]=m):m=p[19],p[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"out of 4.0"}),p[20]=h):h=p[20],p[21]!==m?(x=(0,r.jsxs)("div",{className:"absolute flex flex-col items-center justify-center",children:[m,h]}),p[21]=m,p[22]=x):x=p[22],p[23]!==x||p[24]!==n?(u=(0,r.jsxs)("div",{className:"relative inline-flex items-center justify-center",children:[n,x]}),p[23]=x,p[24]=n,p[25]=u):u=p[25],u}function T(e){var s,t;let a,l,i,o,u,p,g,j,N,T,D,z,B,H,I,A,W,E,P,R,F,V,_,O,q,G,J,K,U,Y,Q=(0,d.c)(68),{score:X,completedPhases:Z}=e;Q[0]!==Z?(a=void 0===Z?[]:Z,Q[0]=Z,Q[1]=a):a=Q[1];let ee=a;Q[2]!==ee?(l=e=>"all"===e||ee.includes(e),Q[2]=ee,Q[3]=l):l=Q[3];let er=l,es=`relative ${X.passStatus?"bg-gradient-to-br from-emerald-500/5 via-cyan-500/5 to-blue-500/5":"bg-gradient-to-br from-orange-500/5 via-red-500/5 to-pink-500/5"}`;Q[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-white/5"}),Q[4]=i):i=Q[4],Q[5]!==X.overallScore?(o=(0,r.jsx)(M,{value:X.overallScore}),Q[5]=X.overallScore,Q[6]=o):o=Q[6];let et=X.passStatus?"default":"destructive",ea=`px-4 py-1.5 text-sm font-semibold ${X.passStatus?"bg-emerald-500/90 hover:bg-emerald-500":"bg-red-500/90 hover:bg-red-500"}`;Q[7]!==X.passStatus?(u=X.passStatus?(0,r.jsx)(h.default,{className:"w-4 h-4 mr-1.5"}):(0,r.jsx)(x.XCircle,{className:"w-4 h-4 mr-1.5"}),Q[7]=X.passStatus,Q[8]=u):u=Q[8];let el=X.passStatus?"PASSED":"NEEDS IMPROVEMENT";Q[9]!==el||Q[10]!==et||Q[11]!==ea||Q[12]!==u?(p=(0,r.jsxs)(n.Badge,{variant:et,className:ea,children:[u,el]}),Q[9]=el,Q[10]=et,Q[11]=ea,Q[12]=u,Q[13]=p):p=Q[13],Q[14]!==X.overallScore?(g=S(X.overallScore),Q[14]=X.overallScore,Q[15]=g):g=Q[15];let ei=`text-xl font-semibold ${g}`;return Q[16]!==X.overallScore?(j=(s=X.overallScore)>=3.5?"Strong Hire":s>=2.5?"Hire":s>=2?"Lean No Hire":"No Hire",Q[16]=X.overallScore,Q[17]=j):j=Q[17],(Q[18]!==ei||Q[19]!==j?(N=(0,r.jsx)("h3",{className:ei,children:j}),Q[18]=ei,Q[19]=j,Q[20]=N):N=Q[20],Q[21]!==X.overallScore)?(T=(t=X.overallScore)>=3.5?"Exceptional performance across all dimensions":t>=2.5?"Solid performance with room for growth":t>=2?"Some gaps that need addressing":"Significant areas need improvement",Q[21]=X.overallScore,Q[22]=T):T=Q[22],Q[23]!==T?(D=(0,r.jsx)("p",{className:"text-sm text-muted-foreground max-w-md",children:T}),Q[23]=T,Q[24]=D):D=Q[24],Q[25]!==p||Q[26]!==N||Q[27]!==D?(z=(0,r.jsxs)("div",{className:"space-y-2",children:[p,N,D]}),Q[25]=p,Q[26]=N,Q[27]=D,Q[28]=z):z=Q[28],Q[29]!==z||Q[30]!==o?(B=(0,r.jsx)(c.CardContent,{className:"py-6",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[o,z]})})}),Q[29]=z,Q[30]=o,Q[31]=B):B=Q[31],Q[32]!==B||Q[33]!==es?(H=(0,r.jsx)(c.Card,{className:"overflow-hidden border-0 shadow-lg",children:(0,r.jsxs)("div",{className:es,children:[i,B]})}),Q[32]=B,Q[33]=es,Q[34]=H):H=Q[34],Q[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,r.jsx)(c.CardHeader,{className:"pb-4 border-b border-primary/10",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-primary/20 ring-2 ring-primary/30",children:(0,r.jsx)(v,{className:"w-5 h-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.CardTitle,{className:"text-lg text-primary",children:"Detailed Analysis"}),(0,r.jsx)(c.CardDescription,{children:"In-depth feedback for each evaluation dimension"})]})]})}),Q[35]=I):I=Q[35],Q[36]!==X||Q[37]!==er?(A=k.map((e,s)=>{let t=X[e.key],a=e.icon,l=er(e.phase);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:`flex items-start gap-4 p-4 rounded-xl border transition-colors ${l?"bg-background/80 border-border/50 hover:border-primary/30":"bg-muted/30 border-muted/50 opacity-60"}`,children:[(0,r.jsx)("div",{className:`p-2.5 rounded-lg shrink-0 ${C(t)} ring-1 ring-inset ${t>=2.5?"ring-emerald-500/20":"ring-red-500/20"}`,children:(0,r.jsx)(a,{className:`w-5 h-5 ${S(t)}`})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.label}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Weight: ",e.weight]})]}),!l&&(0,r.jsx)(n.Badge,{variant:"outline",className:"text-xs bg-muted/50 text-muted-foreground border-muted-foreground/30",children:"Not Reached"})]}),(0,r.jsxs)(n.Badge,{variant:"outline",className:`${S(t)} border-current`,children:[t.toFixed(1),"/4.0"]})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:X.feedback[e.key]})]})]}),s<k.length-1&&(0,r.jsx)(m.Separator,{className:"my-4 bg-primary/10"})]},e.key)}),Q[36]=X,Q[37]=er,Q[38]=A):A=Q[38],Q[39]!==A?(W=(0,r.jsxs)(c.Card,{className:"border-2 border-primary/30 shadow-lg bg-gradient-to-br from-primary/5 to-violet-500/5",children:[I,(0,r.jsx)(c.CardContent,{className:"pt-4",children:(0,r.jsx)("div",{className:"space-y-4",children:A})})]}),Q[39]=A,Q[40]=W):W=Q[40],Q[41]===Symbol.for("react.memo_cache_sentinel")?(E=(0,r.jsx)(c.CardHeader,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,r.jsx)(f.Target,{className:"w-5 h-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.CardTitle,{className:"text-lg",children:"Score Breakdown"}),(0,r.jsx)(c.CardDescription,{children:"Evaluated against FAANG interview standards"})]})]})}),Q[41]=E):E=Q[41],Q[42]!==X?(P=k.map(e=>{let s=X[e.key],t=e.icon;return(0,r.jsxs)("div",{className:`p-3 rounded-xl border transition-all hover:shadow-md ${C(s)}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t,{className:`w-4 h-4 ${S(s)}`}),(0,r.jsx)("span",{className:"font-medium text-xs truncate",children:e.label})]}),(0,r.jsx)("div",{className:`text-sm font-bold ${S(s)}`,children:s.toFixed(1)})]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"h-1.5 w-full bg-muted/30 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:`h-full rounded-full transition-all duration-700 ${s>=3.5?"bg-emerald-500":s>=2.5?"bg-amber-500":s>=2?"bg-orange-500":"bg-red-500"}`,style:{width:`${s/4*100}%`}})})})]},e.key)}),Q[42]=X,Q[43]=P):P=Q[43],Q[44]!==P?(R=(0,r.jsxs)(c.Card,{className:"border shadow-sm",children:[E,(0,r.jsx)(c.CardContent,{children:(0,r.jsx)("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-3",children:P})})]}),Q[44]=P,Q[45]=R):R=Q[45],Q[46]===Symbol.for("react.memo_cache_sentinel")?(F=(0,r.jsx)(c.CardHeader,{className:"pb-2 pt-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-lg bg-emerald-500/10",children:(0,r.jsx)(y,{className:"w-4 h-4 text-emerald-500"})}),(0,r.jsx)(c.CardTitle,{className:"text-base text-emerald-600 dark:text-emerald-400",children:"Strengths"})]})}),Q[46]=F):F=Q[46],Q[47]!==X.feedback.strengths?(V=X.feedback.strengths.map($),Q[47]=X.feedback.strengths,Q[48]=V):V=Q[48],Q[49]!==V?(_=(0,r.jsxs)(c.Card,{className:"border shadow-sm border-emerald-500/20",children:[F,(0,r.jsx)(c.CardContent,{className:"pt-2",children:(0,r.jsx)("ul",{className:"space-y-2",children:V})})]}),Q[49]=V,Q[50]=_):_=Q[50],Q[51]===Symbol.for("react.memo_cache_sentinel")?(O=(0,r.jsx)(c.CardHeader,{className:"pb-2 pt-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-lg bg-amber-500/10",children:(0,r.jsx)(w.default,{className:"w-4 h-4 text-amber-500"})}),(0,r.jsx)(c.CardTitle,{className:"text-base text-amber-600 dark:text-amber-400",children:"Areas to Improve"})]})}),Q[51]=O):O=Q[51],Q[52]!==X.feedback.improvements?(q=X.feedback.improvements.map(L),Q[52]=X.feedback.improvements,Q[53]=q):q=Q[53],Q[54]!==q?(G=(0,r.jsxs)(c.Card,{className:"border shadow-sm border-amber-500/20",children:[O,(0,r.jsx)(c.CardContent,{className:"pt-2",children:(0,r.jsx)("ul",{className:"space-y-2",children:q})})]}),Q[54]=q,Q[55]=G):G=Q[55],Q[56]!==_||Q[57]!==G?(J=(0,r.jsxs)("div",{className:"grid gap-4 grid-cols-2",children:[_,G]}),Q[56]=_,Q[57]=G,Q[58]=J):J=Q[58],Q[59]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)(c.CardHeader,{className:"pb-2 pt-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-lg bg-blue-500/10",children:(0,r.jsx)(b,{className:"w-4 h-4 text-blue-500"})}),(0,r.jsx)(c.CardTitle,{className:"text-base",children:"Overall Assessment"})]})}),Q[59]=K):K=Q[59],Q[60]!==X.feedback.overallFeedback?(U=(0,r.jsxs)(c.Card,{className:"border shadow-sm",children:[K,(0,r.jsx)(c.CardContent,{className:"pt-2",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:X.feedback.overallFeedback})})]}),Q[60]=X.feedback.overallFeedback,Q[61]=U):U=Q[61],Q[62]!==H||Q[63]!==W||Q[64]!==R||Q[65]!==J||Q[66]!==U?(Y=(0,r.jsxs)("div",{className:"space-y-6",children:[H,W,R,J,U]}),Q[62]=H,Q[63]=W,Q[64]=R,Q[65]=J,Q[66]=U,Q[67]=Y):Y=Q[67],Y}function L(e,s){return(0,r.jsxs)("li",{className:"flex items-start gap-2 p-2 rounded-lg bg-amber-500/5 border border-amber-500/10",children:[(0,r.jsx)(N,{className:"w-4 h-4 text-amber-500 mt-0.5 shrink-0"}),(0,r.jsx)("span",{className:"text-xs leading-relaxed",children:e})]},s)}function $(e,s){return(0,r.jsxs)("li",{className:"flex items-start gap-2 p-2 rounded-lg bg-emerald-500/5 border border-emerald-500/10",children:[(0,r.jsx)(h.default,{className:"w-4 h-4 text-emerald-500 mt-0.5 shrink-0"}),(0,r.jsx)("span",{className:"text-xs leading-relaxed",children:e})]},s)}var D=e.i(89352);let z=[{id:"requirements",name:"Requirements",duration:8,startTime:45,endTime:37,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-500",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",tips:["Ask about scale (DAU, QPS)","Clarify functional requirements","Identify non-functional needs"]},{id:"high-level",name:"High-Level Design",duration:12,startTime:37,endTime:25,color:"from-green-500 to-emerald-600",bgColor:"bg-green-500",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",tips:["Draw core components","Define APIs","Explain data flow"]},{id:"deep-dive",name:"Deep Dive",duration:12,startTime:25,endTime:13,color:"from-purple-500 to-violet-600",bgColor:"bg-purple-500",icon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",tips:["Data models & schemas","Algorithms & protocols","Handle failure scenarios"]},{id:"scalability",name:"Scalability",duration:10,startTime:13,endTime:3,color:"from-orange-500 to-amber-600",bgColor:"bg-orange-500",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",tips:["10x-100x growth","Caching strategies","Trade-offs & CAP theorem"]},{id:"wrapup",name:"Wrap-up",duration:3,startTime:3,endTime:0,color:"from-gray-500 to-slate-600",bgColor:"bg-gray-500",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",tips:["Summarize design","Address concerns","Ask questions"]}];function B({interview:e,initialMessages:d,completedPhases:c=[],score:m}){let h,x,u=(0,t.useRouter)(),[p,f]=(0,s.useState)(d),[g,b]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[N,y]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(m),M=(0,s.useRef)(null),L=(0,s.useRef)(p),$=(0,s.useRef)(!1);(0,s.useEffect)(()=>{L.current=p},[p]);let B=(()=>{if(e.startedAt&&"completed"!==e.status){let r=new Date(e.startedAt).getTime(),s=2700-Math.floor((Date.now()-r)/1e3);return s>0?s:0}return 2700})(),[H,I]=(0,s.useState)(B),[A,W]=(0,s.useState)(()=>{let e=Math.floor(B/60),r=z.findIndex(r=>e<r.startTime&&e>=r.endTime);return -1!==r?r:0}),[E,P]=(0,s.useState)([]),[R,F]=(0,s.useState)(!1),[V,_]=(0,s.useState)(0),[O,q]=(0,s.useState)(null),[G,J]=(0,s.useState)(!0),[K,U]=(0,s.useState)(!1),[Y,Q]=(0,s.useState)(""),[X,Z]=(0,s.useState)("voice"),[ee,er]=(0,s.useState)(!1),es=(0,s.useRef)(null),et="completed"===e.status||null!==S,ea=z[A];(0,s.useEffect)(()=>{er(!!(window.SpeechRecognition||window.webkitSpeechRecognition))},[]),(0,s.useEffect)(()=>{if(!ee)return;let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return;let r=new e;return r.continuous=!0,r.interimResults=!0,r.lang="en-US",r.onresult=e=>{let r="",s="";for(let t=e.resultIndex;t<e.results.length;t++){let a=e.results[t][0].transcript;e.results[t].isFinal?s+=a:r+=a}s?(b(e=>e+s),Q("")):Q(r)},r.onerror=e=>{"no-speech"!==e.error&&"aborted"!==e.error&&(console.error("Speech recognition error:",e.error),"not-allowed"===e.error?(D.toast.error("Microphone access denied. Please allow microphone access."),Z("keyboard")):"network"===e.error?D.toast.error("Voice recognition network error. Please check your internet connection."):D.toast.error(`Voice error: ${e.error}`),U(!1))},r.onend=()=>{if(K)try{r.start()}catch{}},es.current=r,()=>{r.stop()}},[ee,K]),(0,s.useEffect)(()=>{if(et)return;let e=setInterval(()=>{I(r=>{if(r<=0)return clearInterval(e),0;let s=r-1,t=Math.floor(s/60);30===t&&s%60==0?(q("30 minutes remaining"),setTimeout(()=>q(null),3e3)):15===t&&s%60==0?(q("15 minutes - Move to scalability!"),setTimeout(()=>q(null),4e3)):5===t&&s%60==0?(q("5 minutes - Start wrapping up!"),setTimeout(()=>q(null),4e3)):1===t&&s%60==0&&(q("1 minute remaining!"),setTimeout(()=>q(null),3e3));let a=z.findIndex(e=>t<e.startTime&&t>=e.endTime);return -1===a||a===A||$.current||($.current=!0,en(a).finally(()=>{$.current=!1})),s})},1e3);return()=>clearInterval(e)},[et,A]),(0,s.useEffect)(()=>{!(H<=0)||et||N||(D.toast.info("Time's up! Submitting interview..."),ec())},[H,et,N]);let el=(0,s.useCallback)(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},[]);(0,s.useEffect)(()=>{let e=setTimeout(el,50);return()=>clearTimeout(e)},[p,el]),(0,s.useEffect)(()=>{if(v){let e=setInterval(el,100);return()=>clearInterval(e)}},[v,el]);let ei=e=>{let r=Math.floor(e/60);return`${r.toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`},en=async r=>{let s=L.current;if(s.length>V+1){F(!0);let r=s.slice(V);try{let s=await fetch(`/api/interview/${e.id}/analyze-phase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phaseId:ea.id,phaseMessages:r.map(e=>({role:e.role,content:e.content}))})});if(s.ok){let e=await s.json();P(r=>[...r,e.analysis]),D.toast.success(`${ea.name} phase analyzed`)}}catch(e){console.error("Phase analysis error:",e)}finally{F(!1)}}W(r),_(s.length),D.toast.info(`Moving to ${z[r].name} phase`),j(!0);try{let s=await fetch(`/api/interview/${e.id}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phaseContext:z[r].name})});if(!s.ok)throw Error("Failed to get phase transition message");let t=s.body?.getReader();if(!t)throw Error("No reader available");let a={id:(Date.now()+1).toString(),role:"assistant",content:"",timestamp:new Date().toISOString()};f(e=>[...e,a]);let l=new TextDecoder,i="";for(;;){let{done:e,value:r}=await t.read();if(e)break;for(let e of l.decode(r).split("\n"))if(e.startsWith("data: "))try{let r=JSON.parse(e.slice(6));r.content&&(i+=r.content,f(e=>{let r=[...e],s=r[r.length-1];return"assistant"===s.role&&(s.content=i),r}))}catch{}}}catch(e){console.error("Failed to generate phase transition:",e)}finally{j(!1)}},eo=(0,s.useCallback)(()=>{if(es.current)if(K)es.current.stop(),U(!1);else try{es.current.start(),U(!0)}catch(e){console.error("Failed to start recognition:",e),D.toast.error("Failed to start voice recognition")}},[K]),ed=async r=>{r?.preventDefault();let s=g.trim();if(!s||v||et||H<=0)return;K&&es.current&&(es.current.stop(),U(!1));let t={id:Date.now().toString(),role:"user",content:s,timestamp:new Date().toISOString()};f(e=>[...e,t]),b(""),Q(""),j(!0);try{let r=await fetch(`/api/interview/${e.id}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t.content,currentPhase:ea.id})});if(!r.ok)throw Error("Failed to send message");let s=r.body?.getReader();if(!s)throw Error("No reader available");let a={id:(Date.now()+1).toString(),role:"assistant",content:"",timestamp:new Date().toISOString()};f(e=>[...e,a]);let l=new TextDecoder,i="";for(;;){let{done:e,value:r}=await s.read();if(e)break;for(let e of l.decode(r).split("\n"))if(e.startsWith("data: "))try{let r=JSON.parse(e.slice(6));r.content&&(i+=r.content,f(e=>{let r=[...e],s=r[r.length-1];return"assistant"===s.role&&(s.content=i),r}))}catch{}}let n=i.match(/\[PHASE_TRANSITION:\s*(\w+-?\w*)\]/);if(n){let e=n[1],r=z.findIndex(r=>r.id===e);-1!==r&&r>A&&setTimeout(()=>en(r),1e3),f(e=>{let r=[...e],s=r[r.length-1];return"assistant"===s.role&&(s.content=s.content.replace(/\[PHASE_TRANSITION:\s*\w+-?\w*\]/g,"").trim()),r})}}catch{D.toast.error("Failed to send message. Please try again."),f(e=>e.slice(0,-1))}finally{j(!1)}},ec=async()=>{y(!0);try{let r=await fetch(`/api/interview/${e.id}/end`,{method:"POST"});if(!r.ok)throw Error("Failed to end interview");let s=await r.json();C(s.score),k(!1),D.toast.success("Interview completed!"),u.refresh()}catch{D.toast.error("Failed to end interview.")}finally{y(!1)}},em=2*Math.PI*40,eh=H/2700*em;return(0,r.jsxs)("div",{className:"h-screen flex flex-col bg-gradient-to-br from-background via-background to-primary/5",children:[(0,r.jsxs)("header",{className:"border-b border-border/50 backdrop-blur-sm bg-background/80 px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(a.default,{href:"/dashboard",children:(0,r.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Exit"]})}),(0,r.jsx)("div",{className:"h-8 w-px bg-border"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-semibold text-lg",children:e.topic}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:e.difficulty}),!et&&(0,r.jsx)(n.Badge,{className:`${ea.bgColor} text-white text-xs`,children:ea.name})]})]})]}),!et&&(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"w-20 h-20 -rotate-90",children:[(0,r.jsx)("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-muted/20"}),(0,r.jsx)("circle",{cx:"40",cy:"40",r:"36",fill:"none",strokeWidth:"4",strokeDasharray:em,strokeDashoffset:em-eh,strokeLinecap:"round",className:`${(h=H/60)<=5?"stroke-red-500":h<=15?"stroke-yellow-500":"stroke-primary"} transition-all duration-1000`})]}),(0,r.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,r.jsx)("span",{className:`font-mono text-xl font-bold ${(x=H/60)<=5?"text-red-400":x<=15?"text-yellow-400":"text-primary"}`,children:ei(H)})})]}),(0,r.jsxs)(l.Button,{variant:"destructive",onClick:()=>k(!0),className:"gap-2",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"End Interview"]})]})]}),!et&&(0,r.jsx)("div",{className:"mt-4 flex gap-2",children:z.map((e,s)=>(0,r.jsxs)("div",{className:`flex-1 relative overflow-hidden rounded-lg transition-all duration-300 ${s===A?`bg-gradient-to-r ${e.color} shadow-lg shadow-primary/20`:s<A?"bg-muted/50":"bg-muted/20"}`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2",children:[(0,r.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 ${s===A?"text-white":"text-muted-foreground"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),(0,r.jsx)("span",{className:`text-xs font-medium truncate ${s===A?"text-white":"text-muted-foreground"} ${s<A?"line-through":""}`,children:e.name}),s<A&&(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),s===A&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 h-1 bg-white/30",style:{width:`${(60*ea.startTime-H)/(60*ea.duration)*100}%`,transition:"width 1s linear"}})]},e.id))})]}),O&&(0,r.jsx)("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-50 animate-bounce",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{className:"font-medium",children:O})]})}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:`flex flex-col min-h-0 ${et&&S?"w-2/5 border-r border-border/50":"flex-1"}`,children:[et&&S&&(0,r.jsx)("div",{className:"px-6 py-3 border-b border-border/50 bg-muted/30",children:(0,r.jsxs)("h2",{className:"font-semibold text-sm text-muted-foreground flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"Interview Transcript"]})}),(0,r.jsx)("div",{ref:M,className:"flex-1 min-h-0 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:`space-y-4 ${et&&S?"max-w-none":"max-w-3xl mx-auto"}`,children:[p.map((e,s)=>(0,r.jsxs)("div",{className:`flex gap-3 animate-in fade-in-0 slide-in-from-bottom-2 ${"user"===e.role?"flex-row-reverse":""}`,style:{animationDelay:`${50*s}ms`},children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${"user"===e.role?"bg-primary text-primary-foreground":"bg-gradient-to-br from-violet-500 to-purple-600 text-white"}`,children:"user"===e.role?(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):(0,r.jsx)("span",{className:"text-sm font-bold",children:"B"})}),(0,r.jsx)("span",{className:`text-xs font-medium ${"user"===e.role?"text-muted-foreground":"text-violet-400"}`,children:"user"===e.role?"You":"Bobby"})]}),(0,r.jsxs)("div",{className:`flex-1 max-w-[80%] ${"user"===e.role?"flex flex-col items-end":""}`,children:[(0,r.jsx)("div",{className:`rounded-2xl px-4 py-3 ${"user"===e.role?"bg-primary text-primary-foreground rounded-tr-sm":"bg-card border border-border rounded-tl-sm"}`,children:(0,r.jsx)("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.content})}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground mt-1 px-2",suppressHydrationWarning:!0,children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},e.id)),v&&(0,r.jsxs)("div",{className:"flex gap-3 animate-in fade-in-0",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-bold text-white",children:"B"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-violet-400",children:"Bobby"})]}),(0,r.jsx)("div",{className:"bg-card border border-border rounded-2xl rounded-tl-sm px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-1.5",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce"}),(0,r.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"Bobby is typing..."})]})})]}),(0,r.jsx)("div",{className:"h-4"})]})}),!et&&(0,r.jsx)("div",{className:"border-t border-border/50 bg-background/80 backdrop-blur-sm p-4",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[K&&Y&&(0,r.jsxs)("div",{className:"mb-3 p-3 bg-primary/5 border border-primary/20 rounded-xl animate-pulse",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("div",{className:"flex gap-0.5",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"w-1 bg-primary rounded-full animate-pulse",style:{height:`${16*Math.random()+8}px`,animationDelay:`${.1*s}s`}},s))}),(0,r.jsx)("span",{className:"text-xs text-primary font-medium",children:"Listening..."})]}),(0,r.jsx)("p",{className:"text-foreground",children:Y})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:ee&&(0,r.jsxs)("div",{className:"flex items-center bg-muted rounded-full p-1",children:[(0,r.jsxs)("button",{onClick:()=>{Z("voice"),K||eo()},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${"voice"===X?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),"Voice"]}),(0,r.jsxs)("button",{onClick:()=>{Z("keyboard"),K&&es.current&&(es.current.stop(),U(!1))},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${"keyboard"===X?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Type"]})]})}),(0,r.jsxs)("button",{onClick:()=>J(!G),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),G?"Hide tips":"Show tips"]})]}),G&&!et&&(0,r.jsxs)("div",{className:"mb-3 p-3 bg-muted/50 rounded-xl border border-border/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:`w-2 h-2 rounded-full ${ea.bgColor}`}),(0,r.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Focus on:"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:ea.tips.map((e,s)=>(0,r.jsx)("span",{className:"text-xs bg-background px-2 py-1 rounded-md border border-border/50",children:e},s))})]}),(0,r.jsx)("form",{onSubmit:ed,children:(0,r.jsxs)("div",{className:"flex gap-3 items-end",children:[ee&&(0,r.jsx)("button",{type:"button",onClick:eo,disabled:v,className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center transition-all shadow-lg ${K?"bg-red-500 hover:bg-red-600 text-white scale-110":"bg-primary hover:bg-primary/90 text-primary-foreground"} disabled:opacity-50 disabled:scale-100`,children:K?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),(0,r.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full animate-ping"})]}):(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),(0,r.jsx)("div",{className:"flex-1 relative",children:(0,r.jsx)(i.Textarea,{value:g,onChange:e=>b(e.target.value),placeholder:"voice"===X?"Speak or type your response...":"Type your response...",className:"resize-none rounded-xl pr-4 min-h-[48px] max-h-32 bg-muted/50 border-border/50 focus:border-primary/50",rows:1,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ed(e))},disabled:v})}),(0,r.jsx)(l.Button,{type:"submit",disabled:v||!g.trim(),size:"icon",className:"flex-shrink-0 w-12 h-12 rounded-full shadow-lg",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})})]}),E.length>0&&!et&&(0,r.jsx)("div",{className:"w-80 border-l border-border/50 bg-background/50 backdrop-blur-sm overflow-auto p-4",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Live Scores"]}),(0,r.jsx)("div",{className:"space-y-3",children:E.map((e,s)=>(0,r.jsxs)("div",{className:"p-3 bg-card rounded-xl border border-border/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium capitalize",children:e.phase.replace("-"," ")}),(0,r.jsxs)("div",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${e.score>=3?"bg-green-500/20 text-green-400":e.score>=2?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[e.score,"/4"]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.summary})]},`${e.phase}-${s}`))})]})}),et&&S&&(0,r.jsxs)("div",{className:"w-3/5 flex flex-col bg-gradient-to-br from-primary/5 via-background to-violet-500/5 h-full min-h-0",children:[(0,r.jsx)("div",{className:"flex-shrink-0 px-6 py-4 border-b border-primary/20 bg-primary/5 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-primary/10 ring-2 ring-primary/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-bold text-lg text-primary",children:"Interview Analysis"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Performance evaluation & feedback"})]})]})}),(0,r.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-6",children:(0,r.jsx)(T,{score:S,completedPhases:c})})]})]}),(0,r.jsx)(o.Dialog,{open:w,onOpenChange:k,children:(0,r.jsxs)(o.DialogContent,{className:"sm:max-w-md",children:[(0,r.jsxs)(o.DialogHeader,{children:[(0,r.jsxs)(o.DialogTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"End Interview?"]}),(0,r.jsxs)(o.DialogDescription,{className:"text-left",children:[H>0&&(0,r.jsxs)("span",{className:"block mb-2",children:["You have ",(0,r.jsx)("strong",{children:ei(H)})," remaining."]}),"The AI will evaluate your entire interview and provide detailed feedback on all dimensions."]})]}),(0,r.jsxs)(o.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,r.jsx)(l.Button,{variant:"outline",onClick:()=>k(!1),children:"Continue"}),(0,r.jsx)(l.Button,{onClick:ec,disabled:N,className:"gap-2",children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Evaluating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Get Results"]})})]})]})})]})}e.s(["InterviewChat",()=>B],94947)}]);