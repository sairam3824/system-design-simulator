module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/node:path [external] (node:path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:path", () => require("node:path"));

module.exports = mod;
}),
"[externals]/node:url [external] (node:url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:url", () => require("node:url"));

module.exports = mod;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/class.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getPrismaClientClass",
    ()=>getPrismaClientClass
]);
/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
 * WARNING: This is an internal file that is subject to change!
 *
 * ðŸ›‘ Under no circumstances should you import this file directly! ðŸ›‘
 *
 * Please import the `PrismaClient` class from the `client.ts` file instead.
 */ var __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__ = __turbopack_context__.i("[externals]/@prisma/client/runtime/client [external] (@prisma/client/runtime/client, cjs, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client)");
;
const config = {
    "previewFeatures": [],
    "clientVersion": "7.3.0",
    "engineVersion": "9d6ad21cbbceab97458517b147a6a09ff43aa735",
    "activeProvider": "sqlite",
    "inlineSchema": "// Prisma schema for AI System Design Simulator\ngenerator client {\n  provider = \"prisma-client\"\n  output   = \"../src/generated/prisma\"\n}\n\ndatasource db {\n  provider = \"sqlite\"\n}\n\nmodel User {\n  id        String   @id @default(cuid())\n  email     String   @unique\n  password  String\n  name      String?\n  avatar    String?\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  profile          Profile?\n  resumes          Resume[]\n  interviews       Interview[]\n  analytics        UserAnalytics?\n  codingChallenges CodingChallenge[]\n  codingTests      CodingTest[]\n}\n\nmodel Profile {\n  id     String @id @default(cuid())\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  bio             String?\n  yearsExperience Int?\n  skills          String  @default(\"[]\") // JSON array stored as string\n  targetCompanies String  @default(\"[]\") // JSON array stored as string\n  targetRole      String?\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n\nmodel Resume {\n  id     String @id @default(cuid())\n  userId String\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  fileName String\n  content  String // Full text content of resume\n  analysis String? // JSON object with AI analysis\n  filePath String? // Local path to the stored resume file\n\n  // ATS Score Data\n  atsScore       Int? // Total ATS score (0-100)\n  atsBreakdown   String? // JSON: { contactInfo, structure, experience, keywords, impact }\n  atsFeedback    String? // JSON array of feedback strings\n  keywords       String? // JSON array of extracted keywords\n  softSkills     String? // JSON array of soft skills\n  predictedRoles String? // JSON array of predicted job roles\n\n  uploadedAt DateTime @default(now())\n  updatedAt  DateTime @updatedAt\n}\n\nmodel Interview {\n  id     String @id @default(cuid())\n  userId String\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  topic      String // e.g., \"Design Twitter\", \"Design Uber\"\n  difficulty String @default(\"medium\") // easy, medium, hard\n  status     String @default(\"pending\") // pending, in_progress, completed\n\n  startedAt DateTime?\n  endedAt   DateTime?\n  createdAt DateTime  @default(now())\n\n  // Time tracking for phases\n  phaseDurations   String? // JSON: { requirements: 480, highLevel: 720 } in seconds\n  phaseTransitions String? // JSON: [{ phase: \"requirements\", startedAt: ISO, endedAt: ISO }]\n\n  messages Message[]\n  score    Score?\n\n  @@index([userId, status, endedAt])\n}\n\nmodel Message {\n  id          String    @id @default(cuid())\n  interviewId String\n  interview   Interview @relation(fields: [interviewId], references: [id], onDelete: Cascade)\n\n  role    String // user, assistant, system\n  content String\n\n  timestamp DateTime @default(now())\n}\n\nmodel Score {\n  id          String    @id @default(cuid())\n  interviewId String    @unique\n  interview   Interview @relation(fields: [interviewId], references: [id], onDelete: Cascade)\n\n  // 6 Industry-Standard FAANG Evaluation Dimensions (1-4 scale)\n  requirementsClarification Int @default(0)\n  highLevelDesign           Int @default(0)\n  detailedDesign            Int @default(0)\n  scalability               Int @default(0)\n  tradeoffs                 Int @default(0)\n  communication             Int @default(0)\n\n  // Calculated fields\n  overallScore Float   @default(0) // Weighted average\n  passStatus   Boolean @default(false)\n\n  // Detailed feedback as JSON\n  feedback String @default(\"{}\") // JSON with per-dimension comments\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n\n// Cached analytics for user performance tracking\nmodel UserAnalytics {\n  id     String @id @default(cuid())\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  // Cached aggregates (updated after each interview)\n  totalInterviews     Int    @default(0)\n  completedInterviews Int    @default(0)\n  avgOverallScore     Float?\n  passRate            Float?\n\n  // Weak/strong areas tracking\n  weakDimensions   String @default(\"[]\") // JSON array: [\"scalability\", \"tradeoffs\"]\n  strongDimensions String @default(\"[]\") // JSON array: [\"communication\", \"requirements\"]\n\n  // Topic performance\n  topicStats String @default(\"{}\") // JSON: { \"Design Twitter\": { count: 5, avgScore: 2.8 } }\n\n  // Trend data\n  scoreTrend       String   @default(\"stable\") // \"improving\" | \"stable\" | \"declining\"\n  lastCalculatedAt DateTime @default(now())\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n\n// ==================== CODING CHALLENGE MODELS ====================\n\n// Predefined problem bank\nmodel CodingProblem {\n  id                 String            @id @default(cuid())\n  title              String\n  description        String\n  difficulty         String // easy, medium, hard\n  category           String // arrays, strings, dp, graphs, trees, etc.\n  companies          String            @default(\"[]\") // JSON array of company names\n  constraints        String            @default(\"[]\") // JSON array\n  examples           String            @default(\"[]\") // JSON [{input, output, explanation}]\n  testCases          String            @default(\"[]\") // JSON [{input, expectedOutput, isHidden}]\n  solutionApproaches String            @default(\"[]\") // JSON array\n  starterCode        String            @default(\"{}\") // JSON {python: \"...\", java: \"...\"}\n  timeLimit          Int               @default(45) // minutes\n  createdAt          DateTime          @default(now())\n  updatedAt          DateTime          @updatedAt\n  challenges         CodingChallenge[]\n\n  @@index([difficulty, category])\n}\n\n// User's coding challenge instance\nmodel CodingChallenge {\n  id           String                @id @default(cuid())\n  userId       String\n  user         User                  @relation(fields: [userId], references: [id], onDelete: Cascade)\n  problemId    String?\n  problem      CodingProblem?        @relation(fields: [problemId], references: [id])\n  testId       String?\n  test         CodingTest?           @relation(fields: [testId], references: [id], onDelete: Cascade)\n  title        String\n  description  String\n  difficulty   String\n  category     String\n  company      String?\n  language     String // python, java, javascript, cpp, c, csharp, go\n  visibleTests String                @default(\"[]\")\n  hiddenTests  String                @default(\"[]\")\n  timeLimit    Int                   @default(45)\n  status       String                @default(\"pending\") // pending, in_progress, completed\n  startedAt    DateTime?\n  endedAt      DateTime?\n  starterCode  String?\n  finalCode    String?\n  createdAt    DateTime              @default(now())\n  updatedAt    DateTime              @updatedAt\n  submissions  ChallengeSubmission[]\n  score        ChallengeScore?\n\n  @@index([userId, status])\n}\n\n// Code submission for evaluation\nmodel ChallengeSubmission {\n  id           String          @id @default(cuid())\n  challengeId  String\n  challenge    CodingChallenge @relation(fields: [challengeId], references: [id], onDelete: Cascade)\n  code         String\n  language     String\n  submittedAt  DateTime        @default(now())\n  evaluation   String?\n  testResults  String?\n  isValid      Boolean         @default(false)\n  errorMessage String?\n\n  @@index([challengeId])\n}\n\n// Final score for coding challenge\nmodel ChallengeScore {\n  id                 String          @id @default(cuid())\n  challengeId        String          @unique\n  challenge          CodingChallenge @relation(fields: [challengeId], references: [id], onDelete: Cascade)\n  correctness        Float\n  efficiency         Float\n  codeQuality        Float\n  edgeCases          Float\n  overallScore       Float\n  passStatus         Boolean\n  feedback           String\n  suggestedApproach  String?\n  complexityAnalysis String?\n  createdAt          DateTime        @default(now())\n}\n\n// ==================== CODING TEST MODELS ====================\n\nmodel CodingTest {\n  id         String            @id @default(cuid())\n  userId     String\n  user       User              @relation(fields: [userId], references: [id], onDelete: Cascade)\n  challenges CodingChallenge[]\n  status     String            @default(\"pending\") // pending, in_progress, completed\n  startedAt  DateTime?\n  endedAt    DateTime?\n  timeLimit  Int // Total minutes for all questions\n  createdAt  DateTime          @default(now())\n  updatedAt  DateTime          @updatedAt\n}\n",
    "runtimeDataModel": {
        "models": {},
        "enums": {},
        "types": {}
    }
};
config.runtimeDataModel = JSON.parse("{\"models\":{\"User\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"email\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"password\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"avatar\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"profile\",\"kind\":\"object\",\"type\":\"Profile\",\"relationName\":\"ProfileToUser\"},{\"name\":\"resumes\",\"kind\":\"object\",\"type\":\"Resume\",\"relationName\":\"ResumeToUser\"},{\"name\":\"interviews\",\"kind\":\"object\",\"type\":\"Interview\",\"relationName\":\"InterviewToUser\"},{\"name\":\"analytics\",\"kind\":\"object\",\"type\":\"UserAnalytics\",\"relationName\":\"UserToUserAnalytics\"},{\"name\":\"codingChallenges\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"CodingChallengeToUser\"},{\"name\":\"codingTests\",\"kind\":\"object\",\"type\":\"CodingTest\",\"relationName\":\"CodingTestToUser\"}],\"dbName\":null},\"Profile\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"ProfileToUser\"},{\"name\":\"bio\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"yearsExperience\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"skills\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"targetCompanies\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"targetRole\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Resume\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"ResumeToUser\"},{\"name\":\"fileName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"content\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"analysis\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"filePath\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"atsScore\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"atsBreakdown\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"atsFeedback\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"keywords\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"softSkills\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"predictedRoles\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"uploadedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Interview\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"InterviewToUser\"},{\"name\":\"topic\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"difficulty\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"status\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"phaseDurations\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"phaseTransitions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"messages\",\"kind\":\"object\",\"type\":\"Message\",\"relationName\":\"InterviewToMessage\"},{\"name\":\"score\",\"kind\":\"object\",\"type\":\"Score\",\"relationName\":\"InterviewToScore\"}],\"dbName\":null},\"Message\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interviewId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interview\",\"kind\":\"object\",\"type\":\"Interview\",\"relationName\":\"InterviewToMessage\"},{\"name\":\"role\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"content\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timestamp\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Score\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interviewId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interview\",\"kind\":\"object\",\"type\":\"Interview\",\"relationName\":\"InterviewToScore\"},{\"name\":\"requirementsClarification\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"highLevelDesign\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"detailedDesign\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"scalability\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"tradeoffs\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"communication\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"overallScore\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"passStatus\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"feedback\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"UserAnalytics\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserToUserAnalytics\"},{\"name\":\"totalInterviews\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"completedInterviews\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"avgOverallScore\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"passRate\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"weakDimensions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"strongDimensions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"topicStats\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"scoreTrend\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"lastCalculatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"CodingProblem\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"title\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"difficulty\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"category\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"companies\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"constraints\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"examples\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"testCases\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"solutionApproaches\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"starterCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timeLimit\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"challenges\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"CodingChallengeToCodingProblem\"}],\"dbName\":null},\"CodingChallenge\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"CodingChallengeToUser\"},{\"name\":\"problemId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"problem\",\"kind\":\"object\",\"type\":\"CodingProblem\",\"relationName\":\"CodingChallengeToCodingProblem\"},{\"name\":\"testId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"test\",\"kind\":\"object\",\"type\":\"CodingTest\",\"relationName\":\"CodingChallengeToCodingTest\"},{\"name\":\"title\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"difficulty\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"category\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"company\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"language\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"visibleTests\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"hiddenTests\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timeLimit\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"status\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"starterCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"finalCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"submissions\",\"kind\":\"object\",\"type\":\"ChallengeSubmission\",\"relationName\":\"ChallengeSubmissionToCodingChallenge\"},{\"name\":\"score\",\"kind\":\"object\",\"type\":\"ChallengeScore\",\"relationName\":\"ChallengeScoreToCodingChallenge\"}],\"dbName\":null},\"ChallengeSubmission\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challengeId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challenge\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"ChallengeSubmissionToCodingChallenge\"},{\"name\":\"code\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"language\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"submittedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"evaluation\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"testResults\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"isValid\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"errorMessage\",\"kind\":\"scalar\",\"type\":\"String\"}],\"dbName\":null},\"ChallengeScore\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challengeId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challenge\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"ChallengeScoreToCodingChallenge\"},{\"name\":\"correctness\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"efficiency\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"codeQuality\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"edgeCases\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"overallScore\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"passStatus\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"feedback\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"suggestedApproach\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"complexityAnalysis\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"CodingTest\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"CodingTestToUser\"},{\"name\":\"challenges\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"CodingChallengeToCodingTest\"},{\"name\":\"status\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"timeLimit\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null}},\"enums\":{},\"types\":{}}");
async function decodeBase64AsWasm(wasmBase64) {
    const { Buffer } = await __turbopack_context__.A("[externals]/node:buffer [external] (node:buffer, cjs, async loader)");
    const wasmArray = Buffer.from(wasmBase64, 'base64');
    return new WebAssembly.Module(wasmArray);
}
config.compilerWasm = {
    getRuntime: async ()=>await __turbopack_context__.A("[externals]/@prisma/client/runtime/query_compiler_fast_bg.sqlite.mjs [external] (@prisma/client/runtime/query_compiler_fast_bg.sqlite.mjs, esm_import, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client, async loader)"),
    getQueryCompilerWasmModule: async ()=>{
        const { wasm } = await __turbopack_context__.A("[externals]/@prisma/client/runtime/query_compiler_fast_bg.sqlite.wasm-base64.mjs [external] (@prisma/client/runtime/query_compiler_fast_bg.sqlite.wasm-base64.mjs, esm_import, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client, async loader)");
        return await decodeBase64AsWasm(wasm);
    },
    importName: "./query_compiler_fast_bg.js"
};
function getPrismaClientClass() {
    return __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["getPrismaClient"](config);
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/prismaNamespace.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AnyNull",
    ()=>AnyNull,
    "ChallengeScoreScalarFieldEnum",
    ()=>ChallengeScoreScalarFieldEnum,
    "ChallengeSubmissionScalarFieldEnum",
    ()=>ChallengeSubmissionScalarFieldEnum,
    "CodingChallengeScalarFieldEnum",
    ()=>CodingChallengeScalarFieldEnum,
    "CodingProblemScalarFieldEnum",
    ()=>CodingProblemScalarFieldEnum,
    "CodingTestScalarFieldEnum",
    ()=>CodingTestScalarFieldEnum,
    "DbNull",
    ()=>DbNull,
    "Decimal",
    ()=>Decimal,
    "InterviewScalarFieldEnum",
    ()=>InterviewScalarFieldEnum,
    "JsonNull",
    ()=>JsonNull,
    "MessageScalarFieldEnum",
    ()=>MessageScalarFieldEnum,
    "ModelName",
    ()=>ModelName,
    "NullTypes",
    ()=>NullTypes,
    "NullsOrder",
    ()=>NullsOrder,
    "PrismaClientInitializationError",
    ()=>PrismaClientInitializationError,
    "PrismaClientKnownRequestError",
    ()=>PrismaClientKnownRequestError,
    "PrismaClientRustPanicError",
    ()=>PrismaClientRustPanicError,
    "PrismaClientUnknownRequestError",
    ()=>PrismaClientUnknownRequestError,
    "PrismaClientValidationError",
    ()=>PrismaClientValidationError,
    "ProfileScalarFieldEnum",
    ()=>ProfileScalarFieldEnum,
    "ResumeScalarFieldEnum",
    ()=>ResumeScalarFieldEnum,
    "ScoreScalarFieldEnum",
    ()=>ScoreScalarFieldEnum,
    "SortOrder",
    ()=>SortOrder,
    "Sql",
    ()=>Sql,
    "TransactionIsolationLevel",
    ()=>TransactionIsolationLevel,
    "UserAnalyticsScalarFieldEnum",
    ()=>UserAnalyticsScalarFieldEnum,
    "UserScalarFieldEnum",
    ()=>UserScalarFieldEnum,
    "defineExtension",
    ()=>defineExtension,
    "empty",
    ()=>empty,
    "getExtensionContext",
    ()=>getExtensionContext,
    "join",
    ()=>join,
    "prismaVersion",
    ()=>prismaVersion,
    "raw",
    ()=>raw,
    "sql",
    ()=>sql
]);
/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
 * WARNING: This is an internal file that is subject to change!
 *
 * ðŸ›‘ Under no circumstances should you import this file directly! ðŸ›‘
 *
 * All exports from this file are wrapped under a `Prisma` namespace object in the client.ts file.
 * While this enables partial backward compatibility, it is not part of the stable public API.
 *
 * If you are looking for your Models, Enums, and Input Types, please import them from the respective
 * model files in the `model` directory!
 */ var __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__ = __turbopack_context__.i("[externals]/@prisma/client/runtime/client [external] (@prisma/client/runtime/client, cjs, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client)");
;
const PrismaClientKnownRequestError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientKnownRequestError"];
const PrismaClientUnknownRequestError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientUnknownRequestError"];
const PrismaClientRustPanicError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientRustPanicError"];
const PrismaClientInitializationError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientInitializationError"];
const PrismaClientValidationError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientValidationError"];
const sql = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["sqltag"];
const empty = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["empty"];
const join = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["join"];
const raw = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["raw"];
const Sql = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Sql"];
const Decimal = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Decimal"];
const getExtensionContext = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Extensions"].getExtensionContext;
const prismaVersion = {
    client: "7.3.0",
    engine: "9d6ad21cbbceab97458517b147a6a09ff43aa735"
};
const NullTypes = {
    DbNull: __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["NullTypes"].DbNull,
    JsonNull: __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["NullTypes"].JsonNull,
    AnyNull: __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["NullTypes"].AnyNull
};
const DbNull = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["DbNull"];
const JsonNull = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["JsonNull"];
const AnyNull = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["AnyNull"];
const ModelName = {
    User: 'User',
    Profile: 'Profile',
    Resume: 'Resume',
    Interview: 'Interview',
    Message: 'Message',
    Score: 'Score',
    UserAnalytics: 'UserAnalytics',
    CodingProblem: 'CodingProblem',
    CodingChallenge: 'CodingChallenge',
    ChallengeSubmission: 'ChallengeSubmission',
    ChallengeScore: 'ChallengeScore',
    CodingTest: 'CodingTest'
};
const TransactionIsolationLevel = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["makeStrictEnum"]({
    Serializable: 'Serializable'
});
const UserScalarFieldEnum = {
    id: 'id',
    email: 'email',
    password: 'password',
    name: 'name',
    avatar: 'avatar',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const ProfileScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    bio: 'bio',
    yearsExperience: 'yearsExperience',
    skills: 'skills',
    targetCompanies: 'targetCompanies',
    targetRole: 'targetRole',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const ResumeScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    fileName: 'fileName',
    content: 'content',
    analysis: 'analysis',
    filePath: 'filePath',
    atsScore: 'atsScore',
    atsBreakdown: 'atsBreakdown',
    atsFeedback: 'atsFeedback',
    keywords: 'keywords',
    softSkills: 'softSkills',
    predictedRoles: 'predictedRoles',
    uploadedAt: 'uploadedAt',
    updatedAt: 'updatedAt'
};
const InterviewScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    topic: 'topic',
    difficulty: 'difficulty',
    status: 'status',
    startedAt: 'startedAt',
    endedAt: 'endedAt',
    createdAt: 'createdAt',
    phaseDurations: 'phaseDurations',
    phaseTransitions: 'phaseTransitions'
};
const MessageScalarFieldEnum = {
    id: 'id',
    interviewId: 'interviewId',
    role: 'role',
    content: 'content',
    timestamp: 'timestamp'
};
const ScoreScalarFieldEnum = {
    id: 'id',
    interviewId: 'interviewId',
    requirementsClarification: 'requirementsClarification',
    highLevelDesign: 'highLevelDesign',
    detailedDesign: 'detailedDesign',
    scalability: 'scalability',
    tradeoffs: 'tradeoffs',
    communication: 'communication',
    overallScore: 'overallScore',
    passStatus: 'passStatus',
    feedback: 'feedback',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const UserAnalyticsScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    totalInterviews: 'totalInterviews',
    completedInterviews: 'completedInterviews',
    avgOverallScore: 'avgOverallScore',
    passRate: 'passRate',
    weakDimensions: 'weakDimensions',
    strongDimensions: 'strongDimensions',
    topicStats: 'topicStats',
    scoreTrend: 'scoreTrend',
    lastCalculatedAt: 'lastCalculatedAt',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const CodingProblemScalarFieldEnum = {
    id: 'id',
    title: 'title',
    description: 'description',
    difficulty: 'difficulty',
    category: 'category',
    companies: 'companies',
    constraints: 'constraints',
    examples: 'examples',
    testCases: 'testCases',
    solutionApproaches: 'solutionApproaches',
    starterCode: 'starterCode',
    timeLimit: 'timeLimit',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const CodingChallengeScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    problemId: 'problemId',
    testId: 'testId',
    title: 'title',
    description: 'description',
    difficulty: 'difficulty',
    category: 'category',
    company: 'company',
    language: 'language',
    visibleTests: 'visibleTests',
    hiddenTests: 'hiddenTests',
    timeLimit: 'timeLimit',
    status: 'status',
    startedAt: 'startedAt',
    endedAt: 'endedAt',
    starterCode: 'starterCode',
    finalCode: 'finalCode',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const ChallengeSubmissionScalarFieldEnum = {
    id: 'id',
    challengeId: 'challengeId',
    code: 'code',
    language: 'language',
    submittedAt: 'submittedAt',
    evaluation: 'evaluation',
    testResults: 'testResults',
    isValid: 'isValid',
    errorMessage: 'errorMessage'
};
const ChallengeScoreScalarFieldEnum = {
    id: 'id',
    challengeId: 'challengeId',
    correctness: 'correctness',
    efficiency: 'efficiency',
    codeQuality: 'codeQuality',
    edgeCases: 'edgeCases',
    overallScore: 'overallScore',
    passStatus: 'passStatus',
    feedback: 'feedback',
    suggestedApproach: 'suggestedApproach',
    complexityAnalysis: 'complexityAnalysis',
    createdAt: 'createdAt'
};
const CodingTestScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    status: 'status',
    startedAt: 'startedAt',
    endedAt: 'endedAt',
    timeLimit: 'timeLimit',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const SortOrder = {
    asc: 'asc',
    desc: 'desc'
};
const NullsOrder = {
    first: 'first',
    last: 'last'
};
const defineExtension = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Extensions"].defineExtension;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/enums.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
* This file exports all enum related types from the schema.
*
* ðŸŸ¢ You can import this file directly.
*/ // This file is empty because there are no enums in the schema.
__turbopack_context__.s([]);
;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/client.ts [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
 * This file should be your main import to use Prisma. Through it you get access to all the models, enums, and input types.
 * If you're looking for something you can import in the client-side of your application, please refer to the `browser.ts` file instead.
 *
 * ðŸŸ¢ You can import this file directly.
 */ __turbopack_context__.s([
    "PrismaClient",
    ()=>PrismaClient
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$path__$5b$external$5d$__$28$node$3a$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/node:path [external] (node:path, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$url__$5b$external$5d$__$28$node$3a$url$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/node:url [external] (node:url, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$internal$2f$class$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/class.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$internal$2f$prismaNamespace$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/prismaNamespace.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$enums$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/enums.ts [app-route] (ecmascript)");
const __TURBOPACK__import$2e$meta__ = {
    get url () {
        return `file://${__turbopack_context__.P("Documents/Git/system-design/system-design-simulator/src/generated/prisma/client.ts")}`;
    }
};
;
;
globalThis['__dirname'] = __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$path__$5b$external$5d$__$28$node$3a$path$2c$__cjs$29$__["dirname"]((0, __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$url__$5b$external$5d$__$28$node$3a$url$2c$__cjs$29$__["fileURLToPath"])(__TURBOPACK__import$2e$meta__.url));
;
;
;
;
const PrismaClient = __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$internal$2f$class$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getPrismaClientClass"]();
;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "prisma",
    ()=>prisma
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/client.ts [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/adapter-libsql/dist/index-node.mjs [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
const adapter = new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrismaLibSql"]({
    url: process.env.DATABASE_URL || "file:./dev.db"
});
const globalForPrisma = globalThis;
const prisma = globalForPrisma.prisma ?? new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PrismaClient"]({
    adapter
});
if ("TURBOPACK compile-time truthy", 1) globalForPrisma.prisma = prisma;
const __TURBOPACK__default__export__ = prisma;
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/auth.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "auth",
    ()=>auth,
    "handlers",
    ()=>handlers,
    "signIn",
    ()=>signIn,
    "signOut",
    ()=>signOut
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next-auth/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2d$auth$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next-auth/providers/credentials.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/@auth/core/providers/credentials.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/bcryptjs/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
const { handlers, signIn, signOut, auth } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["default"])({
    providers: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            name: "credentials",
            credentials: {
                email: {
                    label: "Email",
                    type: "email"
                },
                password: {
                    label: "Password",
                    type: "password"
                }
            },
            async authorize (credentials) {
                if (!credentials?.email || !credentials?.password) {
                    return null;
                }
                const email = credentials.email;
                const password = credentials.password;
                const user = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].user.findUnique({
                    where: {
                        email
                    }
                });
                if (!user) {
                    return null;
                }
                const isPasswordValid = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].compare(password, user.password);
                if (!isPasswordValid) {
                    return null;
                }
                return {
                    id: user.id,
                    email: user.email,
                    name: user.name,
                    image: user.avatar
                };
            }
        })
    ],
    callbacks: {
        async jwt ({ token, user }) {
            if (user) {
                token.id = user.id;
            }
            return token;
        },
        async session ({ session, token }) {
            if (session.user) {
                session.user.id = token.id;
            }
            return session;
        }
    },
    pages: {
        signIn: "/login"
    },
    session: {
        strategy: "jwt"
    }
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/ollama-provider.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Ollama Provider
 *
 * Handles all Ollama-specific LLM interactions with timeout support.
 */ __turbopack_context__.s([
    "checkOllamaHealth",
    ()=>checkOllamaHealth,
    "ollamaComplete",
    ()=>ollamaComplete,
    "ollamaStreamComplete",
    ()=>ollamaStreamComplete
]);
const OLLAMA_BASE_URL = process.env.OLLAMA_BASE_URL || "http://localhost:11434";
const OLLAMA_MODEL = process.env.OLLAMA_MODEL || "llama3";
const OLLAMA_CODE_MODEL = process.env.OLLAMA_CODE_MODEL || "codellama:7b";
const OLLAMA_TIMEOUT = 30000; // 30 second timeout
function getModelForType(type) {
    return type === "coding" ? OLLAMA_CODE_MODEL : OLLAMA_MODEL;
}
async function checkOllamaHealth() {
    try {
        const controller = new AbortController();
        const timeout = setTimeout(()=>controller.abort(), 5000);
        const response = await fetch(`${OLLAMA_BASE_URL}/api/tags`, {
            method: "GET",
            signal: controller.signal
        });
        clearTimeout(timeout);
        return response.ok;
    } catch  {
        return false;
    }
}
async function ollamaComplete(options, modelType = "general") {
    const model = getModelForType(modelType);
    const controller = new AbortController();
    const timeout = setTimeout(()=>controller.abort(), OLLAMA_TIMEOUT);
    try {
        const response = await fetch(`${OLLAMA_BASE_URL}/api/chat`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                model,
                messages: options.messages,
                stream: false,
                options: {
                    temperature: options.temperature ?? 0.7,
                    num_predict: options.maxTokens ?? 800,
                    top_p: options.topP ?? 0.9,
                    stop: options.stop
                }
            }),
            signal: controller.signal
        });
        clearTimeout(timeout);
        if (!response.ok) {
            const error = await response.text();
            throw new Error(`Ollama error: ${error}`);
        }
        const data = await response.json();
        return {
            content: data.message?.content || "",
            provider: "ollama",
            fallbackUsed: false,
            model
        };
    } catch (error) {
        clearTimeout(timeout);
        throw error;
    }
}
async function ollamaStreamComplete(options, modelType = "general") {
    const model = getModelForType(modelType);
    const response = await fetch(`${OLLAMA_BASE_URL}/api/chat`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            model,
            messages: options.messages,
            stream: true,
            options: {
                temperature: options.temperature ?? 0.7,
                num_predict: options.maxTokens ?? 800,
                top_p: options.topP ?? 0.9,
                stop: options.stop
            }
        })
    });
    if (!response.ok) {
        const error = await response.text();
        throw new Error(`Ollama streaming error: ${error}`);
    }
    if (!response.body) {
        throw new Error("No response body from Ollama");
    }
    // Transform Ollama stream to SSE format
    const stream = transformOllamaStream(response.body);
    return {
        stream,
        provider: "ollama",
        fallbackUsed: false,
        model
    };
}
/**
 * Transform Ollama stream to SSE format
 */ function transformOllamaStream(ollamaStream) {
    const encoder = new TextEncoder();
    const decoder = new TextDecoder();
    let buffer = "";
    return new ReadableStream({
        async start (controller) {
            const reader = ollamaStream.getReader();
            try {
                while(true){
                    const { done, value } = await reader.read();
                    if (done) {
                        controller.close();
                        break;
                    }
                    buffer += decoder.decode(value, {
                        stream: true
                    });
                    // Process complete JSON lines
                    const lines = buffer.split("\n");
                    buffer = lines.pop() || "";
                    for (const line of lines){
                        if (line.trim()) {
                            try {
                                const json = JSON.parse(line);
                                if (json.message?.content) {
                                    const sseData = `data: ${JSON.stringify({
                                        content: json.message.content
                                    })}\n\n`;
                                    controller.enqueue(encoder.encode(sseData));
                                }
                                if (json.done) {
                                    controller.enqueue(encoder.encode("data: [DONE]\n\n"));
                                }
                            } catch  {
                            // Skip invalid JSON lines
                            }
                        }
                    }
                }
            } catch (error) {
                controller.error(error);
            }
        }
    });
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/openai-provider.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "isOpenAIConfigured",
    ()=>isOpenAIConfigured,
    "openaiComplete",
    ()=>openaiComplete,
    "openaiStreamComplete",
    ()=>openaiStreamComplete
]);
/**
 * OpenAI Provider
 *
 * Handles all OpenAI-specific LLM interactions as fallback.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/openai/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$openai$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OpenAI__as__default$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/openai/client.mjs [app-route] (ecmascript) <export OpenAI as default>");
;
const OPENAI_MODEL = process.env.OPENAI_MODEL || "gpt-4o-mini";
let openaiClient = null;
function getOpenAIClient() {
    if (!openaiClient) {
        if (!process.env.OPENAI_API_KEY) {
            throw new Error("OpenAI API key not configured");
        }
        openaiClient = new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$openai$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OpenAI__as__default$3e$__["default"]({
            apiKey: process.env.OPENAI_API_KEY
        });
    }
    return openaiClient;
}
function isOpenAIConfigured() {
    return !!process.env.OPENAI_API_KEY;
}
async function openaiComplete(options) {
    const client = getOpenAIClient();
    const response = await client.chat.completions.create({
        model: OPENAI_MODEL,
        messages: options.messages.map((m)=>({
                role: m.role,
                content: m.content
            })),
        temperature: options.temperature ?? 0.7,
        max_tokens: options.maxTokens ?? 800,
        top_p: options.topP ?? 0.9,
        stop: options.stop
    });
    return {
        content: response.choices[0]?.message?.content || "",
        provider: "openai",
        fallbackUsed: true,
        model: OPENAI_MODEL
    };
}
async function openaiStreamComplete(options) {
    const client = getOpenAIClient();
    const response = await client.chat.completions.create({
        model: OPENAI_MODEL,
        messages: options.messages.map((m)=>({
                role: m.role,
                content: m.content
            })),
        temperature: options.temperature ?? 0.7,
        max_tokens: options.maxTokens ?? 800,
        top_p: options.topP ?? 0.9,
        stop: options.stop,
        stream: true
    });
    // Transform OpenAI stream to our SSE format
    const stream = transformOpenAIStream(response);
    return {
        stream,
        provider: "openai",
        fallbackUsed: true,
        model: OPENAI_MODEL
    };
}
/**
 * Transform OpenAI stream to SSE format matching our expected format
 */ function transformOpenAIStream(openaiStream) {
    const encoder = new TextEncoder();
    return new ReadableStream({
        async start (controller) {
            try {
                for await (const chunk of openaiStream){
                    const content = chunk.choices[0]?.delta?.content;
                    if (content) {
                        const sseData = `data: ${JSON.stringify({
                            content
                        })}\n\n`;
                        controller.enqueue(encoder.encode(sseData));
                    }
                    // Check if this is the final chunk
                    if (chunk.choices[0]?.finish_reason) {
                        controller.enqueue(encoder.encode("data: [DONE]\n\n"));
                    }
                }
                controller.close();
            } catch (error) {
                controller.error(error);
            }
        }
    });
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/client.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Unified LLM Client
 *
 * Provides a unified interface for LLM operations with automatic
 * fallback from Ollama to OpenAI when Ollama is unavailable.
 */ __turbopack_context__.s([
    "checkLLMHealth",
    ()=>checkLLMHealth,
    "complete",
    ()=>complete,
    "streamComplete",
    ()=>streamComplete
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$ollama$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/ollama-provider.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$openai$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/openai-provider.ts [app-route] (ecmascript)");
;
;
async function checkLLMHealth() {
    // Always check fresh status (no caching) to handle "resetting" scenarios
    const ollamaAvailable = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$ollama$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["checkOllamaHealth"])();
    return {
        ollamaAvailable,
        openaiConfigured: (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$openai$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isOpenAIConfigured"])()
    };
}
async function complete(options, modelType = "general") {
    // Check Ollama health (cached)
    const health = await checkLLMHealth();
    // Try Ollama first if available
    if (health.ollamaAvailable) {
        try {
            console.log("[LLM] Attempting Ollama completion...");
            const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$ollama$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ollamaComplete"])(options, modelType);
            console.log("[LLM] Ollama completion successful");
            return response;
        } catch (error) {
            console.warn("[LLM] Ollama failed, checking fallback:", error);
        }
    }
    // Fallback to OpenAI
    if (health.openaiConfigured) {
        console.log("[LLM] Falling back to OpenAI...");
        const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$openai$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["openaiComplete"])(options);
        console.log("[LLM] OpenAI completion successful");
        return response;
    }
    throw new Error("No LLM provider available. Ollama is not running and OpenAI is not configured.");
}
async function streamComplete(options, modelType = "general") {
    // Check Ollama health (cached)
    const health = await checkLLMHealth();
    // Try Ollama first if available
    if (health.ollamaAvailable) {
        try {
            console.log("[LLM] Attempting Ollama streaming...");
            const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$ollama$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ollamaStreamComplete"])(options, modelType);
            console.log("[LLM] Ollama streaming started");
            return response;
        } catch (error) {
            console.warn("[LLM] Ollama streaming failed, checking fallback:", error);
        }
    }
    // Fallback to OpenAI
    if (health.openaiConfigured) {
        console.log("[LLM] Falling back to OpenAI streaming...");
        const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$openai$2d$provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["openaiStreamComplete"])(options);
        console.log("[LLM] OpenAI streaming started");
        return response;
    }
    throw new Error("No LLM provider available. Ollama is not running and OpenAI is not configured.");
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/index.ts [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

/**
 * LLM Types and Interfaces
 *
 * Unified type definitions for LLM interactions.
 */ __turbopack_context__.s([]);
// Re-export client functions
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/client.ts [app-route] (ecmascript)");
;
}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/redis.ts [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CACHE_KEYS",
    ()=>CACHE_KEYS,
    "CACHE_TTL",
    ()=>CACHE_TTL,
    "getRedisClient",
    ()=>getRedisClient,
    "isRedisAvailable",
    ()=>isRedisAvailable
]);
/**
 * Redis Client using Upstash
 *
 * Provides a singleton Redis client for caching.
 * Falls back gracefully if Redis is not configured.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$upstash$2f$redis$2f$nodejs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/@upstash/redis/nodejs.mjs [app-route] (ecmascript) <locals>");
;
const CACHE_KEYS = {
    USER_ANALYTICS: "analytics:user:",
    LEADERBOARD: "leaderboard:",
    OLLAMA_HEALTH: "ollama:health",
    INTERVIEW_QUESTIONS: "questions:"
};
const CACHE_TTL = {
    USER_ANALYTICS: 5 * 60,
    LEADERBOARD: 60,
    OLLAMA_HEALTH: 30,
    INTERVIEW_QUESTIONS: 60 * 60
};
// Check if Redis is configured
const isRedisConfigured = ()=>{
    return !!(process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN);
};
// Create Redis client singleton
let redisClient = null;
function getRedisClient() {
    if (!isRedisConfigured()) {
        return null;
    }
    if (!redisClient) {
        redisClient = new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$upstash$2f$redis$2f$nodejs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Redis"]({
            url: process.env.UPSTASH_REDIS_REST_URL,
            token: process.env.UPSTASH_REDIS_REST_TOKEN
        });
    }
    return redisClient;
}
function isRedisAvailable() {
    return isRedisConfigured();
}
;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/rate-limit.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "RATE_LIMITS",
    ()=>RATE_LIMITS,
    "addRateLimitHeaders",
    ()=>addRateLimitHeaders,
    "checkRateLimit",
    ()=>checkRateLimit,
    "rateLimit",
    ()=>rateLimit
]);
/**
 * Rate Limiting Utility
 *
 * Sliding window rate limiter using Upstash Redis.
 * Falls back to in-memory storage when Redis is not configured.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$redis$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/redis.ts [app-route] (ecmascript) <locals>");
;
;
const RATE_LIMITS = {
    /** Auth routes (login, register) - strict to prevent brute force */ AUTH: {
        limit: 5,
        window: 60
    },
    /** Password change - very strict */ PASSWORD: {
        limit: 3,
        window: 60
    },
    /** Resource creation (interviews, challenges) - moderate */ CREATE: {
        limit: 10,
        window: 60
    },
    /** Chat/interaction endpoints - higher limit */ CHAT: {
        limit: 30,
        window: 60
    },
    /** Code submission - moderate */ SUBMIT: {
        limit: 20,
        window: 60
    },
    /** Read/list endpoints - generous */ READ: {
        limit: 60,
        window: 60
    },
    /** File upload - strict */ UPLOAD: {
        limit: 5,
        window: 60
    },
    /** AI/LLM endpoints (expensive) - moderate */ AI: {
        limit: 10,
        window: 60
    }
};
// In-memory fallback store
const memoryStore = new Map();
// Clean up expired entries periodically
setInterval(()=>{
    const now = Date.now();
    for (const [key, value] of memoryStore){
        if (value.resetAt <= now) {
            memoryStore.delete(key);
        }
    }
}, 60_000);
/**
 * Extract client identifier from request.
 * Uses IP address for unauthenticated requests.
 */ function getClientIp(request) {
    const forwarded = request.headers.get("x-forwarded-for");
    if (forwarded) {
        return forwarded.split(",")[0].trim();
    }
    const realIp = request.headers.get("x-real-ip");
    if (realIp) {
        return realIp;
    }
    return "127.0.0.1";
}
/**
 * Check rate limit using Redis sliding window.
 */ async function checkRedisRateLimit(key, config) {
    const redis = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$redis$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getRedisClient"])();
    if (!redis) {
        return {
            success: true,
            limit: config.limit,
            remaining: config.limit,
            reset: 0
        };
    }
    const now = Date.now();
    const windowMs = config.window * 1000;
    const windowStart = now - windowMs;
    // Use a sorted set for sliding window
    const redisKey = `ratelimit:${key}`;
    // Pipeline: remove old entries, add current, count, set expiry
    const pipeline = redis.pipeline();
    pipeline.zremrangebyscore(redisKey, 0, windowStart);
    pipeline.zadd(redisKey, {
        score: now,
        member: `${now}:${Math.random()}`
    });
    pipeline.zcard(redisKey);
    pipeline.expire(redisKey, config.window);
    const results = await pipeline.exec();
    const count = results[2] || 0;
    const reset = Math.ceil((now + windowMs) / 1000);
    const remaining = Math.max(0, config.limit - count);
    const success = count <= config.limit;
    return {
        success,
        limit: config.limit,
        remaining,
        reset
    };
}
/**
 * Check rate limit using in-memory store (fallback).
 */ function checkMemoryRateLimit(key, config) {
    const now = Date.now();
    const windowMs = config.window * 1000;
    const storeKey = `ratelimit:${key}`;
    const entry = memoryStore.get(storeKey);
    if (!entry || entry.resetAt <= now) {
        // New window
        memoryStore.set(storeKey, {
            count: 1,
            resetAt: now + windowMs
        });
        return {
            success: true,
            limit: config.limit,
            remaining: config.limit - 1,
            reset: Math.ceil((now + windowMs) / 1000)
        };
    }
    entry.count++;
    const remaining = Math.max(0, config.limit - entry.count);
    const success = entry.count <= config.limit;
    return {
        success,
        limit: config.limit,
        remaining,
        reset: Math.ceil(entry.resetAt / 1000)
    };
}
async function checkRateLimit(identifier, config) {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$redis$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["isRedisAvailable"])()) {
        try {
            return await checkRedisRateLimit(identifier, config);
        } catch (error) {
            console.error("Redis rate limit error, falling back to memory:", error);
            return checkMemoryRateLimit(identifier, config);
        }
    }
    return checkMemoryRateLimit(identifier, config);
}
async function rateLimit(request, config, keyPrefix, userId) {
    const identifier = userId || getClientIp(request);
    const key = `${keyPrefix}:${identifier}`;
    const result = await checkRateLimit(key, config);
    if (!result.success) {
        const retryAfter = Math.max(1, result.reset - Math.ceil(Date.now() / 1000));
        return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Too many requests",
            message: "Rate limit exceeded. Please try again later.",
            retryAfter
        }, {
            status: 429,
            headers: {
                "Retry-After": String(retryAfter),
                "X-RateLimit-Limit": String(result.limit),
                "X-RateLimit-Remaining": "0",
                "X-RateLimit-Reset": String(result.reset)
            }
        });
    }
    return null;
}
function addRateLimitHeaders(response, result) {
    response.headers.set("X-RateLimit-Limit", String(result.limit));
    response.headers.set("X-RateLimit-Remaining", String(result.remaining));
    response.headers.set("X-RateLimit-Reset", String(result.reset));
    return response;
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/app/api/interview/[id]/chat/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "POST",
    ()=>POST
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/auth.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/index.ts [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/llm/client.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$rate$2d$limit$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/rate-limit.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
async function POST(request, { params }) {
    try {
        const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
        if (!session?.user?.id) {
            return new Response("Unauthorized", {
                status: 401
            });
        }
        const rateLimitResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$rate$2d$limit$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["rateLimit"])(request, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$rate$2d$limit$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["RATE_LIMITS"].CHAT, "api:interview:chat", session.user.id);
        if (rateLimitResponse) return rateLimitResponse;
        const { id } = await params;
        const body = await request.json();
        const { message, phaseContext, currentPhase } = body;
        if (!message && !phaseContext) {
            return new Response("Message or phaseContext is required", {
                status: 400
            });
        }
        // Verify ownership and get interview with messages
        const interview = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findFirst({
            where: {
                id,
                userId: session.user.id
            },
            include: {
                messages: {
                    orderBy: {
                        timestamp: "asc"
                    }
                }
            }
        });
        if (!interview) {
            return new Response("Interview not found", {
                status: 404
            });
        }
        if (interview.status === "completed") {
            return new Response("Interview is already completed", {
                status: 400
            });
        }
        // Handle phase transition recording for time tracking
        if (phaseContext) {
            const currentTransitions = interview.phaseTransitions ? JSON.parse(interview.phaseTransitions) : [];
            // Close previous phase if exists
            if (currentTransitions.length > 0) {
                const lastIndex = currentTransitions.length - 1;
                if (!currentTransitions[lastIndex].endedAt) {
                    currentTransitions[lastIndex].endedAt = new Date().toISOString();
                }
            }
            // Start new phase
            currentTransitions.push({
                phase: phaseContext,
                startedAt: new Date().toISOString()
            });
            await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.update({
                where: {
                    id
                },
                data: {
                    phaseTransitions: JSON.stringify(currentTransitions)
                }
            });
        }
        // Save user message only if provided
        if (message) {
            await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].message.create({
                data: {
                    interviewId: id,
                    role: "user",
                    content: message
                }
            });
        }
        // Build conversation history for LLM
        const messages = interview.messages.map((m)=>({
                role: m.role,
                content: m.content
            }));
        // Phase boundary enforcement reminder
        const phaseReminders = {
            requirements: "You are currently in the REQUIREMENTS CLARIFICATION phase (45:00-37:00). ONLY ask about: scale (DAU, QPS, data size), functional requirements, non-functional requirements (latency, consistency), and priorities. DO NOT ask about architecture, components, databases, or implementation yet.",
            "high-level": "You are currently in the HIGH-LEVEL DESIGN phase (37:00-25:00). ONLY ask about: overall architecture, main components, API design, data flow, and database choices at a high level. DO NOT dive into implementation details, algorithms, or schemas yet.",
            "deep-dive": "You are currently in the DEEP DIVE phase (25:00-13:00). NOW you can ask about: data models, schemas, algorithms, protocols, implementation details, and failure scenarios. DO NOT ask about scalability strategies yet.",
            scalability: "You are currently in the SCALABILITY phase (13:00-3:00). NOW you can ask about: scaling strategies (10x-100x), caching, sharding, load balancing, performance optimization, and trade-offs.",
            wrapup: "You are currently in the WRAP-UP phase (3:00-0:00). Summarize the design, address remaining concerns, and answer candidate questions."
        };
        // Add context or user message
        if (phaseContext) {
            messages.push({
                role: "system",
                content: `TRANSITION: The interview timer has advanced to the "${phaseContext}" phase. 
        Please acknowledge this transition, briefly wrap up the previous topic if needed, and immediately start the ${phaseContext} phase by asking a relevant question. 
        Do not wait for the user to respond to the previous topic. Focus on the new phase requirements.`
            });
        } else if (currentPhase && phaseReminders[currentPhase]) {
            // Add phase reminder for regular messages
            messages.push({
                role: "system",
                content: phaseReminders[currentPhase]
            });
        }
        if (message) {
            messages.push({
                role: "user",
                content: message
            });
        }
        // Create streaming response using LLM (Ollama with OpenAI fallback)
        const llmResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$llm$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["streamComplete"])({
            messages,
            temperature: 0.7,
            maxTokens: 800
        });
        // Create a ReadableStream for the response
        const encoder = new TextEncoder();
        const decoder = new TextDecoder();
        let fullResponse = "";
        let buffer = "";
        const readable = new ReadableStream({
            async start (controller) {
                const reader = llmResponse.stream.getReader();
                try {
                    while(true){
                        const { done, value } = await reader.read();
                        if (done) {
                            // Save the complete assistant message only if it's NOT a phase transition
                            // Phase transitions are handled by frontend state and shouldn't be duplicated in DB
                            if (fullResponse.trim() && !phaseContext) {
                                await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].message.create({
                                    data: {
                                        interviewId: id,
                                        role: "assistant",
                                        content: fullResponse
                                    }
                                });
                            }
                            controller.enqueue(encoder.encode(`data: ${JSON.stringify({
                                done: true
                            })}\n\n`));
                            controller.close();
                            break;
                        }
                        // Decode the chunk and add to buffer
                        buffer += decoder.decode(value, {
                            stream: true
                        });
                        // Process SSE data format from our LLM abstraction
                        const lines = buffer.split("\n");
                        buffer = lines.pop() || "";
                        for (const line of lines){
                            if (line.startsWith("data: ")) {
                                const data = line.slice(6);
                                if (data === "[DONE]") {
                                    continue;
                                }
                                try {
                                    const json = JSON.parse(data);
                                    if (json.content) {
                                        fullResponse += json.content;
                                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({
                                            content: json.content
                                        })}\n\n`));
                                    }
                                } catch  {
                                // Skip invalid JSON lines
                                }
                            }
                        }
                    }
                } catch (error) {
                    console.error("Stream error:", error);
                    // Save partial response if any (but not for phase transitions)
                    if (fullResponse.trim() && !phaseContext) {
                        await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].message.create({
                            data: {
                                interviewId: id,
                                role: "assistant",
                                content: fullResponse
                            }
                        });
                    }
                    controller.error(error);
                }
            }
        });
        return new Response(readable, {
            headers: {
                "Content-Type": "text/event-stream",
                "Cache-Control": "no-cache",
                Connection: "keep-alive"
            }
        });
    } catch (error) {
        console.error("Chat error:", error);
        return new Response("Internal server error", {
            status: 500
        });
    }
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__bc402de7._.js.map