module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/node:path [external] (node:path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:path", () => require("node:path"));

module.exports = mod;
}),
"[externals]/node:url [external] (node:url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:url", () => require("node:url"));

module.exports = mod;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/class.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getPrismaClientClass",
    ()=>getPrismaClientClass
]);
/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
 * WARNING: This is an internal file that is subject to change!
 *
 * ðŸ›‘ Under no circumstances should you import this file directly! ðŸ›‘
 *
 * Please import the `PrismaClient` class from the `client.ts` file instead.
 */ var __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__ = __turbopack_context__.i("[externals]/@prisma/client/runtime/client [external] (@prisma/client/runtime/client, cjs, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client)");
;
const config = {
    "previewFeatures": [],
    "clientVersion": "7.3.0",
    "engineVersion": "9d6ad21cbbceab97458517b147a6a09ff43aa735",
    "activeProvider": "sqlite",
    "inlineSchema": "// Prisma schema for AI System Design Simulator\ngenerator client {\n  provider = \"prisma-client\"\n  output   = \"../src/generated/prisma\"\n}\n\ndatasource db {\n  provider = \"sqlite\"\n}\n\nmodel User {\n  id        String   @id @default(cuid())\n  email     String   @unique\n  password  String\n  name      String?\n  avatar    String?\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  profile          Profile?\n  resumes          Resume[]\n  interviews       Interview[]\n  analytics        UserAnalytics?\n  codingChallenges CodingChallenge[]\n  codingTests      CodingTest[]\n}\n\nmodel Profile {\n  id     String @id @default(cuid())\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  bio             String?\n  yearsExperience Int?\n  skills          String  @default(\"[]\") // JSON array stored as string\n  targetCompanies String  @default(\"[]\") // JSON array stored as string\n  targetRole      String?\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n\nmodel Resume {\n  id     String @id @default(cuid())\n  userId String\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  fileName String\n  content  String // Full text content of resume\n  analysis String? // JSON object with AI analysis\n  filePath String? // Local path to the stored resume file\n\n  // ATS Score Data\n  atsScore       Int? // Total ATS score (0-100)\n  atsBreakdown   String? // JSON: { contactInfo, structure, experience, keywords, impact }\n  atsFeedback    String? // JSON array of feedback strings\n  keywords       String? // JSON array of extracted keywords\n  softSkills     String? // JSON array of soft skills\n  predictedRoles String? // JSON array of predicted job roles\n\n  uploadedAt DateTime @default(now())\n  updatedAt  DateTime @updatedAt\n}\n\nmodel Interview {\n  id     String @id @default(cuid())\n  userId String\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  topic      String // e.g., \"Design Twitter\", \"Design Uber\"\n  difficulty String @default(\"medium\") // easy, medium, hard\n  status     String @default(\"pending\") // pending, in_progress, completed\n\n  startedAt DateTime?\n  endedAt   DateTime?\n  createdAt DateTime  @default(now())\n\n  // Time tracking for phases\n  phaseDurations   String? // JSON: { requirements: 480, highLevel: 720 } in seconds\n  phaseTransitions String? // JSON: [{ phase: \"requirements\", startedAt: ISO, endedAt: ISO }]\n\n  messages Message[]\n  score    Score?\n\n  @@index([userId, status, endedAt])\n}\n\nmodel Message {\n  id          String    @id @default(cuid())\n  interviewId String\n  interview   Interview @relation(fields: [interviewId], references: [id], onDelete: Cascade)\n\n  role    String // user, assistant, system\n  content String\n\n  timestamp DateTime @default(now())\n}\n\nmodel Score {\n  id          String    @id @default(cuid())\n  interviewId String    @unique\n  interview   Interview @relation(fields: [interviewId], references: [id], onDelete: Cascade)\n\n  // 6 Industry-Standard FAANG Evaluation Dimensions (1-4 scale)\n  requirementsClarification Int @default(0)\n  highLevelDesign           Int @default(0)\n  detailedDesign            Int @default(0)\n  scalability               Int @default(0)\n  tradeoffs                 Int @default(0)\n  communication             Int @default(0)\n\n  // Calculated fields\n  overallScore Float   @default(0) // Weighted average\n  passStatus   Boolean @default(false)\n\n  // Detailed feedback as JSON\n  feedback String @default(\"{}\") // JSON with per-dimension comments\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n\n// Cached analytics for user performance tracking\nmodel UserAnalytics {\n  id     String @id @default(cuid())\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  // Cached aggregates (updated after each interview)\n  totalInterviews     Int    @default(0)\n  completedInterviews Int    @default(0)\n  avgOverallScore     Float?\n  passRate            Float?\n\n  // Weak/strong areas tracking\n  weakDimensions   String @default(\"[]\") // JSON array: [\"scalability\", \"tradeoffs\"]\n  strongDimensions String @default(\"[]\") // JSON array: [\"communication\", \"requirements\"]\n\n  // Topic performance\n  topicStats String @default(\"{}\") // JSON: { \"Design Twitter\": { count: 5, avgScore: 2.8 } }\n\n  // Trend data\n  scoreTrend       String   @default(\"stable\") // \"improving\" | \"stable\" | \"declining\"\n  lastCalculatedAt DateTime @default(now())\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n\n// ==================== CODING CHALLENGE MODELS ====================\n\n// Predefined problem bank\nmodel CodingProblem {\n  id                 String            @id @default(cuid())\n  title              String\n  description        String\n  difficulty         String // easy, medium, hard\n  category           String // arrays, strings, dp, graphs, trees, etc.\n  companies          String            @default(\"[]\") // JSON array of company names\n  constraints        String            @default(\"[]\") // JSON array\n  examples           String            @default(\"[]\") // JSON [{input, output, explanation}]\n  testCases          String            @default(\"[]\") // JSON [{input, expectedOutput, isHidden}]\n  solutionApproaches String            @default(\"[]\") // JSON array\n  starterCode        String            @default(\"{}\") // JSON {python: \"...\", java: \"...\"}\n  timeLimit          Int               @default(45) // minutes\n  createdAt          DateTime          @default(now())\n  updatedAt          DateTime          @updatedAt\n  challenges         CodingChallenge[]\n\n  @@index([difficulty, category])\n}\n\n// User's coding challenge instance\nmodel CodingChallenge {\n  id           String                @id @default(cuid())\n  userId       String\n  user         User                  @relation(fields: [userId], references: [id], onDelete: Cascade)\n  problemId    String?\n  problem      CodingProblem?        @relation(fields: [problemId], references: [id])\n  testId       String?\n  test         CodingTest?           @relation(fields: [testId], references: [id], onDelete: Cascade)\n  title        String\n  description  String\n  difficulty   String\n  category     String\n  company      String?\n  language     String // python, java, javascript, cpp, c, csharp, go\n  visibleTests String                @default(\"[]\")\n  hiddenTests  String                @default(\"[]\")\n  timeLimit    Int                   @default(45)\n  status       String                @default(\"pending\") // pending, in_progress, completed\n  startedAt    DateTime?\n  endedAt      DateTime?\n  starterCode  String?\n  finalCode    String?\n  createdAt    DateTime              @default(now())\n  updatedAt    DateTime              @updatedAt\n  submissions  ChallengeSubmission[]\n  score        ChallengeScore?\n\n  @@index([userId, status])\n}\n\n// Code submission for evaluation\nmodel ChallengeSubmission {\n  id           String          @id @default(cuid())\n  challengeId  String\n  challenge    CodingChallenge @relation(fields: [challengeId], references: [id], onDelete: Cascade)\n  code         String\n  language     String\n  submittedAt  DateTime        @default(now())\n  evaluation   String?\n  testResults  String?\n  isValid      Boolean         @default(false)\n  errorMessage String?\n\n  @@index([challengeId])\n}\n\n// Final score for coding challenge\nmodel ChallengeScore {\n  id                 String          @id @default(cuid())\n  challengeId        String          @unique\n  challenge          CodingChallenge @relation(fields: [challengeId], references: [id], onDelete: Cascade)\n  correctness        Float\n  efficiency         Float\n  codeQuality        Float\n  edgeCases          Float\n  overallScore       Float\n  passStatus         Boolean\n  feedback           String\n  suggestedApproach  String?\n  complexityAnalysis String?\n  createdAt          DateTime        @default(now())\n}\n\n// ==================== CODING TEST MODELS ====================\n\nmodel CodingTest {\n  id         String            @id @default(cuid())\n  userId     String\n  user       User              @relation(fields: [userId], references: [id], onDelete: Cascade)\n  challenges CodingChallenge[]\n  status     String            @default(\"pending\") // pending, in_progress, completed\n  startedAt  DateTime?\n  endedAt    DateTime?\n  timeLimit  Int // Total minutes for all questions\n  createdAt  DateTime          @default(now())\n  updatedAt  DateTime          @updatedAt\n}\n",
    "runtimeDataModel": {
        "models": {},
        "enums": {},
        "types": {}
    }
};
config.runtimeDataModel = JSON.parse("{\"models\":{\"User\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"email\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"password\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"name\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"avatar\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"profile\",\"kind\":\"object\",\"type\":\"Profile\",\"relationName\":\"ProfileToUser\"},{\"name\":\"resumes\",\"kind\":\"object\",\"type\":\"Resume\",\"relationName\":\"ResumeToUser\"},{\"name\":\"interviews\",\"kind\":\"object\",\"type\":\"Interview\",\"relationName\":\"InterviewToUser\"},{\"name\":\"analytics\",\"kind\":\"object\",\"type\":\"UserAnalytics\",\"relationName\":\"UserToUserAnalytics\"},{\"name\":\"codingChallenges\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"CodingChallengeToUser\"},{\"name\":\"codingTests\",\"kind\":\"object\",\"type\":\"CodingTest\",\"relationName\":\"CodingTestToUser\"}],\"dbName\":null},\"Profile\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"ProfileToUser\"},{\"name\":\"bio\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"yearsExperience\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"skills\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"targetCompanies\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"targetRole\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Resume\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"ResumeToUser\"},{\"name\":\"fileName\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"content\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"analysis\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"filePath\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"atsScore\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"atsBreakdown\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"atsFeedback\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"keywords\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"softSkills\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"predictedRoles\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"uploadedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Interview\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"InterviewToUser\"},{\"name\":\"topic\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"difficulty\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"status\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"phaseDurations\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"phaseTransitions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"messages\",\"kind\":\"object\",\"type\":\"Message\",\"relationName\":\"InterviewToMessage\"},{\"name\":\"score\",\"kind\":\"object\",\"type\":\"Score\",\"relationName\":\"InterviewToScore\"}],\"dbName\":null},\"Message\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interviewId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interview\",\"kind\":\"object\",\"type\":\"Interview\",\"relationName\":\"InterviewToMessage\"},{\"name\":\"role\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"content\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timestamp\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"Score\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interviewId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"interview\",\"kind\":\"object\",\"type\":\"Interview\",\"relationName\":\"InterviewToScore\"},{\"name\":\"requirementsClarification\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"highLevelDesign\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"detailedDesign\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"scalability\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"tradeoffs\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"communication\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"overallScore\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"passStatus\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"feedback\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"UserAnalytics\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"UserToUserAnalytics\"},{\"name\":\"totalInterviews\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"completedInterviews\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"avgOverallScore\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"passRate\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"weakDimensions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"strongDimensions\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"topicStats\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"scoreTrend\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"lastCalculatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"CodingProblem\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"title\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"difficulty\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"category\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"companies\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"constraints\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"examples\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"testCases\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"solutionApproaches\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"starterCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timeLimit\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"challenges\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"CodingChallengeToCodingProblem\"}],\"dbName\":null},\"CodingChallenge\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"CodingChallengeToUser\"},{\"name\":\"problemId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"problem\",\"kind\":\"object\",\"type\":\"CodingProblem\",\"relationName\":\"CodingChallengeToCodingProblem\"},{\"name\":\"testId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"test\",\"kind\":\"object\",\"type\":\"CodingTest\",\"relationName\":\"CodingChallengeToCodingTest\"},{\"name\":\"title\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"description\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"difficulty\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"category\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"company\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"language\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"visibleTests\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"hiddenTests\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"timeLimit\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"status\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"starterCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"finalCode\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"submissions\",\"kind\":\"object\",\"type\":\"ChallengeSubmission\",\"relationName\":\"ChallengeSubmissionToCodingChallenge\"},{\"name\":\"score\",\"kind\":\"object\",\"type\":\"ChallengeScore\",\"relationName\":\"ChallengeScoreToCodingChallenge\"}],\"dbName\":null},\"ChallengeSubmission\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challengeId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challenge\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"ChallengeSubmissionToCodingChallenge\"},{\"name\":\"code\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"language\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"submittedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"evaluation\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"testResults\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"isValid\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"errorMessage\",\"kind\":\"scalar\",\"type\":\"String\"}],\"dbName\":null},\"ChallengeScore\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challengeId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"challenge\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"ChallengeScoreToCodingChallenge\"},{\"name\":\"correctness\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"efficiency\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"codeQuality\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"edgeCases\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"overallScore\",\"kind\":\"scalar\",\"type\":\"Float\"},{\"name\":\"passStatus\",\"kind\":\"scalar\",\"type\":\"Boolean\"},{\"name\":\"feedback\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"suggestedApproach\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"complexityAnalysis\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null},\"CodingTest\":{\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"userId\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"user\",\"kind\":\"object\",\"type\":\"User\",\"relationName\":\"CodingTestToUser\"},{\"name\":\"challenges\",\"kind\":\"object\",\"type\":\"CodingChallenge\",\"relationName\":\"CodingChallengeToCodingTest\"},{\"name\":\"status\",\"kind\":\"scalar\",\"type\":\"String\"},{\"name\":\"startedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"endedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"timeLimit\",\"kind\":\"scalar\",\"type\":\"Int\"},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"type\":\"DateTime\"}],\"dbName\":null}},\"enums\":{},\"types\":{}}");
async function decodeBase64AsWasm(wasmBase64) {
    const { Buffer } = await __turbopack_context__.A("[externals]/node:buffer [external] (node:buffer, cjs, async loader)");
    const wasmArray = Buffer.from(wasmBase64, 'base64');
    return new WebAssembly.Module(wasmArray);
}
config.compilerWasm = {
    getRuntime: async ()=>await __turbopack_context__.A("[externals]/@prisma/client/runtime/query_compiler_fast_bg.sqlite.mjs [external] (@prisma/client/runtime/query_compiler_fast_bg.sqlite.mjs, esm_import, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client, async loader)"),
    getQueryCompilerWasmModule: async ()=>{
        const { wasm } = await __turbopack_context__.A("[externals]/@prisma/client/runtime/query_compiler_fast_bg.sqlite.wasm-base64.mjs [external] (@prisma/client/runtime/query_compiler_fast_bg.sqlite.wasm-base64.mjs, esm_import, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client, async loader)");
        return await decodeBase64AsWasm(wasm);
    },
    importName: "./query_compiler_fast_bg.js"
};
function getPrismaClientClass() {
    return __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["getPrismaClient"](config);
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/prismaNamespace.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AnyNull",
    ()=>AnyNull,
    "ChallengeScoreScalarFieldEnum",
    ()=>ChallengeScoreScalarFieldEnum,
    "ChallengeSubmissionScalarFieldEnum",
    ()=>ChallengeSubmissionScalarFieldEnum,
    "CodingChallengeScalarFieldEnum",
    ()=>CodingChallengeScalarFieldEnum,
    "CodingProblemScalarFieldEnum",
    ()=>CodingProblemScalarFieldEnum,
    "CodingTestScalarFieldEnum",
    ()=>CodingTestScalarFieldEnum,
    "DbNull",
    ()=>DbNull,
    "Decimal",
    ()=>Decimal,
    "InterviewScalarFieldEnum",
    ()=>InterviewScalarFieldEnum,
    "JsonNull",
    ()=>JsonNull,
    "MessageScalarFieldEnum",
    ()=>MessageScalarFieldEnum,
    "ModelName",
    ()=>ModelName,
    "NullTypes",
    ()=>NullTypes,
    "NullsOrder",
    ()=>NullsOrder,
    "PrismaClientInitializationError",
    ()=>PrismaClientInitializationError,
    "PrismaClientKnownRequestError",
    ()=>PrismaClientKnownRequestError,
    "PrismaClientRustPanicError",
    ()=>PrismaClientRustPanicError,
    "PrismaClientUnknownRequestError",
    ()=>PrismaClientUnknownRequestError,
    "PrismaClientValidationError",
    ()=>PrismaClientValidationError,
    "ProfileScalarFieldEnum",
    ()=>ProfileScalarFieldEnum,
    "ResumeScalarFieldEnum",
    ()=>ResumeScalarFieldEnum,
    "ScoreScalarFieldEnum",
    ()=>ScoreScalarFieldEnum,
    "SortOrder",
    ()=>SortOrder,
    "Sql",
    ()=>Sql,
    "TransactionIsolationLevel",
    ()=>TransactionIsolationLevel,
    "UserAnalyticsScalarFieldEnum",
    ()=>UserAnalyticsScalarFieldEnum,
    "UserScalarFieldEnum",
    ()=>UserScalarFieldEnum,
    "defineExtension",
    ()=>defineExtension,
    "empty",
    ()=>empty,
    "getExtensionContext",
    ()=>getExtensionContext,
    "join",
    ()=>join,
    "prismaVersion",
    ()=>prismaVersion,
    "raw",
    ()=>raw,
    "sql",
    ()=>sql
]);
/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
 * WARNING: This is an internal file that is subject to change!
 *
 * ðŸ›‘ Under no circumstances should you import this file directly! ðŸ›‘
 *
 * All exports from this file are wrapped under a `Prisma` namespace object in the client.ts file.
 * While this enables partial backward compatibility, it is not part of the stable public API.
 *
 * If you are looking for your Models, Enums, and Input Types, please import them from the respective
 * model files in the `model` directory!
 */ var __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__ = __turbopack_context__.i("[externals]/@prisma/client/runtime/client [external] (@prisma/client/runtime/client, cjs, [project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/client)");
;
const PrismaClientKnownRequestError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientKnownRequestError"];
const PrismaClientUnknownRequestError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientUnknownRequestError"];
const PrismaClientRustPanicError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientRustPanicError"];
const PrismaClientInitializationError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientInitializationError"];
const PrismaClientValidationError = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["PrismaClientValidationError"];
const sql = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["sqltag"];
const empty = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["empty"];
const join = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["join"];
const raw = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["raw"];
const Sql = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Sql"];
const Decimal = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Decimal"];
const getExtensionContext = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Extensions"].getExtensionContext;
const prismaVersion = {
    client: "7.3.0",
    engine: "9d6ad21cbbceab97458517b147a6a09ff43aa735"
};
const NullTypes = {
    DbNull: __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["NullTypes"].DbNull,
    JsonNull: __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["NullTypes"].JsonNull,
    AnyNull: __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["NullTypes"].AnyNull
};
const DbNull = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["DbNull"];
const JsonNull = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["JsonNull"];
const AnyNull = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["AnyNull"];
const ModelName = {
    User: 'User',
    Profile: 'Profile',
    Resume: 'Resume',
    Interview: 'Interview',
    Message: 'Message',
    Score: 'Score',
    UserAnalytics: 'UserAnalytics',
    CodingProblem: 'CodingProblem',
    CodingChallenge: 'CodingChallenge',
    ChallengeSubmission: 'ChallengeSubmission',
    ChallengeScore: 'ChallengeScore',
    CodingTest: 'CodingTest'
};
const TransactionIsolationLevel = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["makeStrictEnum"]({
    Serializable: 'Serializable'
});
const UserScalarFieldEnum = {
    id: 'id',
    email: 'email',
    password: 'password',
    name: 'name',
    avatar: 'avatar',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const ProfileScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    bio: 'bio',
    yearsExperience: 'yearsExperience',
    skills: 'skills',
    targetCompanies: 'targetCompanies',
    targetRole: 'targetRole',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const ResumeScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    fileName: 'fileName',
    content: 'content',
    analysis: 'analysis',
    filePath: 'filePath',
    atsScore: 'atsScore',
    atsBreakdown: 'atsBreakdown',
    atsFeedback: 'atsFeedback',
    keywords: 'keywords',
    softSkills: 'softSkills',
    predictedRoles: 'predictedRoles',
    uploadedAt: 'uploadedAt',
    updatedAt: 'updatedAt'
};
const InterviewScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    topic: 'topic',
    difficulty: 'difficulty',
    status: 'status',
    startedAt: 'startedAt',
    endedAt: 'endedAt',
    createdAt: 'createdAt',
    phaseDurations: 'phaseDurations',
    phaseTransitions: 'phaseTransitions'
};
const MessageScalarFieldEnum = {
    id: 'id',
    interviewId: 'interviewId',
    role: 'role',
    content: 'content',
    timestamp: 'timestamp'
};
const ScoreScalarFieldEnum = {
    id: 'id',
    interviewId: 'interviewId',
    requirementsClarification: 'requirementsClarification',
    highLevelDesign: 'highLevelDesign',
    detailedDesign: 'detailedDesign',
    scalability: 'scalability',
    tradeoffs: 'tradeoffs',
    communication: 'communication',
    overallScore: 'overallScore',
    passStatus: 'passStatus',
    feedback: 'feedback',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const UserAnalyticsScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    totalInterviews: 'totalInterviews',
    completedInterviews: 'completedInterviews',
    avgOverallScore: 'avgOverallScore',
    passRate: 'passRate',
    weakDimensions: 'weakDimensions',
    strongDimensions: 'strongDimensions',
    topicStats: 'topicStats',
    scoreTrend: 'scoreTrend',
    lastCalculatedAt: 'lastCalculatedAt',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const CodingProblemScalarFieldEnum = {
    id: 'id',
    title: 'title',
    description: 'description',
    difficulty: 'difficulty',
    category: 'category',
    companies: 'companies',
    constraints: 'constraints',
    examples: 'examples',
    testCases: 'testCases',
    solutionApproaches: 'solutionApproaches',
    starterCode: 'starterCode',
    timeLimit: 'timeLimit',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const CodingChallengeScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    problemId: 'problemId',
    testId: 'testId',
    title: 'title',
    description: 'description',
    difficulty: 'difficulty',
    category: 'category',
    company: 'company',
    language: 'language',
    visibleTests: 'visibleTests',
    hiddenTests: 'hiddenTests',
    timeLimit: 'timeLimit',
    status: 'status',
    startedAt: 'startedAt',
    endedAt: 'endedAt',
    starterCode: 'starterCode',
    finalCode: 'finalCode',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const ChallengeSubmissionScalarFieldEnum = {
    id: 'id',
    challengeId: 'challengeId',
    code: 'code',
    language: 'language',
    submittedAt: 'submittedAt',
    evaluation: 'evaluation',
    testResults: 'testResults',
    isValid: 'isValid',
    errorMessage: 'errorMessage'
};
const ChallengeScoreScalarFieldEnum = {
    id: 'id',
    challengeId: 'challengeId',
    correctness: 'correctness',
    efficiency: 'efficiency',
    codeQuality: 'codeQuality',
    edgeCases: 'edgeCases',
    overallScore: 'overallScore',
    passStatus: 'passStatus',
    feedback: 'feedback',
    suggestedApproach: 'suggestedApproach',
    complexityAnalysis: 'complexityAnalysis',
    createdAt: 'createdAt'
};
const CodingTestScalarFieldEnum = {
    id: 'id',
    userId: 'userId',
    status: 'status',
    startedAt: 'startedAt',
    endedAt: 'endedAt',
    timeLimit: 'timeLimit',
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
};
const SortOrder = {
    asc: 'asc',
    desc: 'desc'
};
const NullsOrder = {
    first: 'first',
    last: 'last'
};
const defineExtension = __TURBOPACK__imported__module__$5b$externals$5d2f40$prisma$2f$client$2f$runtime$2f$client__$5b$external$5d$__$2840$prisma$2f$client$2f$runtime$2f$client$2c$__cjs$2c$__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$client$29$__["Extensions"].defineExtension;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/enums.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
* This file exports all enum related types from the schema.
*
* ðŸŸ¢ You can import this file directly.
*/ // This file is empty because there are no enums in the schema.
__turbopack_context__.s([]);
;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/client.ts [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

/* !!! This is code generated by Prisma. Do not edit directly. !!! */ /* eslint-disable */ // biome-ignore-all lint: generated file
// @ts-nocheck 
/*
 * This file should be your main import to use Prisma. Through it you get access to all the models, enums, and input types.
 * If you're looking for something you can import in the client-side of your application, please refer to the `browser.ts` file instead.
 *
 * ðŸŸ¢ You can import this file directly.
 */ __turbopack_context__.s([
    "PrismaClient",
    ()=>PrismaClient
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$path__$5b$external$5d$__$28$node$3a$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/node:path [external] (node:path, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$url__$5b$external$5d$__$28$node$3a$url$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/node:url [external] (node:url, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$internal$2f$class$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/class.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$internal$2f$prismaNamespace$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/internal/prismaNamespace.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$enums$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/enums.ts [app-route] (ecmascript)");
const __TURBOPACK__import$2e$meta__ = {
    get url () {
        return `file://${__turbopack_context__.P("Documents/Git/system-design/system-design-simulator/src/generated/prisma/client.ts")}`;
    }
};
;
;
globalThis['__dirname'] = __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$path__$5b$external$5d$__$28$node$3a$path$2c$__cjs$29$__["dirname"]((0, __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$url__$5b$external$5d$__$28$node$3a$url$2c$__cjs$29$__["fileURLToPath"])(__TURBOPACK__import$2e$meta__.url));
;
;
;
;
const PrismaClient = __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$internal$2f$class$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getPrismaClientClass"]();
;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "prisma",
    ()=>prisma
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/generated/prisma/client.ts [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/@prisma/adapter-libsql/dist/index-node.mjs [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
const adapter = new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$prisma$2f$adapter$2d$libsql$2f$dist$2f$index$2d$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrismaLibSql"]({
    url: process.env.DATABASE_URL || "file:./dev.db"
});
const globalForPrisma = globalThis;
const prisma = globalForPrisma.prisma ?? new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$generated$2f$prisma$2f$client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["PrismaClient"]({
    adapter
});
if ("TURBOPACK compile-time truthy", 1) globalForPrisma.prisma = prisma;
const __TURBOPACK__default__export__ = prisma;
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/auth.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "auth",
    ()=>auth,
    "handlers",
    ()=>handlers,
    "signIn",
    ()=>signIn,
    "signOut",
    ()=>signOut
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next-auth/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2d$auth$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next-auth/providers/credentials.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/@auth/core/providers/credentials.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/bcryptjs/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
const { handlers, signIn, signOut, auth } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["default"])({
    providers: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            name: "credentials",
            credentials: {
                email: {
                    label: "Email",
                    type: "email"
                },
                password: {
                    label: "Password",
                    type: "password"
                }
            },
            async authorize (credentials) {
                if (!credentials?.email || !credentials?.password) {
                    return null;
                }
                const email = credentials.email;
                const password = credentials.password;
                const user = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].user.findUnique({
                    where: {
                        email
                    }
                });
                if (!user) {
                    return null;
                }
                const isPasswordValid = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$bcryptjs$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].compare(password, user.password);
                if (!isPasswordValid) {
                    return null;
                }
                return {
                    id: user.id,
                    email: user.email,
                    name: user.name,
                    image: user.avatar
                };
            }
        })
    ],
    callbacks: {
        async jwt ({ token, user }) {
            if (user) {
                token.id = user.id;
            }
            return token;
        },
        async session ({ session, token }) {
            if (session.user) {
                session.user.id = token.id;
            }
            return session;
        }
    },
    pages: {
        signIn: "/login"
    },
    session: {
        strategy: "jwt"
    }
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/openai.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "openai",
    ()=>openai
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/openai/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$openai$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OpenAI__as__default$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/openai/client.mjs [app-route] (ecmascript) <export OpenAI as default>");
;
const openai = new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$openai$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OpenAI__as__default$3e$__["default"]({
    apiKey: process.env.OPENAI_API_KEY
});
const __TURBOPACK__default__export__ = openai;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/analytics/performance-analytics.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "calculatePerformanceMetrics",
    ()=>calculatePerformanceMetrics,
    "calculateTrend",
    ()=>calculateTrend,
    "generateInsights",
    ()=>generateInsights,
    "generateRecommendations",
    ()=>generateRecommendations,
    "getPerformanceCategory",
    ()=>getPerformanceCategory,
    "getScoreProgression",
    ()=>getScoreProgression,
    "identifyWeakAreas",
    ()=>identifyWeakAreas,
    "updateUserAnalyticsCache",
    ()=>updateUserAnalyticsCache
]);
/**
 * Performance Analytics Library
 *
 * Core analytics calculations for user performance tracking.
 * Tracks score progression, identifies weak areas, and generates insights.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
// Helper to get score value from dimension key
function getScoreValue(score, dimension) {
    return score[dimension];
}
// Dimension names mapping
const DIMENSION_NAMES = {
    requirementsClarification: "Requirements Clarification",
    highLevelDesign: "High-Level Design",
    detailedDesign: "Detailed Design",
    scalability: "Scalability",
    tradeoffs: "Trade-offs",
    communication: "Communication"
};
const DIMENSION_KEYS = Object.keys(DIMENSION_NAMES);
function calculateTrend(scores) {
    if (scores.length < 3) return "stable";
    // Use linear regression to determine trend
    const n = scores.length;
    let sumX = 0, sumY = 0, sumXY = 0, sumXX = 0;
    for(let i = 0; i < n; i++){
        sumX += i;
        sumY += scores[i];
        sumXY += i * scores[i];
        sumXX += i * i;
    }
    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);
    // Threshold for trend detection
    if (slope > 0.1) return "improving";
    if (slope < -0.1) return "declining";
    return "stable";
}
async function getScoreProgression(userId, dimension, limit = 20) {
    const interviews = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findMany({
        where: {
            userId,
            status: "completed"
        },
        orderBy: {
            endedAt: "asc"
        },
        take: limit,
        include: {
            score: true
        }
    });
    return interviews.filter((i)=>i.score).map((interview)=>({
            date: interview.endedAt?.toISOString() || interview.createdAt.toISOString(),
            overallScore: dimension ? getScoreValue(interview.score, dimension) : interview.score.overallScore,
            passStatus: interview.score.passStatus,
            topic: interview.topic,
            interviewId: interview.id
        }));
}
async function identifyWeakAreas(userId, limit = 10) {
    const interviews = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findMany({
        where: {
            userId,
            status: "completed"
        },
        orderBy: {
            endedAt: "desc"
        },
        take: limit,
        include: {
            score: true
        }
    });
    const dimensionScores = {};
    // Initialize arrays for each dimension
    DIMENSION_KEYS.forEach((key)=>{
        dimensionScores[key] = [];
    });
    // Collect scores for each dimension
    for (const interview of interviews){
        if (!interview.score) continue;
        DIMENSION_KEYS.forEach((key)=>{
            const score = getScoreValue(interview.score, key);
            if (score !== undefined) {
                dimensionScores[key].push(score);
            }
        });
    }
    // Calculate weak areas (avg < 2.5)
    const weakAreas = [];
    for (const [dimension, scores] of Object.entries(dimensionScores)){
        if (scores.length === 0) continue;
        const avgScore = scores.reduce((a, b)=>a + b, 0) / scores.length;
        if (avgScore < 2.5) {
            weakAreas.push({
                dimension: DIMENSION_NAMES[dimension] || dimension,
                avgScore: Number(avgScore.toFixed(2)),
                occurrences: scores.filter((s)=>s < 2.5).length,
                lastScore: scores[0],
                trend: calculateTrend(scores.reverse())
            });
        }
    }
    // Sort by average score (weakest first)
    return weakAreas.sort((a, b)=>a.avgScore - b.avgScore);
}
function generateInsights(metrics) {
    const insights = [];
    // Overall performance insights
    if (metrics.overall.completedInterviews === 0) {
        insights.push("Complete your first interview to start tracking progress!");
        return insights;
    }
    if (metrics.overall.avgScore >= 3.0) {
        insights.push("Your overall performance is strong. You're ready for senior-level interviews.");
    } else if (metrics.overall.avgScore >= 2.5) {
        insights.push("You're performing at a passing level. Focus on your weak areas to improve.");
    } else {
        insights.push("Your scores indicate room for improvement. Consider more practice sessions.");
    }
    // Pass rate insights
    if (metrics.overall.passRate >= 80) {
        insights.push(`Excellent pass rate of ${metrics.overall.passRate.toFixed(0)}%!`);
    } else if (metrics.overall.passRate >= 50) {
        insights.push(`Your pass rate is ${metrics.overall.passRate.toFixed(0)}%. Aim for consistency.`);
    } else if (metrics.overall.completedInterviews >= 3) {
        insights.push(`Pass rate of ${metrics.overall.passRate.toFixed(0)}% needs attention. Review fundamentals.`);
    }
    // Trend insights
    if (metrics.overall.scoreTrend === "improving") {
        insights.push("Your scores are trending upward. Keep up the great work!");
    } else if (metrics.overall.scoreTrend === "declining") {
        insights.push("Your recent scores have declined. Consider reviewing basics.");
    }
    // Dimension-specific insights
    const weakDimensions = Object.entries(metrics.dimensions).filter(([, m])=>m.isWeak).map(([key])=>DIMENSION_NAMES[key] || key);
    if (weakDimensions.length > 0) {
        insights.push(`Focus areas: ${weakDimensions.join(", ")}`);
    }
    const strongDimensions = Object.entries(metrics.dimensions).filter(([, m])=>m.isStrong).map(([key])=>DIMENSION_NAMES[key] || key);
    if (strongDimensions.length > 0) {
        insights.push(`Strong areas: ${strongDimensions.join(", ")}`);
    }
    return insights;
}
function generateRecommendations(metrics) {
    const recommendations = [];
    if (metrics.overall.completedInterviews === 0) {
        recommendations.push("Start with an easy difficulty interview to build confidence.");
        return recommendations;
    }
    // Weak dimension recommendations
    const weakDimensions = Object.entries(metrics.dimensions).filter(([, m])=>m.isWeak).sort((a, b)=>a[1].avgScore - b[1].avgScore);
    for (const [key, dimMetrics] of weakDimensions.slice(0, 2)){
        const name = DIMENSION_NAMES[key] || key;
        switch(key){
            case "requirementsClarification":
                recommendations.push(`Practice asking clarifying questions about scale, users, and constraints.`);
                break;
            case "highLevelDesign":
                recommendations.push(`Study common system design patterns and practice drawing architecture diagrams.`);
                break;
            case "detailedDesign":
                recommendations.push(`Review data modeling, API design, and dive deeper into component internals.`);
                break;
            case "scalability":
                recommendations.push(`Study caching, sharding, load balancing, and horizontal scaling strategies.`);
                break;
            case "tradeoffs":
                recommendations.push(`Practice discussing CAP theorem, consistency vs availability, and cost tradeoffs.`);
                break;
            case "communication":
                recommendations.push(`Practice explaining your thought process clearly and structuring your responses.`);
                break;
            default:
                recommendations.push(`Focus on improving ${name} (current avg: ${dimMetrics.avgScore.toFixed(1)}).`);
        }
    }
    // Interview frequency recommendation
    if (metrics.overall.completedInterviews < 5) {
        recommendations.push("Complete at least 5 interviews to establish reliable patterns.");
    }
    // Difficulty recommendation
    if (metrics.overall.avgScore >= 3.0 && metrics.overall.passRate >= 70) {
        recommendations.push("Consider increasing difficulty to challenge yourself further.");
    } else if (metrics.overall.avgScore < 2.0) {
        recommendations.push("Try easier interviews to build foundational knowledge.");
    }
    return recommendations;
}
async function calculatePerformanceMetrics(userId, limit = 20) {
    // Fetch interview data
    const [totalCount, completedInterviews] = await Promise.all([
        __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.count({
            where: {
                userId
            }
        }),
        __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findMany({
            where: {
                userId,
                status: "completed"
            },
            orderBy: {
                endedAt: "desc"
            },
            take: limit,
            include: {
                score: true
            }
        })
    ]);
    const completedCount = completedInterviews.length;
    const interviewsWithScores = completedInterviews.filter((i)=>i.score);
    // Calculate overall metrics
    let avgScore = 0;
    let passCount = 0;
    const overallScores = [];
    for (const interview of interviewsWithScores){
        avgScore += interview.score.overallScore;
        if (interview.score.passStatus) passCount++;
        overallScores.push(interview.score.overallScore);
    }
    if (interviewsWithScores.length > 0) {
        avgScore /= interviewsWithScores.length;
    }
    const passRate = interviewsWithScores.length > 0 ? passCount / interviewsWithScores.length * 100 : 0;
    // Calculate dimension metrics
    const dimensionMetrics = {};
    for (const key of DIMENSION_KEYS){
        const scores = [];
        for (const interview of interviewsWithScores){
            const score = getScoreValue(interview.score, key);
            if (score !== undefined) {
                scores.push(score);
            }
        }
        if (scores.length > 0) {
            const dimAvg = scores.reduce((a, b)=>a + b, 0) / scores.length;
            dimensionMetrics[key] = {
                avgScore: Number(dimAvg.toFixed(2)),
                trend: calculateTrend(scores.reverse()),
                isWeak: dimAvg < 2.5,
                isStrong: dimAvg >= 3.0,
                recentScores: scores.slice(-5)
            };
        } else {
            dimensionMetrics[key] = {
                avgScore: 0,
                trend: "stable",
                isWeak: false,
                isStrong: false,
                recentScores: []
            };
        }
    }
    // Build recent scores
    const recentScores = interviewsWithScores.map((i)=>({
            date: i.endedAt?.toISOString() || i.createdAt.toISOString(),
            overallScore: i.score.overallScore,
            passStatus: i.score.passStatus,
            topic: i.topic,
            interviewId: i.id
        }));
    // Build metrics object
    const metrics = {
        overall: {
            totalInterviews: totalCount,
            completedInterviews: completedCount,
            avgScore: Number(avgScore.toFixed(2)),
            passRate: Number(passRate.toFixed(1)),
            scoreTrend: calculateTrend(overallScores.reverse())
        },
        dimensions: dimensionMetrics,
        recentScores,
        insights: [],
        recommendations: []
    };
    // Generate insights and recommendations
    metrics.insights = generateInsights(metrics);
    metrics.recommendations = generateRecommendations(metrics);
    return metrics;
}
async function updateUserAnalyticsCache(userId) {
    const metrics = await calculatePerformanceMetrics(userId, 50);
    // Extract weak and strong dimensions
    const weakDimensions = Object.entries(metrics.dimensions).filter(([, m])=>m.isWeak).map(([key])=>key);
    const strongDimensions = Object.entries(metrics.dimensions).filter(([, m])=>m.isStrong).map(([key])=>key);
    // Calculate topic stats
    const topicInterviews = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findMany({
        where: {
            userId,
            status: "completed"
        },
        include: {
            score: true
        }
    });
    const topicStats = {};
    for (const interview of topicInterviews){
        if (!interview.score) continue;
        if (!topicStats[interview.topic]) {
            topicStats[interview.topic] = {
                count: 0,
                totalScore: 0,
                passCount: 0
            };
        }
        topicStats[interview.topic].count++;
        topicStats[interview.topic].totalScore += interview.score.overallScore;
        if (interview.score.passStatus) {
            topicStats[interview.topic].passCount++;
        }
    }
    // Convert to final format
    const finalTopicStats = {};
    for (const [topic, stats] of Object.entries(topicStats)){
        finalTopicStats[topic] = {
            count: stats.count,
            avgScore: Number((stats.totalScore / stats.count).toFixed(2)),
            passRate: Number((stats.passCount / stats.count * 100).toFixed(1))
        };
    }
    // Upsert analytics record
    await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].userAnalytics.upsert({
        where: {
            userId
        },
        create: {
            userId,
            totalInterviews: metrics.overall.totalInterviews,
            completedInterviews: metrics.overall.completedInterviews,
            avgOverallScore: metrics.overall.avgScore,
            passRate: metrics.overall.passRate,
            weakDimensions: JSON.stringify(weakDimensions),
            strongDimensions: JSON.stringify(strongDimensions),
            topicStats: JSON.stringify(finalTopicStats),
            scoreTrend: metrics.overall.scoreTrend,
            lastCalculatedAt: new Date()
        },
        update: {
            totalInterviews: metrics.overall.totalInterviews,
            completedInterviews: metrics.overall.completedInterviews,
            avgOverallScore: metrics.overall.avgScore,
            passRate: metrics.overall.passRate,
            weakDimensions: JSON.stringify(weakDimensions),
            strongDimensions: JSON.stringify(strongDimensions),
            topicStats: JSON.stringify(finalTopicStats),
            scoreTrend: metrics.overall.scoreTrend,
            lastCalculatedAt: new Date()
        }
    });
}
function getPerformanceCategory(avgScore) {
    if (avgScore < 2.0) return "struggling";
    if (avgScore < 2.5) return "developing";
    if (avgScore < 3.0) return "proficient";
    return "excelling";
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/followup-engine.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "buildFollowUpContext",
    ()=>buildFollowUpContext,
    "generateFollowUpPromptAddition",
    ()=>generateFollowUpPromptAddition,
    "getWeakPointsForUser",
    ()=>getWeakPointsForUser,
    "trackConceptImprovement",
    ()=>trackConceptImprovement
]);
/**
 * Follow-up Questions Engine
 *
 * Generates follow-up questions based on past weak points.
 * AI remembers previous attempts and asks about past weak points.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/analytics/performance-analytics.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
// Helper to get score value from dimension key
function getScoreValue(score, dimension) {
    return score[dimension];
}
// Dimension to concept mapping
const DIMENSION_CONCEPTS = {
    requirementsClarification: [
        "scale estimation (DAU, QPS)",
        "functional vs non-functional requirements",
        "latency and availability requirements",
        "data consistency requirements",
        "feature prioritization"
    ],
    highLevelDesign: [
        "API design and endpoints",
        "component architecture",
        "database selection",
        "data flow between components",
        "service boundaries"
    ],
    detailedDesign: [
        "data models and schemas",
        "algorithm choices",
        "caching strategies",
        "protocol selection",
        "failure handling"
    ],
    scalability: [
        "horizontal vs vertical scaling",
        "database sharding",
        "load balancing strategies",
        "caching layers",
        "CDN usage"
    ],
    tradeoffs: [
        "CAP theorem implications",
        "consistency vs availability",
        "cost vs performance",
        "latency vs throughput",
        "complexity vs maintainability"
    ],
    communication: [
        "structured thinking",
        "clear explanations",
        "diagram usage",
        "time management",
        "handling clarifications"
    ]
};
// Dimension names
const DIMENSION_NAMES = {
    requirementsClarification: "Requirements Clarification",
    highLevelDesign: "High-Level Design",
    detailedDesign: "Detailed Design",
    scalability: "Scalability",
    tradeoffs: "Trade-offs",
    communication: "Communication"
};
async function getWeakPointsForUser(userId, limit = 10) {
    const weakAreas = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["identifyWeakAreas"])(userId, limit);
    // Convert weak areas to weak points with concepts
    const weakPoints = [];
    for (const area of weakAreas){
        // Find the dimension key from the display name
        const dimensionKey = Object.entries(DIMENSION_NAMES).find(([, name])=>name === area.dimension)?.[0];
        if (!dimensionKey) continue;
        const concepts = DIMENSION_CONCEPTS[dimensionKey] || [];
        // Select 1-2 relevant concepts to probe based on the weak area
        const conceptsToProbe = concepts.slice(0, 2);
        weakPoints.push({
            dimension: area.dimension,
            dimensionKey,
            topic: "",
            concept: conceptsToProbe.join(", "),
            lastScore: area.lastScore,
            occurrences: area.occurrences,
            trend: area.trend
        });
    }
    return weakPoints;
}
async function buildFollowUpContext(userId, currentTopic) {
    // Get performance metrics
    const metrics = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["calculatePerformanceMetrics"])(userId, 15);
    // Get weak points
    const weakPoints = await getWeakPointsForUser(userId, 10);
    // Get topics that need reinforcement
    const topicInterviews = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findMany({
        where: {
            userId,
            status: "completed"
        },
        include: {
            score: true
        },
        orderBy: {
            endedAt: "desc"
        },
        take: 20
    });
    // Find topics with low pass rates
    const topicStats = {};
    for (const interview of topicInterviews){
        if (!interview.score) continue;
        if (!topicStats[interview.topic]) {
            topicStats[interview.topic] = {
                total: 0,
                passed: 0
            };
        }
        topicStats[interview.topic].total++;
        if (interview.score.passStatus) {
            topicStats[interview.topic].passed++;
        }
    }
    const topicsToReinforce = Object.entries(topicStats).filter(([, stats])=>stats.total >= 2 && stats.passed / stats.total < 0.5).map(([topic])=>topic);
    // Determine concepts to probe based on weak points
    const conceptsToProbe = [];
    for (const wp of weakPoints.slice(0, 3)){
        const concepts = DIMENSION_CONCEPTS[wp.dimensionKey] || [];
        conceptsToProbe.push(...concepts.slice(0, 2));
    }
    // Determine difficulty adaptation
    let adaptedDifficulty = "standard";
    if (metrics.overall.avgScore < 2.0) {
        adaptedDifficulty = "easier";
    } else if (metrics.overall.avgScore >= 3.0 && metrics.overall.passRate >= 70) {
        adaptedDifficulty = "harder";
    }
    return {
        weakPoints,
        topicsToReinforce,
        conceptsToProbe: [
            ...new Set(conceptsToProbe)
        ],
        adaptedDifficulty,
        hasHistory: metrics.overall.completedInterviews > 0,
        totalPastInterviews: metrics.overall.completedInterviews
    };
}
function generateFollowUpPromptAddition(context) {
    if (!context.hasHistory || context.weakPoints.length === 0) {
        return "";
    }
    let prompt = `
## Candidate's Past Performance Context

This candidate has completed ${context.totalPastInterviews} previous interview${context.totalPastInterviews === 1 ? "" : "s"}.

### Weak Areas to Focus On
`;
    for (const wp of context.weakPoints.slice(0, 3)){
        prompt += `- **${wp.dimension}** (avg score: ${wp.lastScore}/4, trend: ${wp.trend})
  - Concepts to probe: ${wp.concept}
`;
    }
    if (context.conceptsToProbe.length > 0) {
        prompt += `
### Specific Concepts to Cover
During the interview, make sure to ask about:
${context.conceptsToProbe.map((c)=>`- ${c}`).join("\n")}
`;
    }
    if (context.topicsToReinforce.length > 0) {
        prompt += `
### Related Topics With Low Performance
The candidate has struggled with these related topics: ${context.topicsToReinforce.join(", ")}
Consider asking questions that reinforce fundamentals from these areas.
`;
    }
    prompt += `
### Adaptation Instructions
- Difficulty adaptation: ${context.adaptedDifficulty}
${context.adaptedDifficulty === "easier" ? "- Provide more hints and guidance for this candidate" : ""}
${context.adaptedDifficulty === "harder" ? "- Challenge this candidate with edge cases and deeper probing" : ""}
- When the candidate answers questions related to their weak areas, probe deeper
- Acknowledge improvement if they perform better on previously weak dimensions
`;
    return prompt;
}
async function trackConceptImprovement(userId, interviewId, dimension, newScore) {
    // Get the previous score for this dimension
    const previousInterviews = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findMany({
        where: {
            userId,
            status: "completed",
            id: {
                not: interviewId
            }
        },
        include: {
            score: true
        },
        orderBy: {
            endedAt: "desc"
        },
        take: 5
    });
    const previousScores = previousInterviews.filter((i)=>i.score).map((i)=>getScoreValue(i.score, dimension)).filter((s)=>s !== undefined);
    if (previousScores.length === 0) {
        return {
            improved: false,
            previousScore: null
        };
    }
    const previousAvg = previousScores.reduce((a, b)=>a + b, 0) / previousScores.length;
    return {
        improved: newScore > previousAvg,
        previousScore: Number(previousAvg.toFixed(2))
    };
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/prompts/interviewer.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "INTERVIEWER_SYSTEM_PROMPT",
    ()=>INTERVIEWER_SYSTEM_PROMPT,
    "INTERVIEW_PHASES",
    ()=>INTERVIEW_PHASES,
    "PHASE_ANALYSIS_PROMPT",
    ()=>PHASE_ANALYSIS_PROMPT,
    "SCORING_PROMPT",
    ()=>SCORING_PROMPT,
    "getInterviewPrompt",
    ()=>getInterviewPrompt,
    "getPersonalizedInterviewPrompt",
    ()=>getPersonalizedInterviewPrompt,
    "getPhaseAnalysisPrompt",
    ()=>getPhaseAnalysisPrompt
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$followup$2d$engine$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/followup-engine.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$followup$2d$engine$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$followup$2d$engine$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
const INTERVIEW_PHASES = [
    {
        id: "requirements",
        name: "Requirements Clarification",
        duration: 8,
        startTime: 45,
        endTime: 37,
        description: "Understand the problem scope, scale, and constraints",
        keyPoints: [
            "Clarify functional requirements",
            "Understand scale (users, QPS, data size)",
            "Identify non-functional requirements (latency, availability)",
            "Prioritize features"
        ]
    },
    {
        id: "high-level",
        name: "High-Level Design",
        duration: 12,
        startTime: 37,
        endTime: 25,
        description: "Design the overall system architecture",
        keyPoints: [
            "Draw core components",
            "Define APIs",
            "Explain data flow",
            "Choose databases and storage"
        ]
    },
    {
        id: "deep-dive",
        name: "Deep Dive",
        duration: 12,
        startTime: 25,
        endTime: 13,
        description: "Explore critical components in detail",
        keyPoints: [
            "Data models and schemas",
            "Algorithms and protocols",
            "Failure handling",
            "Edge cases"
        ]
    },
    {
        id: "scalability",
        name: "Scalability & Trade-offs",
        duration: 10,
        startTime: 13,
        endTime: 3,
        description: "Discuss scaling and architectural decisions",
        keyPoints: [
            "Handle 10x-100x growth",
            "Caching strategies",
            "CAP theorem implications",
            "Cost vs performance"
        ]
    },
    {
        id: "wrapup",
        name: "Wrap-up",
        duration: 3,
        startTime: 3,
        endTime: 0,
        description: "Final questions and summary",
        keyPoints: [
            "Address remaining concerns",
            "Candidate questions",
            "Summary of design"
        ]
    }
];
const INTERVIEWER_SYSTEM_PROMPT = `You are Bobby, a friendly and experienced FAANG system design interviewer with 10+ years of experience at companies like Google, Meta, Amazon, Netflix, and Uber. Your role is to conduct a realistic 45-minute system design interview.

## Your Personality as Bobby
- Be warm, encouraging, and professional
- Use a conversational tone while maintaining technical rigor
- Occasionally use phrases like "Great point!", "That's interesting...", "I like that approach"
- Introduce yourself as Bobby at the start of the interview

## Interview Structure (45 minutes total)

### Phase 1: Requirements Clarification (Minutes 45:00 - 37:00) [8 min]
- Ask about scale (DAU, requests/sec, data size)
- Clarify functional vs non-functional requirements
- Understand use cases and priorities
- Key questions:
  * "What's the expected scale? DAU, requests per second?"
  * "What are the most critical features we need to support?"
  * "What are our latency requirements?"
  * "Do we need strong consistency or is eventual consistency okay?"

### Phase 2: High-Level Design (Minutes 37:00 - 25:00) [12 min]
- Guide them to draw core components
- Discuss API design
- Cover data flow between components
- Key questions:
  * "Can you walk me through the high-level architecture?"
  * "What databases would you use and why?"
  * "How would data flow from client to storage?"

### Phase 3: Deep Dive (Minutes 25:00 - 13:00) [12 min]
- Pick 2-3 critical components to explore in detail
- Ask about data models, algorithms, protocols
- Discuss failure scenarios and edge cases
- Key questions:
  * "Let's dive deeper into [component]. How would you implement it?"
  * "What happens if [failure scenario]?"
  * "How would you handle [edge case]?"

### Phase 4: Scalability & Trade-offs (Minutes 13:00 - 3:00) [10 min]
- How does it handle 10x, 100x scale?
- CAP theorem implications
- Cost vs performance tradeoffs
- Key questions:
  * "How would this design change if we had 100x the users?"
  * "What are the bottlenecks in this design?"
  * "What trade-offs are you making here?"

### Phase 5: Wrap-up (Minutes 3:00 - 0:00) [3 min]
- Address any remaining concerns
- Allow candidate to ask questions
- Summarize the design

## Bobby's Interview Style

1. **Be conversational and supportive** - Guide the candidate through each phase while being encouraging
2. **Ask probing questions** - Push candidates to think deeper with genuine curiosity
3. **Focus on tradeoffs** - There's no single right answer; evaluate reasoning
4. **Manage time** - Gently transition between phases to cover all areas
5. **Adapt to responses** - If they struggle, provide hints; if they excel, go deeper
6. **Stay positive** - Even when challenging decisions, do so constructively

## Phase Transition Signals

When you determine it's time to move to the next phase, include this marker in your response:
[PHASE_TRANSITION: <next_phase_id>]

For example: [PHASE_TRANSITION: high-level]

Only use these phase IDs: requirements, high-level, deep-dive, scalability, wrapup

## Important Rules

- DO NOT give away answers - guide them with questions
- DO NOT be overly positive - be professional and objective
- DO challenge their decisions - "Why not use X instead?"
- DO acknowledge good points - "That's a good consideration"
- DO redirect if they go off track - "Let's focus on the core flow first"
- DO manage time - transition phases appropriately
- KEEP responses concise - 2-4 sentences, then ask 1-2 questions

## CRITICAL: Phase Boundary Enforcement

**YOU MUST STRICTLY STAY WITHIN THE CURRENT PHASE. DO NOT JUMP AHEAD OR GO BACKWARDS.**

- **In Requirements Phase (45:00-37:00)**: ONLY ask about scale, functional/non-functional requirements, priorities. DO NOT ask about architecture, databases, or implementation details yet.
- **In High-Level Design Phase (37:00-25:00)**: ONLY ask about overall architecture, main components, API design, and data flow. DO NOT dive into implementation details, algorithms, or schemas yet.
- **In Deep Dive Phase (25:00-13:00)**: NOW you can ask about data models, algorithms, protocols, and implementation details. DO NOT ask about scalability or caching yet.
- **In Scalability Phase (13:00-3:00)**: NOW you can ask about scaling strategies, caching, sharding, load balancing, and performance optimization.
- **In Wrap-up Phase (3:00-0:00)**: Summarize, answer candidate questions, discuss any remaining concerns.

**If the candidate jumps ahead** (e.g., talks about caching in requirements phase), acknowledge briefly but redirect: "That's an interesting point about caching, but let's first clarify the requirements. We'll discuss optimization strategies later."

**If the candidate is stuck**, provide hints ONLY related to the current phase. Don't hint at future phases.

## Response Format

Keep responses focused. React to their answer, provide brief feedback, then ask the next question. If transitioning phases, acknowledge the transition naturally.`;
const getInterviewPrompt = (topic, difficulty)=>{
    const difficultyGuide = {
        easy: "Be more guiding and provide more hints. Focus on basic concepts. Allow more time for explanations.",
        medium: "Balance between guidance and challenge. Standard FAANG interview depth.",
        hard: "Be more challenging. Ask about edge cases, failure modes, and push for optimal solutions. Expect quick, precise answers."
    };
    return `${INTERVIEWER_SYSTEM_PROMPT}

## Current Interview

**Topic:** ${topic}
**Difficulty:** ${difficulty}
**Approach:** ${difficultyGuide[difficulty]}

Begin the interview now. Introduce yourself as Bobby, briefly introduce the problem, and start with requirements clarification. Ask what clarifying questions they have about the system.`;
};
const PHASE_ANALYSIS_PROMPT = `You are analyzing a specific phase of a system design interview. Evaluate the candidate's performance in this phase only.

## CRITICAL EVALUATION RULES

**IMPORTANT: You MUST evaluate based ONLY on what the USER (candidate) actually said. Do NOT give credit for things the ASSISTANT (interviewer) mentioned.**

1. **If the candidate provided NO responses or only said "hello", "ok", "yes" - score MUST be 1**
2. **If the candidate gave vague/incomplete answers - score should be 1-2**
3. **Only give scores of 3-4 if candidate demonstrated clear technical knowledge**

## Phase Being Evaluated: {{PHASE_NAME}}

## Scoring Scale (1-4)
- 4 (Excellent): Candidate provided detailed, expert-level technical responses
- 3 (Good): Candidate showed solid understanding through their explanations
- 2 (Needs Work): Candidate gave partial/vague answers
- 1 (Poor): Candidate did not provide meaningful technical responses

## Evaluation Criteria for {{PHASE_NAME}}:
{{PHASE_CRITERIA}}

**If the candidate did not address these criteria in their responses, the score is 1.**

## Response Format
Return ONLY valid JSON:
{
  "phase": "{{PHASE_ID}}",
  "score": <1-4>,
  "summary": "<2-3 sentence evaluation - be honest if candidate didn't respond>",
  "strengths": ["<strength 1>", "<strength 2>"],
  "improvements": ["<area 1>", "<area 2>"],
  "keyObservations": ["<observation 1>", "<observation 2>"]
}`;
const getPhaseAnalysisPrompt = (phaseId, phaseName)=>{
    const phaseCriteria = {
        requirements: `
- Did they ask about scale (users, QPS, data volume)?
- Did they clarify functional requirements?
- Did they identify non-functional requirements (latency, availability, consistency)?
- Did they prioritize features appropriately?
- Did they ask about constraints and edge cases?`,
        "high-level": `
- Is the architecture sound and complete?
- Are components well-defined with clear responsibilities?
- Is the API design reasonable?
- Did they choose appropriate databases/storage?
- Is the data flow logical and efficient?`,
        "deep-dive": `
- Can they explain component internals?
- Do they understand data models and schemas?
- Did they address failure scenarios?
- Did they consider edge cases?
- Do they know relevant algorithms/protocols?`,
        scalability: `
- Do they understand horizontal vs vertical scaling?
- Did they propose caching strategies?
- Did they discuss sharding/partitioning?
- Did they address load balancing?
- Can they reason about 10x-100x growth?`,
        wrapup: `
- Did they summarize the design clearly?
- Did they acknowledge trade-offs made?
- Were they open to feedback?
- Did they ask thoughtful questions?`
    };
    return PHASE_ANALYSIS_PROMPT.replace(/{{PHASE_NAME}}/g, phaseName).replace(/{{PHASE_ID}}/g, phaseId).replace(/{{PHASE_CRITERIA}}/g, phaseCriteria[phaseId] || "");
};
const getPersonalizedInterviewPrompt = (topic, difficulty, personality, followUpContext)=>{
    const difficultyGuide = {
        easy: "Be more guiding and provide more hints. Focus on basic concepts. Allow more time for explanations.",
        medium: "Balance between guidance and challenge. Standard FAANG interview depth.",
        hard: "Be more challenging. Ask about edge cases, failure modes, and push for optimal solutions. Expect quick, precise answers."
    };
    // Build the follow-up context section
    const followUpSection = followUpContext ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$followup$2d$engine$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateFollowUpPromptAddition"])(followUpContext) : "";
    return `${INTERVIEWER_SYSTEM_PROMPT}

${personality.promptModifications}
${followUpSection}
## Current Interview

**Topic:** ${topic}
**Difficulty:** ${difficulty}
**Approach:** ${difficultyGuide[difficulty] || difficultyGuide.medium}

Begin the interview now. Introduce yourself as Bobby, briefly introduce the problem, and start with requirements clarification. Ask what clarifying questions they have about the system.`;
};
const SCORING_PROMPT = `You are evaluating a complete 45-minute system design interview. Based on the entire conversation, give a final comprehensive evaluation.

## CRITICAL EVALUATION RULES

**IMPORTANT: You MUST evaluate based ONLY on what the USER (candidate) actually said. Do NOT give credit for things the ASSISTANT (interviewer) mentioned.**

1. **If the candidate provided NO substantive responses or only said things like "hello", "ok", "yes" without any technical content, ALL dimension scores MUST be 1.**
2. **If the candidate gave only brief/incomplete answers, scores should be 1-2.**
3. **Only give scores of 3-4 if the candidate demonstrated clear technical knowledge through their own explanations.**
4. **Count the actual technical responses from the USER. Short acknowledgments don't count as responses.**

## Scoring Scale
- 4 (Strong Hire): Exceeds expectations, demonstrates expertise with detailed technical explanations
- 3 (Hire): Meets expectations, solid understanding shown through their responses
- 2 (Lean No Hire): Below expectations, only partial/vague answers provided
- 1 (No Hire): Does not meet basic requirements - no meaningful technical responses given

## Dimensions to Evaluate

1. **Requirements Clarification (10%)**
   - Did the CANDIDATE ask about scale, users, data size?
   - Did the CANDIDATE clarify functional vs non-functional requirements?
   - If the candidate didn't ask clarifying questions, score is 1.

2. **High-Level Design (20%)**
   - Did the CANDIDATE describe an architecture?
   - Did the CANDIDATE explain components and their responsibilities?
   - If the candidate didn't propose any design, score is 1.

3. **Detailed Design (15%)**
   - Did the CANDIDATE explain component internals?
   - Did the CANDIDATE discuss data models and algorithms?
   - If the candidate didn't go into any details, score is 1.

4. **Scalability (20%)**
   - Did the CANDIDATE discuss scaling strategies?
   - Did the CANDIDATE propose caching, sharding, load balancing?
   - If the candidate didn't address scalability, score is 1.

5. **Tradeoffs (25%)**
   - Did the CANDIDATE reason about tradeoffs?
   - Did the CANDIDATE compare alternatives?
   - If the candidate didn't discuss any tradeoffs, score is 1.

6. **Communication (10%)**
   - Did the CANDIDATE communicate clearly?
   - If the candidate barely spoke, score is 1.

## Response Format

Return a JSON object with:
{
  "candidateResponseCount": <number of substantive technical responses from the user>,
  "requirementsClarification": <1-4>,
  "highLevelDesign": <1-4>,
  "detailedDesign": <1-4>,
  "scalability": <1-4>,
  "tradeoffs": <1-4>,
  "communication": <1-4>,
  "overallScore": <weighted average>,
  "passStatus": <true ONLY if average >= 2.5 AND no dimension below 2 AND tradeoffs >= 3 AND candidateResponseCount >= 5>,
  "feedback": {
    "requirementsClarification": "<specific feedback based on what candidate said>",
    "highLevelDesign": "<specific feedback based on what candidate said>",
    "detailedDesign": "<specific feedback based on what candidate said>",
    "scalability": "<specific feedback based on what candidate said>",
    "tradeoffs": "<specific feedback based on what candidate said>",
    "communication": "<specific feedback based on what candidate said>",
    "overallFeedback": "<2-3 sentence summary - be honest if candidate didn't participate>",
    "strengths": ["<strength 1>", "<strength 2>"],
    "improvements": ["<improvement 1>", "<improvement 2>"]
  }
}

Return ONLY valid JSON.`;
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/redis.ts [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CACHE_KEYS",
    ()=>CACHE_KEYS,
    "CACHE_TTL",
    ()=>CACHE_TTL,
    "getRedisClient",
    ()=>getRedisClient,
    "isRedisAvailable",
    ()=>isRedisAvailable
]);
/**
 * Redis Client using Upstash
 *
 * Provides a singleton Redis client for caching.
 * Falls back gracefully if Redis is not configured.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$upstash$2f$redis$2f$nodejs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/@upstash/redis/nodejs.mjs [app-route] (ecmascript) <locals>");
;
const CACHE_KEYS = {
    USER_ANALYTICS: "analytics:user:",
    LEADERBOARD: "leaderboard:",
    OLLAMA_HEALTH: "ollama:health",
    INTERVIEW_QUESTIONS: "questions:"
};
const CACHE_TTL = {
    USER_ANALYTICS: 5 * 60,
    LEADERBOARD: 60,
    OLLAMA_HEALTH: 30,
    INTERVIEW_QUESTIONS: 60 * 60
};
// Check if Redis is configured
const isRedisConfigured = ()=>{
    return !!(process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN);
};
// Create Redis client singleton
let redisClient = null;
function getRedisClient() {
    if (!isRedisConfigured()) {
        return null;
    }
    if (!redisClient) {
        redisClient = new __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f40$upstash$2f$redis$2f$nodejs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Redis"]({
            url: process.env.UPSTASH_REDIS_REST_URL,
            token: process.env.UPSTASH_REDIS_REST_TOKEN
        });
    }
    return redisClient;
}
function isRedisAvailable() {
    return isRedisConfigured();
}
;
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/lib/rate-limit.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "RATE_LIMITS",
    ()=>RATE_LIMITS,
    "addRateLimitHeaders",
    ()=>addRateLimitHeaders,
    "checkRateLimit",
    ()=>checkRateLimit,
    "rateLimit",
    ()=>rateLimit
]);
/**
 * Rate Limiting Utility
 *
 * Sliding window rate limiter using Upstash Redis.
 * Falls back to in-memory storage when Redis is not configured.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$redis$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/redis.ts [app-route] (ecmascript) <locals>");
;
;
const RATE_LIMITS = {
    /** Auth routes (login, register) - strict to prevent brute force */ AUTH: {
        limit: 5,
        window: 60
    },
    /** Password change - very strict */ PASSWORD: {
        limit: 3,
        window: 60
    },
    /** Resource creation (interviews, challenges) - moderate */ CREATE: {
        limit: 10,
        window: 60
    },
    /** Chat/interaction endpoints - higher limit */ CHAT: {
        limit: 30,
        window: 60
    },
    /** Code submission - moderate */ SUBMIT: {
        limit: 20,
        window: 60
    },
    /** Read/list endpoints - generous */ READ: {
        limit: 60,
        window: 60
    },
    /** File upload - strict */ UPLOAD: {
        limit: 5,
        window: 60
    },
    /** AI/LLM endpoints (expensive) - moderate */ AI: {
        limit: 10,
        window: 60
    }
};
// In-memory fallback store
const memoryStore = new Map();
// Clean up expired entries periodically
setInterval(()=>{
    const now = Date.now();
    for (const [key, value] of memoryStore){
        if (value.resetAt <= now) {
            memoryStore.delete(key);
        }
    }
}, 60_000);
/**
 * Extract client identifier from request.
 * Uses IP address for unauthenticated requests.
 */ function getClientIp(request) {
    const forwarded = request.headers.get("x-forwarded-for");
    if (forwarded) {
        return forwarded.split(",")[0].trim();
    }
    const realIp = request.headers.get("x-real-ip");
    if (realIp) {
        return realIp;
    }
    return "127.0.0.1";
}
/**
 * Check rate limit using Redis sliding window.
 */ async function checkRedisRateLimit(key, config) {
    const redis = (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$redis$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getRedisClient"])();
    if (!redis) {
        return {
            success: true,
            limit: config.limit,
            remaining: config.limit,
            reset: 0
        };
    }
    const now = Date.now();
    const windowMs = config.window * 1000;
    const windowStart = now - windowMs;
    // Use a sorted set for sliding window
    const redisKey = `ratelimit:${key}`;
    // Pipeline: remove old entries, add current, count, set expiry
    const pipeline = redis.pipeline();
    pipeline.zremrangebyscore(redisKey, 0, windowStart);
    pipeline.zadd(redisKey, {
        score: now,
        member: `${now}:${Math.random()}`
    });
    pipeline.zcard(redisKey);
    pipeline.expire(redisKey, config.window);
    const results = await pipeline.exec();
    const count = results[2] || 0;
    const reset = Math.ceil((now + windowMs) / 1000);
    const remaining = Math.max(0, config.limit - count);
    const success = count <= config.limit;
    return {
        success,
        limit: config.limit,
        remaining,
        reset
    };
}
/**
 * Check rate limit using in-memory store (fallback).
 */ function checkMemoryRateLimit(key, config) {
    const now = Date.now();
    const windowMs = config.window * 1000;
    const storeKey = `ratelimit:${key}`;
    const entry = memoryStore.get(storeKey);
    if (!entry || entry.resetAt <= now) {
        // New window
        memoryStore.set(storeKey, {
            count: 1,
            resetAt: now + windowMs
        });
        return {
            success: true,
            limit: config.limit,
            remaining: config.limit - 1,
            reset: Math.ceil((now + windowMs) / 1000)
        };
    }
    entry.count++;
    const remaining = Math.max(0, config.limit - entry.count);
    const success = entry.count <= config.limit;
    return {
        success,
        limit: config.limit,
        remaining,
        reset: Math.ceil(entry.resetAt / 1000)
    };
}
async function checkRateLimit(identifier, config) {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$redis$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["isRedisAvailable"])()) {
        try {
            return await checkRedisRateLimit(identifier, config);
        } catch (error) {
            console.error("Redis rate limit error, falling back to memory:", error);
            return checkMemoryRateLimit(identifier, config);
        }
    }
    return checkMemoryRateLimit(identifier, config);
}
async function rateLimit(request, config, keyPrefix, userId) {
    const identifier = userId || getClientIp(request);
    const key = `${keyPrefix}:${identifier}`;
    const result = await checkRateLimit(key, config);
    if (!result.success) {
        const retryAfter = Math.max(1, result.reset - Math.ceil(Date.now() / 1000));
        return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Too many requests",
            message: "Rate limit exceeded. Please try again later.",
            retryAfter
        }, {
            status: 429,
            headers: {
                "Retry-After": String(retryAfter),
                "X-RateLimit-Limit": String(result.limit),
                "X-RateLimit-Remaining": "0",
                "X-RateLimit-Reset": String(result.reset)
            }
        });
    }
    return null;
}
function addRateLimitHeaders(response, result) {
    response.headers.set("X-RateLimit-Limit", String(result.limit));
    response.headers.set("X-RateLimit-Remaining", String(result.remaining));
    response.headers.set("X-RateLimit-Reset", String(result.reset));
    return response;
}
}),
"[project]/Documents/Git/system-design/system-design-simulator/src/app/api/interview/[id]/end/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "POST",
    ()=>POST
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/auth.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prisma.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$openai$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/openai.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prompts$2f$interviewer$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/prompts/interviewer.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/analytics/performance-analytics.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$rate$2d$limit$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/Documents/Git/system-design/system-design-simulator/src/lib/rate-limit.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prompts$2f$interviewer$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prompts$2f$interviewer$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
;
;
;
;
;
async function POST(request, { params }) {
    try {
        const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
        if (!session?.user?.id) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Unauthorized"
            }, {
                status: 401
            });
        }
        const rateLimitResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$rate$2d$limit$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["rateLimit"])(request, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$rate$2d$limit$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["RATE_LIMITS"].AI, "api:interview:end", session.user.id);
        if (rateLimitResponse) return rateLimitResponse;
        const { id } = await params;
        // Verify ownership and get interview with messages
        const interview = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.findFirst({
            where: {
                id,
                userId: session.user.id
            },
            include: {
                messages: {
                    orderBy: {
                        timestamp: "asc"
                    }
                }
            }
        });
        if (!interview) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Interview not found"
            }, {
                status: 404
            });
        }
        if (interview.status === "completed") {
            return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Interview already completed"
            }, {
                status: 400
            });
        }
        // Build conversation for scoring
        const userMessages = interview.messages.filter((m)=>m.role === "user");
        const assistantMessages = interview.messages.filter((m)=>m.role === "assistant");
        // Count substantive user messages (more than just short acknowledgments)
        const substantiveUserMessages = userMessages.filter((m)=>m.content.trim().split(/\s+/).length > 10 // More than 10 words
        );
        const conversationText = interview.messages.filter((m)=>m.role !== "system").map((m)=>`${m.role.toUpperCase()}: ${m.content}`).join("\n\n");
        // Determine which phases were actually completed
        const completedPhases = [];
        if (interview.phaseTransitions) {
            const transitions = JSON.parse(interview.phaseTransitions);
            completedPhases.push(...transitions.map((t)=>t.phase));
        }
        // Map phase names to dimension names
        const phaseMapping = {
            "Requirements Clarification": "requirementsClarification",
            "High-Level Design": "highLevelDesign",
            "Deep Dive": "detailedDesign",
            "Scalability & Trade-offs": "scalability",
            "Wrap-up": "communication"
        };
        // Build phase completion message for AI
        const phaseCompletionInfo = `
## Phases Actually Completed
${completedPhases.length > 0 ? completedPhases.map((p)=>`- ${p}`).join('\n') : '- None (interview ended early)'}

**CRITICAL SCORING RULE:** 
- ONLY evaluate and score phases that were actually completed (listed above)
- For phases NOT completed, you MUST assign a score of 1
- For example, if only "Requirements Clarification" and "High-Level Design" were completed:
  * Score requirementsClarification and highLevelDesign based on performance
  * detailedDesign MUST be 1
  * scalability MUST be 1
  * tradeoffs MUST be 1 (unless discussed in completed phases)
  * communication can be scored based on overall communication in completed phases

Do NOT give credit for phases that were never reached.
`;
        // Add metadata about message counts to help AI evaluate accurately
        const messageStats = `
## Interview Statistics
- Total user messages: ${userMessages.length}
- Substantive user responses (>10 words): ${substantiveUserMessages.length}
- Total interviewer questions: ${assistantMessages.length}

**IMPORTANT: If substantive user responses is 0 or very low, the candidate did not meaningfully participate. Score ALL dimensions as 1.**
`;
        // Get AI scoring
        const completion = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$openai$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["openai"].chat.completions.create({
            model: "gpt-4o-mini",
            messages: [
                {
                    role: "system",
                    content: __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prompts$2f$interviewer$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SCORING_PROMPT"]
                },
                {
                    role: "user",
                    content: `Interview Topic: ${interview.topic}\n${phaseCompletionInfo}\n${messageStats}\n\nConversation:\n${conversationText}`
                }
            ],
            response_format: {
                type: "json_object"
            },
            max_tokens: 1500
        });
        const scoreText = completion.choices[0]?.message?.content;
        if (!scoreText) {
            throw new Error("Failed to generate score");
        }
        const scoreData = JSON.parse(scoreText);
        // Calculate weighted overall score
        const weights = {
            requirementsClarification: 0.10,
            highLevelDesign: 0.20,
            detailedDesign: 0.15,
            scalability: 0.20,
            tradeoffs: 0.25,
            communication: 0.10
        };
        const overallScore = scoreData.requirementsClarification * weights.requirementsClarification + scoreData.highLevelDesign * weights.highLevelDesign + scoreData.detailedDesign * weights.detailedDesign + scoreData.scalability * weights.scalability + scoreData.tradeoffs * weights.tradeoffs + scoreData.communication * weights.communication;
        // Determine pass status
        const allDimensions = [
            scoreData.requirementsClarification,
            scoreData.highLevelDesign,
            scoreData.detailedDesign,
            scoreData.scalability,
            scoreData.tradeoffs,
            scoreData.communication
        ];
        const passStatus = overallScore >= 2.5 && allDimensions.every((d)=>d >= 2) && scoreData.tradeoffs >= 3;
        // Calculate phase durations from transitions
        let phaseDurations = {};
        if (interview.phaseTransitions) {
            const transitions = JSON.parse(interview.phaseTransitions);
            for (const transition of transitions){
                const endTime = transition.endedAt || new Date().toISOString();
                const duration = Math.round((new Date(endTime).getTime() - new Date(transition.startedAt).getTime()) / 1000);
                phaseDurations[transition.phase] = duration;
            }
        }
        // Create score record
        const score = await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].score.create({
            data: {
                interviewId: id,
                requirementsClarification: scoreData.requirementsClarification,
                highLevelDesign: scoreData.highLevelDesign,
                detailedDesign: scoreData.detailedDesign,
                scalability: scoreData.scalability,
                tradeoffs: scoreData.tradeoffs,
                communication: scoreData.communication,
                overallScore,
                passStatus,
                feedback: JSON.stringify(scoreData.feedback)
            }
        });
        // Update interview status with phase durations
        await __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$prisma$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["prisma"].interview.update({
            where: {
                id
            },
            data: {
                status: "completed",
                endedAt: new Date(),
                phaseDurations: Object.keys(phaseDurations).length > 0 ? JSON.stringify(phaseDurations) : null
            }
        });
        // Update user analytics cache (async, don't wait)
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$src$2f$lib$2f$analytics$2f$performance$2d$analytics$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateUserAnalyticsCache"])(session.user.id).catch((err)=>console.error("Failed to update analytics cache:", err));
        return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            score: {
                ...score,
                feedback: scoreData.feedback
            }
        });
    } catch (error) {
        console.error("End interview error:", error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$Documents$2f$Git$2f$system$2d$design$2f$system$2d$design$2d$simulator$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Internal server error"
        }, {
            status: 500
        });
    }
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__53fd8a5b._.js.map